{"version":3,"sources":["webpack:///./src/service/api/approver.js","webpack:///./src/views/approver/index.vue?b4cf","webpack:///src/views/approver/index.vue","webpack:///./src/views/approver/index.vue?5cf5","webpack:///./src/views/approver/index.vue"],"names":["table","approverList","params","Promise","resolve","reject","http","post","then","res","err","addApprover","delApprover","updateApprover","detailApprover","render","_vm","this","_h","$createElement","_c","_self","$route","name","attrs","headers","hasBtn","paginationOptions","loading","desserts","on","getList","scopedSlots","_u","key","fn","ref","item","_v","_s","_f","effective_start","effective_end","$t","type","show","$event","handleClick","directives","rawName","value","expression","proxy","staticRenderFns","components","props","beforeDestroy","$store","commit","data","pagesize","state","pageSize","cpage","totalCount","totalpage","validations","computed","list","created","watch","methods","obj","agent_staff_uuid","uuid","$router","push","$myConfirm","component"],"mappings":"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","file":"js/chunk-6ba7bc56.2f6e7c48.js","sourcesContent":["/*\r\n * @Description:审批代理\r\n * @Autor: lwq\r\n * @Date: 2020-07-29 09:48:51\r\n * @LastEditors: lwq\r\n * @LastEditTime: 2020-07-29 17:06:53\r\n * @FilePath: \\mrc-base-server-view\\src\\service\\api\\approver.js\r\n */\r\n\r\nimport http from '../httpConfig'\r\n\r\nconst table = \"mrbase_sys_flow_proxy_approval\"\r\n\r\n// 列表\r\nexport const approverList = (params = {}) => {\r\n  params['~table~'] = table\r\n  return new Promise((resolve, reject) => {\r\n    http.post('/api/proxy_approval/list-approval/v1', params)\r\n      .then(res => {\r\n        resolve(res)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n// 新增\r\nexport const addApprover = (params = {}) => {\r\n  params['~table~'] = table\r\n  return new Promise((resolve, reject) => {\r\n    http.post('/api/proxy_approval/add-approval/v1', params)\r\n      .then(res => {\r\n        resolve(res)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n// 删除\r\nexport const delApprover = (params = {}) => {\r\n  params['~table~'] = table\r\n  return new Promise((resolve, reject) => {\r\n    http.post('/api/proxy_approval/delete-approval/v1', params)\r\n      .then(res => {\r\n        resolve(res)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n// 修改\r\nexport const updateApprover = (params = {}) => {\r\n  params['~table~'] = table\r\n  return new Promise((resolve, reject) => {\r\n    http.post('/api/proxy_approval/update-approval/v1', params)\r\n      .then(res => {\r\n        resolve(res)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n// 详情\r\nexport const detailApprover = (params = {}) => {\r\n  params['~table~'] = table\r\n  return new Promise((resolve, reject) => {\r\n    http.post('/api/proxy_approval/find-approval/v1', params)\r\n      .then(res => {\r\n        resolve(res)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n  })\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.$route.name == 'approver')?_c('mrc_ess_table',{attrs:{\"headers\":_vm.headers,\"pageName\":\"addApprover\",\"hideAddBtn\":!_vm.hasBtn('add-on-behalf-approval-configuration-'),\"paginationOptions\":_vm.paginationOptions,\"isLoading\":_vm.loading,\"slotKey\":['effective_start','agent_staff_uuid'],\"items\":_vm.desserts},on:{\"turnPage\":_vm.getList},scopedSlots:_vm._u([{key:\"item.agent_staff_uuid\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('mrc_ess_staffSpan',{attrs:{\"list\":item}})]}},{key:\"item.effective_start\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('h4',[_vm._v(_vm._s(_vm._f(\"changeDate\")(item.effective_start))+\" - \"+_vm._s(_vm._f(\"changeDate\")(item.effective_end)))])]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('menu-list',{attrs:{\"list\":[\n                  { name: _vm.$t('label_View'),type: 'view', show: _vm.hasBtn('view-on-behalf-approval-configuration')},\n                  { name: _vm.$t('label_Edit'),type: 'edit', show: _vm.hasBtn('edit-on-behalf-approval-configuration-entry')},\n                   {name: _vm.$t('label_delete'),type: 'del', show: _vm.hasBtn('delete-on-behalf-approval-configuration-entry') }\n                   ]},on:{\"handleClick\":function($event){return _vm.handleClick($event,item)}},scopedSlots:_vm._u([{key:\"showAction\",fn:function(){return [_c('v-icon',{directives:[{name:\"btnAuth\",rawName:\"v-btnAuth\",value:(['view--on-behalf-approval-configuration','edit-on-behalf-approval-configuration-entry','delete-on-behalf-approval-configuration-entry']),expression:\"['view--on-behalf-approval-configuration','edit-on-behalf-approval-configuration-entry','delete-on-behalf-approval-configuration-entry']\"}]},[_vm._v(\"mdi-dots-vertical\")])]},proxy:true}],null,true)})]}}],null,false,4245024180)}):_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Description: 流程审批代理\r\n * @Autor: lwq\r\n * @Date: 2020-07-29 09:31:57\r\n * @LastEditors: Please set LastEditors\r\n * @LastEditTime: 2020-09-09 21:05:54\r\n * @FilePath: \\mrc-base-server-view\\src\\views\\approver\\index.vue\r\n--> \r\n<template>\r\n  <div>\r\n    <mrc_ess_table :headers='headers'\r\n                   v-if=\"$route.name == 'approver'\"\r\n                   pageName='addApprover'\r\n                    :hideAddBtn=\"!hasBtn('add-on-behalf-approval-configuration-')\"\r\n                   :paginationOptions='paginationOptions'\r\n                   @turnPage='getList'\r\n                   :isLoading='loading'\r\n                   :slotKey=\"['effective_start','agent_staff_uuid']\"\r\n                   :items='desserts'>\r\n      <template v-slot:item.agent_staff_uuid='{item}'>\r\n        <mrc_ess_staffSpan :list='item'></mrc_ess_staffSpan>\r\n      </template>\r\n      <template v-slot:item.effective_start='{item}'>\r\n        <h4>{{item.effective_start|changeDate}} - {{item.effective_end|changeDate}}</h4>\r\n      </template>\r\n      <template v-slot:item.actions='{item}'>\r\n        <menu-list @handleClick='handleClick($event,item)'\r\n                   :list=\"[\r\n                    { name: $t('label_View'),type: 'view', show: hasBtn('view-on-behalf-approval-configuration')},\r\n                    { name: $t('label_Edit'),type: 'edit', show: hasBtn('edit-on-behalf-approval-configuration-entry')},\r\n                     {name: $t('label_delete'),type: 'del', show: hasBtn('delete-on-behalf-approval-configuration-entry') }\r\n                     ]\">\r\n          <template v-slot:showAction>\r\n            <v-icon v-btnAuth=\"['view--on-behalf-approval-configuration','edit-on-behalf-approval-configuration-entry','delete-on-behalf-approval-configuration-entry']\">mdi-dots-vertical</v-icon>\r\n          </template>\r\n        </menu-list>\r\n      </template>\r\n    </mrc_ess_table>\r\n    <router-view v-else></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { required } from 'vuelidate/lib/validators'\r\nimport { approverList, delApprover } from '@/service/api/approver'\r\nexport default {\r\n  components: {},\r\n  props: {},\r\n  beforeDestroy () {\r\n    this.$store.commit('setCpage', 1)\r\n  },\r\n  data () {\r\n    return {\r\n      loading: false,\r\n      paginationOptions: {\r\n        pagesize: this.$store.state.pageSize,\r\n        cpage: this.$store.state.cpage,\r\n        totalCount: 0, //总条数\r\n        totalpage: 0, //总页数\r\n      },\r\n\r\n      desserts: []\r\n    };\r\n  },\r\n  validations: {},\r\n  computed: {\r\n    headers () {\r\n      return [\r\n        {\r\n          text: this.$t('label_The_acting_employee'),\r\n          align: 'start',\r\n          sortable: false,\r\n          value: 'agent_staff_uuid',\r\n        },\r\n        {\r\n          text: this.$t('label_Date'),\r\n          align: 'start',\r\n          sortable: false,\r\n          value: 'effective_start',\r\n        },\r\n        {\r\n          text: ' ',\r\n          align: 'start',\r\n          sortable: false,\r\n          value: 'actions'\r\n        }\r\n      ]\r\n    },\r\n    list () {\r\n      return [\r\n        {\r\n          name: this.$t('label_Edit')\r\n        },\r\n        {\r\n          name: this.$t('label_delete')\r\n        }\r\n      ]\r\n    },\r\n  },\r\n  created () { },\r\n  watch: {\r\n    async '$route' (val) {\r\n      if (val.name == 'approver') {\r\n        await this.getList(this.paginationOptions)\r\n      }\r\n    }\r\n  },\r\n  async mounted () {\r\n    await this.getList(this.paginationOptions)\r\n  },\r\n\r\n  methods: {\r\n    async getList (obj) {\r\n      if (obj) {\r\n        this.paginationOptions = obj\r\n      }\r\n      this.loading = true\r\n      const res = await approverList({\r\n        cpage: this.paginationOptions.cpage,\r\n        pagesize: this.paginationOptions.pagesize\r\n      })\r\n      if (res.code == 200) {\r\n        this.desserts = res.data\r\n        this.paginationOptions.totalCount = res.totalCount\r\n        this.paginationOptions.totalpage = res.totalpage\r\n      }\r\n      this.loading = false\r\n    },\r\n    /**\r\n     * @description: 进入详情\r\n     * @param {index} 点的第几个menu \r\n     * @param {item} 点的整条数据\r\n     * @return: \r\n     * @author: lwq\r\n     */\r\n    handleClick ({ item, index }, obj) {\r\n      if (item.type == 'view') {\r\n        this.$store.commit('set_subPage_name', obj.agent_staff_uuid)\r\n        this.$store.commit('set_uuid', obj.uuid)\r\n\r\n        this.$store.commit('set_iconstatus', true)\r\n        this.$router.push({\r\n          name: 'detailApprover',\r\n          params: {\r\n            name: obj.agent_staff_uuid,\r\n            uuid: obj.uuid\r\n          }\r\n        })\r\n      }\r\n      if (item.type == 'edit') {\r\n        this.$store.commit('set_subPage_name', obj.agent_staff_uuid)\r\n        this.$store.commit('set_uuid', obj.uuid)\r\n\r\n        this.$store.commit('set_iconstatus', false)\r\n        this.$router.push({\r\n          name: 'detailApprover',\r\n          params: {\r\n            name: obj.agent_staff_uuid,\r\n            uuid: obj.uuid\r\n          }\r\n        })\r\n      }\r\n      if (item.type == 'del') {\r\n        this.$myConfirm({ content: this.$t('message_Confirm_the_deletion') })\r\n          .then(async () => {\r\n            const del = await delApprover({\r\n              uuid: obj.uuid\r\n            })\r\n            if (del.code == 200) {\r\n              this.$Message({ text: this.$t('message_The_deletion_was_successful') })\r\n              // this.desserts.length === 1  只有一条数据 删除就请求上一页的数据\r\n              if (this.desserts.length === 1 && this.paginationOptions.cpage > 1) {\r\n                this.paginationOptions.cpage--\r\n              }\r\n              await this.getList()\r\n            }\r\n          }).catch(() => { })\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=8bd0b404&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8bd0b404\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}