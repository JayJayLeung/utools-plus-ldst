(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6af6c98f","chunk-77224258"],{b3d4:function(t,e,a){},ba55:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"func_detail"},[a("v-tabs",{attrs:{grow:""},model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[a("v-tab",[t._v(t._s(t.$t("label_function")))]),a("v-tab",[t._v(t._s(t.$t("label_button")))])],1),a("v-tabs-items",{model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[a("v-tab-item",[a("func-detail",{attrs:{func_disabled:t.func_disabled,func_data:t.func_data},on:{getData:t.getData,func_cancel:t.func_cancel,getBtnClientType:t.getBtnClientType}})],1),a("v-tab-item",[a("btn-detail",{attrs:{version_uuid:t.func_data.module_uuid,list:t.btnList,version:t.func_data.version,client_type:t.client_type},on:{success:t.success,cancel:t.btn_cancel}})],1)],1)],1)},n=[],s=(a("ac1f"),a("1276"),a("5530")),u=(a("96cf"),a("1da1")),l=a("6924"),r=(a("9858"),a("ce1ba")),c=a("7efe"),o={components:{funcDetail:r["default"],btnDetail:c["default"]},props:{},data:function(){return{uuid:"",func_disabled:!0,func_data:{function_name:"",function_shortcode:"",function_description:"",table_uuid:"",function_type_uuid:"",module_uuid:"",org_level_uuid:[],status_uuid:"",uuid:"",function_id:""},top_module:[],data_table:[],func_type:[],unit_data:[],btnList:[],client_type:[],tabs:0}},created:function(){},mounted:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$store.getters.subPage_name,a=this.$route.params.uuid||this.$store.state.uuid,this.uuid=a,!this.uuid){t.next=8;break}return t.next=6,Object(l["get_func_detail"])({uuid:this.uuid});case 6:i=t.sent,200==i.code&&(i.data.org_level_uuid?i.data.org_level_uuid=i.data.org_level_uuid.split(","):i.data.org_level_uuid=[],this.func_data=i.data,this.btnList=i.mrbase_sys_function_buttons,this.$route.meta.title=e);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{func_cancel:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$store.state.uuid){t.next=4;break}this.$router.go(-1),t.next=9;break;case 4:return t.next=6,Object(l["get_func_detail"])({uuid:this.uuid});case 6:e=t.sent,e.data.org_level_uuid&&(e.data.org_level_uuid=e.data.org_level_uuid.split(",")),this.func_data=e.data;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),btn_cancel:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$store.state.uuid){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(l["get_func_detail"])({uuid:this.uuid});case 4:e=t.sent,e.data.org_level_uuid&&(e.data.org_level_uuid=e.data.org_level_uuid.split(",")),this.btnList=e.mrbase_sys_function_buttons;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getBtnClientType:function(t){this.client_type=t},handleReturn:function(){console.log("返回")},handleEdit:function(){this.disabled=!this.disabled},handleDel:function(){console.log("删除")},getData:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["get_func_update"])(Object(s["a"])(Object(s["a"])({},e),{},{org_level_uuid:this.$store.state.userData.org_level_uuid}));case 2:a=t.sent,200==a.code&&(this.$store.commit("newsTips",this.$t("message_The_operation_was_successful")),this.func_disabled=!this.func_disabled,this.$store.state.iconstatus||(this.func_disabled=!1,this.$store.commit("set_iconstatus",!1)),this.$route.meta.title=e.function_name);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),success:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},computed:{},watch:{}},d=o,_=(a("dd9d"),a("2877")),f=Object(_["a"])(d,i,n,!1,null,"4f59d912",null);e["default"]=f.exports},ce1ba:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("mrc_ess_skLoaders",{attrs:{skLoading:t.skLoading}},[a("v-card",[a("v-card-subtitle",[t.$store.state.uuid?a("mrc_ess_iconGroup",{directives:[{name:"show",rawName:"v-show",value:t.disabled,expression:"disabled"}],staticStyle:{top:"-50px"},attrs:{showEdit:t.hasBtn("edit-function"),show_del:t.hasBtn("delete-function")},on:{handleReturn:t.handleReturn,handleEdit:t.handleEdit,handleDel:t.handleDel}}):t._e()],1),a("v-card-text",[a("v-row",{attrs:{dense:""}},[a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"2"}},[a("v-switch",{attrs:{label:t.detailData.status_uuid?t.$t("label_To_enable_the"):t.$t("label_disable"),color:"primary",readonly:t.disabled},model:{value:t.detailData.status_uuid,callback:function(e){t.$set(t.detailData,"status_uuid",e)},expression:"detailData.status_uuid"}})],1)],1),a("v-form",{ref:"add_func"},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"6"}},[a("mrc_ess_multiText",{staticStyle:{width:"100%"},attrs:{label:t.$t("label_The_name_of_the_function")+"*",required:"",isNational:t.judegNational("function_name"),"append-icon":"mdi-longitude",readonly:t.disabled,rules:t.$text_rules(t.$t("label_The_name_of_the_function"))},model:{value:t.detailData.function_name,callback:function(e){t.$set(t.detailData,"function_name",e)},expression:"detailData.function_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("mrc_ess_multiText",{staticStyle:{width:"100%"},attrs:{readonly:t.disabled,required:"",label:t.$t("label_Function_short_code")+"*",isNational:t.judegNational("function_shortcode"),"append-icon":"mdi-longitude",rules:t.$text_rules(t.$t("label_Function_short_code"))},model:{value:t.detailData.function_shortcode,callback:function(e){t.$set(t.detailData,"function_shortcode",e)},expression:"detailData.function_shortcode"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"12"}},[a("mrc_ess_multiText",{staticStyle:{width:"100%"},attrs:{readonly:t.disabled,required:"",label:t.$t("label_Functional_description")+"*",isNational:t.judegNational("function_description"),rules:t.$text_rules(t.$t("label_Functional_description"))},model:{value:t.detailData.function_description,callback:function(e){t.$set(t.detailData,"function_description",e)},expression:"detailData.function_description"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[a("v-select",{attrs:{items:t.top_module,label:t.$t("label_The_superior_module")+"*",isNational:t.judegNational("module_uuid"),"item-text":"view_fields","item-value":"value_field",readonly:Boolean(t.$store.state.uuid),required:"",chips:"",rules:[function(e){return!!e||t.$t("label_The_superior_module")}]},on:{change:t.moduleChange},model:{value:t.detailData.module_uuid,callback:function(e){t.$set(t.detailData,"module_uuid",e)},expression:"detailData.module_uuid"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[t.$store.state.uuid?a("v-text-field",{attrs:{disabled:"",label:t.$t("label_version")+"*",rules:t.$text_rules(t.$t("label_version"))},model:{value:t.detailData.version,callback:function(e){t.$set(t.detailData,"version",e)},expression:"detailData.version"}}):a("v-select",{attrs:{items:t.version_arr,label:t.$t("label_version")+"*",required:"",rules:[function(e){return!!e||t.$t("label_version")}],readonly:Boolean(t.$store.state.uuid),chips:""},model:{value:t.detailData.version,callback:function(e){t.$set(t.detailData,"version",e)},expression:"detailData.version"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{readonly:t.disabled,items:t.data_table,label:t.$t("label_Associated_data_table")+"*","item-text":"view_fields","item-value":"value_field",required:"",chips:"",rules:[function(e){return!!e||t.$t("label_Associated_data_table")}]},model:{value:t.detailData.table_uuid,callback:function(e){t.$set(t.detailData,"table_uuid",e)},expression:"detailData.table_uuid"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-select",{attrs:{readonly:t.disabled,label:t.$t("label_Client_type")+"*",items:t.client_type,"item-value":"value_field","item-text":"view_fields",required:"","no-data-text":"请先选择上级模块",chips:"",multiple:"",rules:[function(e){return e.length>0||t.$t("label.client_type")}]},model:{value:t.detailData.client_type_uuid,callback:function(e){t.$set(t.detailData,"client_type_uuid",e)},expression:"detailData.client_type_uuid"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[a("v-select",{attrs:{readonly:t.disabled,items:t.func_type,label:t.$t("label_Function_type")+"*","item-text":"dict_label","item-value":"dict_value",required:"",chips:"",rules:[function(e){return!!e||t.$t("label_Function_type")}]},model:{value:t.detailData.function_type_uuid,callback:function(e){t.$set(t.detailData,"function_type_uuid",e)},expression:"detailData.function_type_uuid"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{readonly:t.disabled,items:t.unit_data,label:t.$t("label_Only_for_the_following_units"),"item-value":"value_field","item-text":"view_fields",multiple:"",chips:""},model:{value:t.detailData.org_level_uuid,callback:function(e){t.$set(t.detailData,"org_level_uuid",e)},expression:"detailData.org_level_uuid"}})],1)],1)],1)],1),t.disabled?t._e():a("mrc_ess_submitBtn",{attrs:{cancelText:t.$t("label_cancel"),successText:t.successText},on:{cancel:t.cancel,success:t.success}})],1)],1)},n=[],s=(a("4160"),a("a15b"),a("ac1f"),a("1276"),a("159b"),a("96cf"),a("1da1")),u=a("6924"),l=a("fb42"),r=a("9858"),c={components:{},props:{func_data:{type:Object},func_disabled:{type:Boolean}},data:function(){return{skLoading:!0,successText:this.$t("label_The_next_step"),detailData:{function_name:"",function_shortcode:"",function_description:"",table_uuid:"",function_type_uuid:"",module_uuid:"",org_level_uuid:[],status_uuid:!0,client_type_uuid:[],version:"",uuid:null},uuid:null,top_module:[],data_table:[],func_type:[],unit_data:[],version_arr:[],client_type:[],version_uuid:"",disabled:!1,tempData:{}}},created:function(){},mounted:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.skLoading=!0,t.prev=1,t.next=4,this.national("mrbase_sys_functions");case 4:return t.next=6,Object(l["getBusinessList"])({prompt_name:"function_parent",uuid:this.detailData.uuid});case 6:return e=t.sent,this.top_module=e.data,t.next=10,Object(u["getBusinessList"])("table_name");case 10:return a=t.sent,this.data_table=a.data,t.next=14,Object(r["getDataByName"])("functionType");case 14:return i=t.sent,this.func_type=i.data,t.next=18,Object(u["getBusinessList"])("open_util");case 18:return n=t.sent,this.unit_data=n.data,t.next=22,Object(u["get_versions"])({module_uuid:this.detailData.module_uuid});case 22:s=t.sent,this.version_arr=s.data.version.split(","),this.version_uuid=s.data.uuid,this.skLoading=!1,t.next=31;break;case 28:t.prev=28,t.t0=t["catch"](1),this.skLoading=!1;case 31:case"end":return t.stop()}}),t,this,[[1,28]])})));function e(){return t.apply(this,arguments)}return e}(),methods:{moduleChange:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$store.state.uuid){t.next=8;break}return this.detailData.version="",this.version_arr=[],t.next=5,Object(u["get_versions"])({module_uuid:e});case 5:a=t.sent,this.version_arr=a.data.version.split(","),this.version_uuid=a.data.uuid;case 8:return t.next=10,Object(l["getBusinessList"])({prompt_name:"function_client_type",module_uuid:e});case 10:i=t.sent,this.client_type=i.data;case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleReturn:function(){this.$router.go(-1)},handleEdit:function(){this.disabled=!this.disabled},handleDel:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$myConfirm({content:this.$t("message_Confirm_the_deletion")}).then(Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["get_func_del"])({uuid:e.detailData.uuid});case 2:a=t.sent,console.log(a),200==a.code&&(e.$store.commit("newsTips",e.$t("message_The_deletion_was_successful")),e.$router.push({name:"module_func_manage"}));case 5:case"end":return t.stop()}}),t,this)}))))["catch"]((function(t){}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){var t=this;this.$myConfirm({content:this.$t("message_Confirm_the_cancellation_of_the_edit")}).then((function(){t.detailData.uuid?(t.disabled=!t.disabled,t.$emit("func_cancel")):t.$router.go(-1)}))["catch"]((function(){}))},success:function(){var t=this,e=this.$refs.add_func.validate();if(e){var a=this.$clone(this.detailData);a.status_uuid=a.status_uuid?1:0,a.org_level_uuid=a.org_level_uuid.join(),a.client_type_uuid=a.client_type_uuid.join(),a.created_utc_datetime&&(delete a.created_utc_datetime,delete a.updated_utc_datetime),this.$emit("getData",a);var i=[];this.client_type.forEach((function(e){t.detailData.client_type_uuid.forEach((function(t){e.value_field==t&&i.push(e)}))})),this.$emit("getBtnClientType",i),this.$emit("getVersion_uuid",this.version_uuid)}}},computed:{},watch:{func_data:{handler:function(t){var e=this;this.$nextTick(Object(s["a"])(regeneratorRuntime.mark((function a(){var i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.disabled=!0,e.successText=e.$t("label_submit"),i=e.$clone(t),i.client_type_uuid&&(i.client_type_uuid=i.client_type_uuid.split(",")),a.next=6,e.moduleChange(i.module_uuid);case 6:e.detailData=i,e.tempData=i,n=[],e.client_type.length>0&&e.client_type.forEach((function(t){i.client_type_uuid.forEach((function(e){t.value_field==e&&n.push(t)}))})),e.$emit("getBtnClientType",n);case 11:case"end":return a.stop()}}),a,this)}))))},deep:!0},func_disabled:function(){this.disabled=!this.disabled,this.tempData=this.detailData}}},o=c,d=a("2877"),_=Object(d["a"])(o,i,n,!1,null,"24843b5c",null);e["default"]=_.exports},dd9d:function(t,e,a){"use strict";var i=a("b3d4"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-6af6c98f.23fa26db.js.map