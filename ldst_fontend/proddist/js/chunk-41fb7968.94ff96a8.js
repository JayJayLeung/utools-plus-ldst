(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41fb7968"],{"212e":function(e,t,a){},"5cdb":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"d-flex"},[a("v-col",{staticStyle:{"background-color":"#eeeef0"},attrs:{cols:"3"}},[a("v-tabs",{attrs:{vertical:!0,"background-color":"#ffffff",color:"primary",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return a("v-tab",{key:t.tab,staticStyle:{color:"black"}},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(s){var n=s.on,i=s.attrs;return[a("span",e._g(e._b({staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","max-width":"200px","min-width":"100px","text-align":"left"}},"span",i,!1),n),[e._v(e._s(t.tab))])]}}],null,!0)},[a("span",[e._v(" "+e._s(t.tab))])])],1)})),1)],1),a("v-col",{staticClass:"pl-0 pr-0 pt-0 pb-0",attrs:{cols:"9"}},[a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[a("employeemsg",{attrs:{disabled:e.iconstatus}})],1),a("v-tab-item",[a("employeeonemsg",{attrs:{disabled:e.iconstatus}})],1),a("v-tab-item",[a("v-card",[a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("mrc_ess_datePicker",{attrs:{disabled:e.iconstatus,label:e.$t("label_The_date_of_first_joining_the_company")+"*",errMsg:e.$errors("jobslist","first_employment_date",[{rule:"jobsbeforeDate",msg:e.$t("verify_The_date_was_filled_in_incorrectly")}])},on:{getTime:e.paramsChange},model:{value:e.jobslist.first_employment_date,callback:function(t){e.$set(e.jobslist,"first_employment_date",t)},expression:"jobslist.first_employment_date"}})],1),a("v-col",{attrs:{cols:"6"}},[a("mrc_ess_datePicker",{attrs:{disabled:e.iconstatus,errMsg:e.$errors("jobslist","employment_date",[{rule:"jobsCenterDate",msg:e.$t("verify_The_date_was_filled_in_incorrectly")}]),label:e.$t("label_Thedate_of_recent_joining_the_company")+"*"},on:{getTime:e.paramsChange},model:{value:e.jobslist.employment_date,callback:function(t){e.$set(e.jobslist,"employment_date",t)},expression:"jobslist.employment_date"}})],1),a("v-col",{attrs:{cols:"6"}},[a("mrc_ess_datePicker",{attrs:{disabled:e.iconstatus,label:e.$t("label_The_end_date_of_the_trial_period")+"*",errMsg:e.$errors("jobslist","probation_end_date",[{rule:"jobsafterDate",msg:e.$t("verify_The_date_was_filled_in_incorrectly")}])},on:{getTime:e.paramsChange},model:{value:e.jobslist.probation_end_date,callback:function(t){e.$set(e.jobslist,"probation_end_date",t)},expression:"jobslist.probation_end_date"}})],1),a("v-col",{attrs:{cols:"6"}},[a("mrc_ess_datePicker",{attrs:{label:e.$t("label_The_date_of_separation")+"*"},on:{getTime:e.paramsChange},model:{value:e.jobslist.termination_notification_date,callback:function(t){e.$set(e.jobslist,"termination_notification_date",t)},expression:"jobslist.termination_notification_date"}})],1)],1)],1),e.iconstatus?e._e():a("mrc_ess_submitBtn",{attrs:{loading:e.btnIsLoading},on:{success:e.datesuccess,cancel:e.datecancel}})],1)],1),a("v-tab-item",[a("v-card",[a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.blanklist,"sort-by":"calories","hide-default-footer":""},on:{"click:row":e.godetail},scopedSlots:e._u([{key:"item.is_used",fn:function(t){var s=t.item;return[1==s.is_used?a("v-btn",{attrs:{rounded:"",color:"green",dark:"","x-small":""}},[e._v(e._s(e.$t("label_To_enable_the")))]):a("v-btn",{attrs:{rounded:"",color:"red",dark:"","x-small":""}},[e._v(e._s(e.$t("label_disable")))])]}},e.iconstatus?null:{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{on:{click:function(t){return e.editItem(s)}}},[e._v("mdi-pencil")]),a("v-icon",{staticClass:"m1",on:{click:function(t){return e.deleteItem(s)}}},[e._v("mdi-delete")])]}},{key:"footer",fn:function(){return[a("v-divider"),e.iconstatus?e._e():a("span",{staticClass:"mt-2 pb-2 d-flex ml-5",on:{click:e.editItem}},[a("span",{style:{color:e.$vuetify.theme.defaults.light.primary,"line-height":"28px","font-size":"14px"}},[e._v(e._s(e.$t("label_New_bank_account")))]),a("v-icon",{staticClass:"material-icons",style:{color:e.$vuetify.theme.defaults.light.primary,"font-size":"24px"}},[e._v("add")])],1)]},proxy:!0}],null,!0)})],1),e.iconstatus?e._e():a("mrc_ess_submitBtn",{attrs:{loading:e.btnIsLoading},on:{success:e.blanksuccess,cancel:e.blankcancel}})],1)],1),a("v-tab-item",[a("v-card",[a("v-card-text",[e.iconstatus?e._e():a("div",{staticStyle:{height:"40px"}},[a("v-btn",{staticStyle:{position:"absolute",right:"10px",color:"black"},attrs:{rounded:"",color:"#ffffff",dark:""},on:{click:e.editItemtel}},[a("span",{staticStyle:{color:"#0F46C1","font-size":"30px"}},[e._v("+")]),e._v(e._s(e.$t("label_New_emergency_contact")))])],1),e._l(e.tellist,(function(t,s){return a("v-card",{key:s,staticClass:"m2"},[a("v-card-title",{staticClass:"telheader"},[a("span",{staticClass:"c1"},[e._v(e._s(e.$t("label_Emergency_contact"))+e._s(s+1))]),e.iconstatus?e._e():a("div",[a("v-icon",{staticClass:"mr-2",on:{click:function(a){return e.editItemtel(t)}}},[e._v(" mdi-pencil ")]),a("v-icon",{on:{click:function(a){return e.deleteItemtel(t)}}},[e._v(" mdi-delete ")])],1)]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_Relationship"),readonly:e.iconstatus,isNational:e.judegNational("emergency_contact_relationship")},model:{value:t.emergency_contact_relationship,callback:function(a){e.$set(t,"emergency_contact_relationship",a)},expression:"item.emergency_contact_relationship"}})],1),a("v-col",{attrs:{cols:"6"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_Full_name"),readonly:e.iconstatus,isNational:e.judegNational("emergency_contact_given_name")},model:{value:t.emergency_contact_given_name,callback:function(a){e.$set(t,"emergency_contact_given_name",a)},expression:"item.emergency_contact_given_name"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:e.$t("label_Contact_number"),readonly:e.iconstatus},model:{value:t.phone_number,callback:function(a){e.$set(t,"phone_number",a)},expression:"item.phone_number"}})],1),a("v-col",{attrs:{cols:"6"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_Mailbox"),isNational:e.judegNational("emergency_contact_email"),readonly:e.iconstatus},model:{value:t.emergency_contact_email,callback:function(a){e.$set(t,"emergency_contact_email",a)},expression:"item.emergency_contact_email"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{staticClass:"m3",attrs:{label:e.$t("label_The_mailing_address"),readonly:!0,height:"25"},model:{value:t.emergency_contact_address_line_1,callback:function(a){e.$set(t,"emergency_contact_address_line_1",a)},expression:"item.emergency_contact_address_line_1"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{staticClass:"m3",attrs:{readonly:!0,height:"25"},model:{value:t.emergency_contact_address_line_2,callback:function(a){e.$set(t,"emergency_contact_address_line_2",a)},expression:"item.emergency_contact_address_line_2"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{staticClass:"m3",attrs:{readonly:!0,height:"25"},model:{value:t.emergency_contact_address_line_3,callback:function(a){e.$set(t,"emergency_contact_address_line_3",a)},expression:"item.emergency_contact_address_line_3"}})],1)],1)],1)],1)}))],2),e.iconstatus?e._e():a("mrc_ess_submitBtn",{attrs:{loading:e.btnIsLoading},on:{success:e.telsuccess,cancel:e.telcancel}})],1)],1)],1)],1)],1),a("mrc_ess_myDialog",{attrs:{title:e.$t("label_New_emergency_contact"),width:800},on:{success:e.telsave,cancel:e.telclose},model:{value:e.dialog2,callback:function(t){e.dialog2=t},expression:"dialog2"}},[a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_Relationship")+"*",isNational:e.judegNational("emergency_contact_relationship"),readonly:e.iconstatus,"error-messages":e.$errors("editedtelItem","emergency_contact_relationship",e.requiredRule.concat(e.nocharacter))},model:{value:e.editedtelItem.emergency_contact_relationship,callback:function(t){e.$set(e.editedtelItem,"emergency_contact_relationship",t)},expression:"editedtelItem.emergency_contact_relationship"}})],1),a("v-col",{attrs:{cols:"6"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_The_name")+"*",isNational:e.judegNational("emergency_contact_given_name"),readonly:e.iconstatus,"error-messages":e.$errors("editedtelItem","emergency_contact_given_name",e.requiredRule.concat(e.nocharacter))},model:{value:e.editedtelItem.emergency_contact_given_name,callback:function(t){e.$set(e.editedtelItem,"emergency_contact_given_name",t)},expression:"editedtelItem.emergency_contact_given_name"}})],1),a("v-col",{attrs:{cols:"6"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_Surname")+"*",isNational:e.judegNational("emergency_contact_family_name"),readonly:e.iconstatus,"error-messages":e.$errors("editedtelItem","emergency_contact_family_name",e.requiredRule.concat(e.nocharacter))},model:{value:e.editedtelItem.emergency_contact_family_name,callback:function(t){e.$set(e.editedtelItem,"emergency_contact_family_name",t)},expression:"editedtelItem.emergency_contact_family_name"}})],1),a("v-col",{attrs:{cols:"6"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_Other_names")+"*",isNational:e.judegNational("emergency_contact_christian_name"),readonly:e.iconstatus,"error-messages":e.$errors("editedtelItem","emergency_contact_christian_name",e.requiredRule.concat(e.nocharacter))},model:{value:e.editedtelItem.emergency_contact_christian_name,callback:function(t){e.$set(e.editedtelItem,"emergency_contact_christian_name",t)},expression:"editedtelItem.emergency_contact_christian_name"}})],1),a("v-col",{attrs:{cols:"6"}}),a("v-col",{attrs:{cols:"2"}},[a("mrc_ess_prompt",{attrs:{label:e.$t("label_The_area_code")+"*",disabled:e.iconstatus,rules:!1,chips:!1,errMsg:e.$errors("editedtelItem","emergency_contact_area_code",e.requiredRule),obj:"country_mobile_prefix"},model:{value:e.editedtelItem.emergency_contact_area_code,callback:function(t){e.$set(e.editedtelItem,"emergency_contact_area_code",t)},expression:"editedtelItem.emergency_contact_area_code"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:e.$t("label_Contact_number")+"*",readonly:e.iconstatus},model:{value:e.editedtelItem.emergency_contact_phone_number,callback:function(t){e.$set(e.editedtelItem,"emergency_contact_phone_number",t)},expression:"editedtelItem.emergency_contact_phone_number"}})],1),a("v-col",{attrs:{cols:"6"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_Mailbox"),isNational:e.judegNational("emergency_contact_email"),"error-messages":e.$errors("editedtelItem","emergency_contact_email",e.emailRule),readonly:e.iconstatus},model:{value:e.editedtelItem.emergency_contact_email,callback:function(t){e.$set(e.editedtelItem,"emergency_contact_email",t)},expression:"editedtelItem.emergency_contact_email"}})],1),a("v-col",{attrs:{cols:"12"}},[a("mrc_ess_multiText",{staticClass:"m3",attrs:{label:e.$t("label_The_mailing_address"),isNational:e.judegNational("emergency_contact_address_line_1"),readonly:e.iconstatus,height:"25"},model:{value:e.editedtelItem.emergency_contact_address_line_1,callback:function(t){e.$set(e.editedtelItem,"emergency_contact_address_line_1",t)},expression:"editedtelItem.emergency_contact_address_line_1"}})],1),a("v-col",{attrs:{cols:"12"}},[a("mrc_ess_multiText",{staticClass:"m3",attrs:{isNational:e.judegNational("emergency_contact_address_line_2"),readonly:e.iconstatus,height:"25"},model:{value:e.editedtelItem.emergency_contact_address_line_2,callback:function(t){e.$set(e.editedtelItem,"emergency_contact_address_line_2",t)},expression:"editedtelItem.emergency_contact_address_line_2"}})],1),a("v-col",{attrs:{cols:"12"}},[a("mrc_ess_multiText",{staticClass:"m3",attrs:{isNational:e.judegNational("emergency_contact_address_line_3"),readonly:e.iconstatus,height:"25"},model:{value:e.editedtelItem.emergency_contact_address_line_3,callback:function(t){e.$set(e.editedtelItem,"emergency_contact_address_line_3",t)},expression:"editedtelItem.emergency_contact_address_line_3"}})],1)],1)],1)],1),a("mrc_ess_myDialog",{attrs:{title:e.$t("label_New_bank_account")},on:{success:e.save,cancel:e.close},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card-text",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("mrc_ess_multiText",{attrs:{isNational:e.judegNational("bank_name"),"error-messages":e.$errors("editedItem","bank_name",e.requiredRule.concat(e.nocharacter)),label:e.$t("label_The_name_of_the_bank")+"*"},on:{input:function(t){return e.$v.editedItem.bank_name.$touch()}},model:{value:e.editedItem.bank_name,callback:function(t){e.$set(e.editedItem,"bank_name",t)},expression:"editedItem.bank_name"}})],1),a("v-col",{attrs:{cols:"12"}},[a("mrc_ess_multiText",{attrs:{isNational:e.judegNational("bank_account_number"),"error-messages":e.$errors("editedItem","bank_account_number",e.requiredRule.concat(e.numericRule)),label:e.$t("label_Account_number")+"*"},on:{input:function(t){return e.$v.editedItem.bank_account_number.$touch()}},model:{value:e.editedItem.bank_account_number,callback:function(t){e.$set(e.editedItem,"bank_account_number",t)},expression:"editedItem.bank_account_number"}})],1),a("v-col",{attrs:{cols:"12"}},[a("mrc_ess_multiText",{attrs:{isNational:e.judegNational("bank_account_holder_name"),"error-messages":e.$errors("editedItem","bank_account_holder_name",e.requiredRule.concat(e.nocharacter)),label:e.$t("label_Register_name")},model:{value:e.editedItem.bank_account_holder_name,callback:function(t){e.$set(e.editedItem,"bank_account_holder_name",t)},expression:"editedItem.bank_account_holder_name"}})],1),a("v-col",{attrs:{cols:"5"}},[a("mrc_ess_datePicker",{attrs:{disabled:!1,errMsg:e.$errors("editedItem","effective_start_date",e.requiredRule.concat([{rule:"beforeDate",msg:"不能超过终止日期"}])),label:e.$t("label_Effective_date")+"*"},on:{getTime:e.paramsChange},model:{value:e.editedItem.effective_start_date,callback:function(t){e.$set(e.editedItem,"effective_start_date",t)},expression:"editedItem.effective_start_date"}})],1),a("v-col",{staticClass:"f2",attrs:{cols:"2"}},[e._v(" >")]),a("v-col",{attrs:{cols:"5"}},[a("mrc_ess_datePicker",{attrs:{disabled:!1,errMsg:e.$errors("editedItem","effective_end_date",e.requiredRule.concat([{rule:"afterDate",msg:"不能晚于开始时间"}]))},on:{getTime:e.paramsChange},model:{value:e.editedItem.effective_end_date,callback:function(t){e.$set(e.editedItem,"effective_end_date",t)},expression:"editedItem.effective_end_date"}})],1)],1)],1)],1)],1)},n=[],i=(a("99af"),a("caad"),a("c975"),a("d81d"),a("a434"),a("0d03"),a("2532"),a("2909")),r=(a("96cf"),a("1da1")),l=a("825e"),c=a("a8ee"),o=a("b5ae"),_=a("b60a"),d=a("c1df"),u=a.n(d),m={components:{employeemsg:l["default"],employeeonemsg:c["default"]},props:{iconstatus:{type:Boolean}},data:function(){return{btnIsLoading:!1,dialog2:!1,dialog:!1,disabled:!1,stafflist:"",tab:null,jobslist:{staff_uuid:"",first_employment_date:null,employment_date:null,probation_end_date:null,termination_notification_date:null,termination_effective_date:null},blanklist:[{staff_bank_account_id:11,uuid:"",staff_uuid:"",bank_name:"",bank_account_number:"",bank_account_holder_name:""}],deleteblanklist:[],editedIndex:-1,editedItem:{bank_name:"",bank_account_number:"",bank_account_holder_name:"",effective_start_date:"",effective_end_date:""},defaultItem:{bank_name:"",bank_account_number:"",bank_account_holder_name:"",effective_start_date:"",effective_end_date:""},tellist:[],deletetellist:[],editedtelIndex:-1,editedtelItem:{emergency_contact_relationship:"",emergency_contact_given_name:"",emergency_contact_family_name:"",emergency_contact_christian_name:"",emergency_contact_area_code:"",emergency_contact_phone_number:"",emergency_contact_email:"",emergency_contact_address_line_1:"",emergency_contact_address_line_2:"",emergency_contact_address_line_3:""},defaulteltItem:{emergency_contact_relationship:"",emergency_contact_given_name:"",emergency_contact_family_name:"",emergency_contact_christian_name:"",emergency_contact_area_code:"",emergency_contact_phone_number:"",emergency_contact_email:"",emergency_contact_address_line_1:"",emergency_contact_address_line_2:"",emergency_contact_address_line_3:""}}},created:function(){},mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.national("mrbase_sys_staff_employment_info");case 2:return e.next=4,this.getjoblist();case 4:return e.next=6,this.getblanklist();case 6:return e.next=8,this.gettellist();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getjoblist:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$store.state.uuid,e.next=3,Object(_["getStaffJobDetail"])({staff_uuid:t});case 3:a=e.sent,"200"===a.code&&(this.jobslist=a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getblanklist:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$store.state.uuid,e.next=3,Object(_["getStaffBank"])({staff_uuid:t});case 3:a=e.sent,"200"===a.code&&(this.blanklist=a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),gettellist:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$store.state.uuid,e.next=3,Object(_["getStaffTelList"])({staff_uuid:t});case 3:a=e.sent,"200"===a.code&&(this.tellist=this.$deletefield(a.data).map((function(e){return e["phone_number"]="+"+e.emergency_contact_area_code+" "+e.emergency_contact_phone_number,e})));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),paramsChange:function(){},datesuccess:function(){var e=this;if(this.$v.jobslist.$touch(),!this.$v.jobslist.$error){for(var t in this.btnIsLoading=!0,this.jobslist.staff_uuid=this.$store.state.uuid,this.jobslist)t.includes("date")&&(this.jobslist[t]?this.jobslist[t]=u()(this.jobslist[t]).format("YYYY-MM-DD"):delete this.jobslist[t]);Object(_["getStaffJobUpdate"])(this.jobslist).then(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("200"!==a.code){t.next=7;break}return e.$store.commit("newsTips",e.$t("message_The_operation_was_successful")),t.next=4,e.getjoblist();case 4:e.btnIsLoading=!1,t.next=9;break;case 7:e.$store.commit("newsTips",e.$t("message_The_modification_failed")),e.btnIsLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}())}},blanksuccess:function(){var e=this;this.btnIsLoading=!0;var t=this.$store.state.uuid,a=this.$store.state.detailuuid;this.blanklist.map((function(e){delete e.created_by,delete e.created_utc_datetime,delete e.updated_by,delete e.updated_utc_datetime,e.status||(e.status=1),e.effective_start_date||e.effective_end_date?(e.effective_start_date=u()(e.effective_start_date).format("YYYY-MM-DD"),e.effective_end_date=u()(e.effective_end_date).format("YYYY-MM-DD")):(delete e.effective_start_date,delete e.effective_end_date)})),Object(_["getStaffBankUpdate"])({uuid:t,user_id:a,mrbase_sys_staff_bank_account:[].concat(Object(i["a"])(this.blanklist),Object(i["a"])(this.deleteblanklist))}).then(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("200"!==a.code){t.next=7;break}return e.$store.commit("newsTips",e.$t("message_The_operation_was_successful")),t.next=4,e.getblanklist();case 4:e.btnIsLoading=!1,t.next=9;break;case 7:e.$store.commit("newsTips",e.$t("message_The_modification_failed")),e.btnIsLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}())},blankcancel:function(){var e=this;this.$myConfirm({content:"确认取消编辑"}).then((function(t){e.$router.push({name:"staffmanagement"})}))["catch"]((function(e){}))},telsuccess:function(){var e=this;this.btnIsLoading=!0;var t=this.$store.state.uuid,a=this.$store.state.detailuuid,s=this.tellist.map((function(e){return delete e.phone_number,e}));Object(_["getStaffTelUpdate"])({uuid:t,user_id:a,mrbase_sys_staff_emergency_contact_info:[].concat(Object(i["a"])(this.deletetellist),Object(i["a"])(s))}).then(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("200"!==a.code){t.next=7;break}return e.$store.commit("newsTips",e.$t("message_The_operation_was_successful")),t.next=4,e.gettellist();case 4:e.btnIsLoading=!1,t.next=9;break;case 7:e.$store.commit("newsTips",e.$t("message_The_modification_failed")),e.btnIsLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}())},telcancel:function(){var e=this;this.$myConfirm({content:"确认取消编辑"}).then((function(t){e.$router.push({name:"staffmanagement"})}))["catch"]((function(e){}))},datecancel:function(){var e=this;this.$myConfirm({content:"确认取消编辑"}).then((function(t){e.$router.push({name:"staffmanagement"})}))["catch"]((function(e){}))},godetail:function(){},editItem:function(e){this.$v.editedItem.$reset(),(e.staff_uuid||e.staff_uuid||e.bank_name||e.bank_account_number)&&(this.editedIndex=this.blanklist.indexOf(e),this.editedItem=Object.assign({},e)),this.dialog=!0},deleteItem:function(e){var t=this,a=this.blanklist.indexOf(e);this.$myConfirm({content:"确认要删除吗"}).then((function(){var e=t.blanklist.splice(a,1);(e[0].uuid||e[0].staff_uuid)&&t.deleteblanklist.push({uuid:e[0].uuid,"~type~":"del"})}))},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){this.$v.editedItem.$touch(),this.$v.editedItem.$error||(this.editedIndex>-1?Object.assign(this.blanklist[this.editedIndex],this.editedItem):this.blanklist.push(this.editedItem),this.close())},telsave:function(){this.$v.editedtelItem.$touch(),this.$v.editedtelItem.$error||(this.editedtelIndex>-1?Object.assign(this.tellist[this.editedtelIndex],this.editedtelItem):this.tellist.push(this.editedtelItem),this.telclose())},telclose:function(){var e=this;this.dialog2=!1,this.$nextTick((function(){e.editedtelItem=Object.assign({},e.defaulteltItem),e.editedtelIndex=-1}))},editItemtel:function(e){this.$v.editedtelItem.$reset(),(e.uuid||e.staff_uuid||e.emergency_contact_given_name)&&(this.editedtelIndex=this.tellist.indexOf(e),this.editedtelItem=Object.assign({},e)),this.dialog2=!0},deleteItemtel:function(e){var t=this,a=this.tellist.indexOf(e);this.$myConfirm({content:"确认要删除吗"}).then((function(){var e=t.tellist.splice(a,1);(e[0].uuid||e[0].staff_uuid)&&t.deletetellist.push({uuid:e[0].uuid,"~type~":"del"})}))}},computed:{headers:function(){return[{text:this.$t("label_The_name_of_the_bank"),align:"start",sortable:!1,value:"bank_name"},{text:this.$t("label_Account_number"),align:"start",sortable:!1,value:"bank_account_number"},{text:this.$t("label_Register_name"),align:"start",sortable:!1,value:"bank_account_holder_name"},{text:this.$t("label_state"),align:"start",sortable:!1,value:"is_used"},{align:"start",sortable:!1,value:"actions"}]},items:function(){return[{tab:this.$t("label_Employee_information")},{tab:this.$t("label_Employee_personal_information")},{tab:this.$t("label_Employee_employment_information")},{tab:this.$t("label_Employee_bank_information")},{tab:this.$t("label_Employee_emergency_contact")}]}},watch:{},validations:{editedItem:{bank_name:{required:o["required"],nocharacter:function(e){return this.$myVerify.nocharacter(e)}},bank_account_number:{required:o["required"],numeric:o["numeric"]},bank_account_holder_name:{required:o["required"],nocharacter:function(e){return this.$myVerify.nocharacter(e)}},effective_start_date:{required:o["required"],beforeDate:function(e){if(!this.editedItem.effective_end_date)return!0;var t=new Date(e).valueOf(),a=new Date(this.editedItem.effective_end_date).valueOf();return t<a}},effective_end_date:{required:o["required"],afterDate:function(e){if(!this.editedItem.effective_start_date)return!0;var t=new Date(e).valueOf(),a=new Date(this.editedItem.effective_start_date).valueOf();return a<t}}},editedtelItem:{emergency_contact_relationship:{required:o["required"],nocharacter:function(e){return this.$myVerify.nocharacter(e)}},emergency_contact_given_name:{required:o["required"],nocharacter:function(e){return this.$myVerify.nocharacter(e)}},emergency_contact_family_name:{required:o["required"],nocharacter:function(e){return this.$myVerify.nocharacter(e)}},emergency_contact_christian_name:{required:o["required"],nocharacter:function(e){return this.$myVerify.nocharacter(e)}},emergency_contact_area_code:{required:o["required"]},emergency_contact_phone_number:{},emergency_contact_email:{email:o["email"]},emergency_contact_address_line_1:{},emergency_contact_address_line_2:{},emergency_contact_address_line_3:{}},jobslist:{first_employment_date:{jobsbeforeDate:function(e){if(!this.jobslist.first_employment_date&&!this.jobslist.probation_end_date)return!0;var t=new Date(e).valueOf(),a=new Date(this.jobslist.employment_date).valueOf(),s=new Date(this.jobslist.probation_end_date).valueOf();return t<a&&t<s&&a<s}},employment_date:{jobsCenterDate:function(e){if(!this.jobslist.first_employment_date&&!this.jobslist.probation_end_date)return!0;var t=new Date(this.jobslist.first_employment_date).valueOf(),a=new Date(e).valueOf(),s=new Date(this.jobslist.probation_end_date).valueOf();return t<a&&t<s&&a<s}},probation_end_date:{jobsafterDate:function(e){if(!this.jobslist.employment_date&&!this.jobslist.first_employment_date)return!0;var t=new Date(this.jobslist.first_employment_date).valueOf(),a=new Date(this.jobslist.employment_date).valueOf(),s=new Date(e).valueOf();return t<a&&t<s&&a<s}}}}},f=m,b=(a("a06a"),a("2877")),h=Object(b["a"])(f,s,n,!1,null,"0fab42ec",null);t["default"]=h.exports},"825e":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"pb-0"},[a("mrc_ess_switch",{attrs:{"true-value":1,"false-value":0,"true-text":e.$t("label_To_enable_the"),"false-text":e.$t("label_disable")},model:{value:e.stafflist.status,callback:function(t){e.$set(e.stafflist,"status",t)},expression:"stafflist.status"}}),3==e.stafflist.staff_status?a("v-btn",{attrs:{rounded:"",color:"#a5d2e8",dark:"","x-small":""}},[e._v(e._s(e.$t("label_Working")))]):e._e(),1==e.stafflist.staff_status?a("v-btn",{attrs:{rounded:"",color:"#ffe890",dark:"","x-small":""}},[e._v(e._s(e.$t("label_Probation_period")))]):e._e(),2==e.stafflist.staff_status?a("v-btn",{attrs:{rounded:"",color:"#ffe890",dark:"","x-small":""}},[e._v(e._s(e.$t("label_Get_ready_to_turn_right")))]):e._e(),6==e.stafflist.staff_status?a("v-btn",{attrs:{rounded:"",color:"#e5c2a2",dark:"","x-small":""}},[e._v(e._s(e.$t("label_Retired")))]):e._e(),5==e.stafflist.staff_status?a("v-btn",{attrs:{rounded:"",color:"#ffddb9 ",dark:"","x-small":""}},[e._v(e._s(e.$t("label_Prepare_to_leave")))]):e._e(),0==e.stafflist.staff_status?a("v-btn",{attrs:{rounded:"",color:"#ffcff2",dark:"","x-small":""}},[e._v(e._s(e.$t("label_Preparetojoin")))]):e._e(),7==e.stafflist.staff_status?a("v-btn",{attrs:{rounded:"",color:"#e3bec8",dark:"","x-small":""}},[e._v(e._s(e.$t("label_Retired_office")))]):e._e(),4==e.stafflist.staff_status?a("v-btn",{attrs:{rounded:"",color:"#dfdfdf",dark:"","x-small":""}},[e._v(e._s(e.$t("label_Stop")))]):e._e()],1),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_The_name")+"*",readonly:e.disabled,isNational:e.judegNational("preferred_name"),"error-messages":e.$errors("stafflist","preferred_name",e.requiredRule.concat(e.nocharacter))},model:{value:e.stafflist.preferred_name,callback:function(t){e.$set(e.stafflist,"preferred_name",t)},expression:"stafflist.preferred_name"}})],1),a("v-col",{attrs:{cols:"4"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_Surname")+"*",readonly:e.disabled,isNational:e.judegNational("family_name"),"error-messages":e.$errors("stafflist","family_name",e.requiredRule.concat(e.nocharacter))},model:{value:e.stafflist.family_name,callback:function(t){e.$set(e.stafflist,"family_name",t)},expression:"stafflist.family_name"}})],1),a("v-col",{attrs:{cols:"4"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_Nickname"),isNational:e.judegNational("family_name"),readonly:e.disabled,"error-messages":e.$errors("stafflist","family_name",e.nocharacter)},model:{value:e.stafflist.child_name,callback:function(t){e.$set(e.stafflist,"child_name",t)},expression:"stafflist.child_name"}})],1),a("v-col",{attrs:{cols:"8"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_Show_the_name")+"*",isNational:e.judegNational("show_name"),"error-messages":e.$errors("stafflist","show_name",e.requiredRule.concat(e.nocharacter)),readonly:e.disabled},model:{value:e.stafflist.show_name,callback:function(t){e.$set(e.stafflist,"show_name",t)},expression:"stafflist.show_name"}})],1),a("v-col",{attrs:{cols:"4"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_Employee_ID")+"*",isNational:e.judegNational("tricode"),"error-messages":e.$errors("stafflist","tricode",e.requiredRule.concat(e.nocharacter)),readonly:e.disabled},model:{value:e.stafflist.tricode,callback:function(t){e.$set(e.stafflist,"tricode",t)},expression:"stafflist.tricode"}})],1),a("v-col",{attrs:{cols:"12"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_Photo"),isNational:e.judegNational("staff_avatar"),readonly:e.disabled},model:{value:e.stafflist.staff_avatar,callback:function(t){e.$set(e.stafflist,"staff_avatar",t)},expression:"stafflist.staff_avatar"}})],1),a("v-col",{attrs:{cols:"12"}},[a("mrc_ess_multiText",{attrs:{label:e.$t("label_Mailbox")+"*",isNational:e.judegNational("staff_email"),"error-messages":e.$errors("stafflist","staff_email",e.requiredRule.concat(e.emailRule)),readonly:e.disabled},model:{value:e.stafflist.staff_email,callback:function(t){e.$set(e.stafflist,"staff_email",t)},expression:"stafflist.staff_email"}})],1),a("v-col",{attrs:{cols:"12"}},[a("mrc_ess_prompt",{attrs:{label:e.$t("label_department")+"*",errMsg:e.$errors("stafflist","dept_uuid",e.requiredRule),rules:!1,disabled:e.disabled,obj:e.companyName},model:{value:e.stafflist.dept_uuid,callback:function(t){e.$set(e.stafflist,"dept_uuid",t)},expression:"stafflist.dept_uuid"}})],1),a("v-col",{attrs:{cols:"6"}},[a("mrc_ess_prompt",{attrs:{label:e.$t("label_Position_Title")+"*",errMsg:e.$errors("stafflist","job_post_uuid",e.requiredRule),rules:!1,disabled:e.disabled,obj:e.job_post_uuid},model:{value:e.stafflist.job_post_uuid,callback:function(t){e.$set(e.stafflist,"job_post_uuid",t)},expression:"stafflist.job_post_uuid"}})],1),a("v-col",{attrs:{cols:"6"}},[a("mrc_ess_prompt",{attrs:{label:e.$t("label_Post_grades")+"*",errMsg:e.$errors("stafflist","job_post_grade_uuid",e.requiredRule),rules:!1,disabled:e.disabled,multiple:!0,obj:e.mrbase_sys_job_post_grades},model:{value:e.stafflist.job_post_grade_uuid,callback:function(t){e.$set(e.stafflist,"job_post_grade_uuid",t)},expression:"stafflist.job_post_grade_uuid"}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-checkbox",{staticClass:"mx-2",attrs:{"true-value":1,"false-value":0,color:"#ff8100",readonly:e.disabled,label:e.$t("label_The_person_in_charge_of_the_unit")},model:{value:e.stafflist.is_org_manager,callback:function(t){e.$set(e.stafflist,"is_org_manager",t)},expression:"stafflist.is_org_manager"}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-checkbox",{staticClass:"mx-2",attrs:{"true-value":1,"false-value":0,readonly:e.disabled,color:"#ff8100",label:e.$t("label_Department_head")},model:{value:e.stafflist.is_dept_manage,callback:function(t){e.$set(e.stafflist,"is_dept_manage",t)},expression:"stafflist.is_dept_manage"}})],1),a("v-col",{attrs:{cols:"12"}},[a("mrc_ess_prompt",{attrs:{label:e.$t("label_Boss"),rules:!1,disabled:e.disabled,obj:e.superior},model:{value:e.stafflist.direct_leader_code,callback:function(t){e.$set(e.stafflist,"direct_leader_code",t)},expression:"stafflist.direct_leader_code"}})],1),a("v-col",{attrs:{cols:"12"}},[a("mrc_ess_prompt",{attrs:{label:e.$t("label_role*"),multiple:"",errMsg:e.$errors("stafflist","role_uuids",e.requiredRule),rules:!1,disabled:e.disabled,obj:e.spica},model:{value:e.stafflist.role_uuids,callback:function(t){e.$set(e.stafflist,"role_uuids",t)},expression:"stafflist.role_uuids"}})],1)],1)],1),e.disabled?e._e():a("mrc_ess_submitBtn",{attrs:{loading:e.btnIsLoading},on:{cancel:e.cancel,success:e.success}})],1)},n=[],i=(a("c975"),a("277d"),a("a15b"),a("ac1f"),a("1276"),a("96cf"),a("1da1")),r=a("ade3"),l=a("b5ae"),c=a("b60a"),o={components:{},props:{disabled:{type:Boolean,default:!1}},data:function(){var e;return{btnIsLoading:!1,stafflist:(e={job_post_uuid:"",org_level_uuid:"",show_name:"",job_post_grade_uuid:"",given_name:"",child_name:"",christian_name:"",role_uuids:"",dept_uuid:"",family_name:"",preferred_name:"",staff_email:"",is_dept_manage:0,is_org_manager:0},Object(r["a"])(e,"is_dept_manage",0),Object(r["a"])(e,"direct_leader_code",""),Object(r["a"])(e,"staff_avatar","展示不同自己添加"),Object(r["a"])(e,"tricode",""),Object(r["a"])(e,"status",1),e),files:[]}},validations:{stafflist:{preferred_name:{required:l["required"],nocharacter:function(e){return this.$myVerify.nocharacter(e)}},family_name:{required:l["required"],nocharacter:function(e){return this.$myVerify.nocharacter(e)}},child_name:{nocharacter:function(e){return this.$myVerify.nocharacter(e)}},tricode:{required:l["required"],nocharacter:function(e){return this.$myVerify.nocharacter(e)}},show_name:{required:l["required"],nocharacter:function(e){return this.$myVerify.nocharacter(e)}},staff_email:{required:l["required"],email:l["email"]},dept_uuid:{required:l["required"]},job_post_uuid:{required:l["required"]},job_post_grade_uuid:{required:l["required"]},is_org_manager:{},is_dept_manage:{},direct_leader_code:{},role_uuids:{required:l["required"]}}},created:function(){},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.national("mrbase_sys_staffs");case 2:if(!this.$store.state.uuid){e.next=5;break}return e.next=5,this.getstaffdetail();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getstaffdetail:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$store.state.uuid,e.next=3,Object(c["getStaffMsgDetail"])({uuid:t});case 3:a=e.sent,200==a.code?(this.stafflist=a.data,this.stafflist.role_uuids=-1!=this.stafflist.role_uuids.indexOf(",")?this.stafflist.role_uuids.split(","):[this.stafflist.role_uuids],this.stafflist.job_post_grade_uuid=""===a.data.job_post_grade_uuid?[]:a.data.job_post_grade_uuid.split(",")):this.$store.commit("newsTips",a.msg);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){var e=this;this.$myConfirm({content:"确认取消编辑"}).then((function(t){e.$router.push({name:"staffmanagement"})}))["catch"]((function(e){}))},success:function(){var e=this;this.$v.stafflist.$touch(),this.$v.stafflist.$error||(this.btnIsLoading=!0,this.stafflist.org_level_uuid=this.company_uuid,this.stafflist.role_uuids=this.stafflist.role_uuids.join(),delete this.stafflist.created_by,delete this.stafflist.created_utc_datetime,delete this.stafflist.updated_by,delete this.stafflist.updated_utc_datetime,this.stafflist.is_dept_manage||(this.stafflist.is_dept_manage=0),this.stafflist.is_org_manager||(this.stafflist.is_org_manager=0),this.stafflist.is_dept_manage||(this.stafflist.is_dept_manage=0),Array.isArray(this.stafflist.job_post_grade_uuid)&&(this.stafflist.job_post_grade_uuid=this.stafflist.job_post_grade_uuid.join()),Object(c["getStaffMsgUpdate"])(this.stafflist).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("200"!==a.code){t.next=7;break}return e.$store.commit("newsTips",e.$t("message_The_operation_was_successful")),t.next=4,e.getstaffdetail();case 4:e.btnIsLoading=!1,t.next=9;break;case 7:e.$store.commit("newsTips",e.$t("message_The_modification_failed")),e.btnIsLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()))}},computed:{companyName:function(){return{prompt_name:"levelUuid_deptUuid",org_level_uuid:this.company_uuid}},company_uuid:function(){return this.$store.state.currentCompany},job_post_uuid:function(){return{prompt_name:"level-dept-post",dept_uuid:this.stafflist.dept_uuid}},superior:function(){return{prompt_name:"boss",org_level_uuid:this.company_uuid,staff_uuid:this.$store.state.uuid}},spica:function(){return{prompt_name:"level-role",org_level_uuid:this.company_uuid}},mrbase_sys_job_post_grades:function(){return{prompt_name:"mrbase_sys_job_post_grades",org_level_uuid:this.company_uuid}}},watch:{}},_=o,d=a("2877"),u=Object(d["a"])(_,s,n,!1,null,"caf2c0a4",null);t["default"]=u.exports},a06a:function(e,t,a){"use strict";var s=a("212e"),n=a.n(s);n.a}}]);
//# sourceMappingURL=chunk-41fb7968.94ff96a8.js.map