(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46affa8c","chunk-183700a1","chunk-f411bb52","chunk-2d225c26"],{7175:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("mrc_ess_table",{attrs:{headers:t.headers,hideAddBtn:"",paginationOptions:t.options,slotKey:["status"],isLoading:t.loading,items:t.desserts},on:{turnPage:t.getlist},scopedSlots:t._u([{key:"item.status",fn:function(e){var n=e.item;return[1==n.status?s("v-btn",{attrs:{rounded:"",color:"#13a671",dark:"","x-small":""}},[t._v("成功")]):t._e(),0==n.status?s("v-btn",{attrs:{rounded:"",color:"#999999",dark:"","x-small":""}},[t._v("失败")]):t._e()]}}])})],1)},a=[],r=(s("d81d"),s("96cf"),s("1da1")),i=s("e687"),o=s("c1df"),u=s.n(o),c={components:{},props:{disabled:{type:Boolean,default:!1}},data:function(){return{options:{pagesize:5,cpage:this.$store.state.cpage,totalCount:null,totalpage:null},loading:!1,menulist:[{name:this.$t("label_Edit")},{name:this.$t("label_Executed_immediately")},{name:this.$t("label_delete")}],headers:[{text:"日志 ID",align:"start",value:"logID",sortable:!1},{text:this.$t("label_The_name_of_the_task"),align:"start",value:"job_name",sortable:!1},{text:this.$t("label_grouping"),value:"job_group",sortable:!1},{text:this.$t("label_Call_target_string"),value:"invoke_target",sortable:!1},{text:"耗时",value:"job_message",sortable:!1},{text:"",value:"status",sortable:!1},{text:"执行时间",value:"created_utc_datetime",sortable:!1}],desserts:[]}},computed:{},created:function(){},watch:{$route:function(t){"/timedTask"==t.path&&this.getlist()}},mounted:function(){this.getlist()},beforeDestroy:function(){this.$store.commit("setCpage",1)},methods:{getlist:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,e&&(e.cpage,e.pagesize,this.options=e),t.next=4,Object(i["getLogList"])({uuid:this.$store.state.uuid,pindex:this.options.cpage,psize:this.options.pagesize});case 4:s=t.sent,200==s.code&&(this.desserts=s.data.map((function(t,e){return t.created_utc_datetime=u()(t.created_utc_datetime).format("YYYY/MM/DD","h:mm:ss"),t.logID=e+1,t})),this.options.totalCount=s.totalCount,this.options.totalpage=s.totalpage),this.loading=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},l=c,d=s("2877"),m=Object(d["a"])(l,n,a,!1,null,"7777620e",null);e["default"]=m.exports},a3d4:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",[s("v-card-title",[t.$store.state.uuid?s("mrc_ess_switch",{attrs:{"true-value":"0","false-value":"1",readonly:t.disabled,"true-text":"正常","false-text":"暂停"},model:{value:t.list.status,callback:function(e){t.$set(t.list,"status",e)},expression:"list.status"}}):t._e()],1),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"6"}},[s("mrc_ess_multiText",{attrs:{label:"任务名称*",isNational:t.judegNational("job_name"),readonly:t.disabled,"error-messages":t.$errors("list","job_name",t.requiredRule)},model:{value:t.list.job_name,callback:function(e){t.$set(t.list,"job_name",e)},expression:"list.job_name"}})],1),s("v-col",{attrs:{cols:"6"}},[s("mrc_ess_prompt",{attrs:{label:"分组*",disabled:t.disabled,rules:!1,chips:!1,errMsg:t.$errors("list","job_group",t.requiredRule),obj:"group_name"},model:{value:t.list.job_group,callback:function(e){t.$set(t.list,"job_group",e)},expression:"list.job_group"}})],1),s("v-col",{attrs:{cols:"12"}},[s("mrc_ess_multiText",{attrs:{label:"调用目标字符串*",isNational:t.judegNational("invoke_target"),"error-messages":t.$errors("list","invoke_target",t.requiredRule),readonly:t.disabled},model:{value:t.list.invoke_target,callback:function(e){t.$set(t.list,"invoke_target",e)},expression:"list.invoke_target"}}),s("div",{staticClass:"d-flex flex-column-reverse"},[s("span",{staticClass:"d-flex"},[s("span",[s("v-icon",{staticClass:"pr-2 material-icons #FAFAFA--text"},[t._v(" priority_high ")])],1),s("span",[t._v(" Bean调用示例 :ryTask.ryParama('ry') ")])]),s("span",[s("span",[s("v-icon",{staticClass:"pr-2 material-icons"},[t._v(" priority_high ")])],1),s("span",[t._v(" Class类调用示例:com.ruoyi.quarts.task.ryTask.ryParamas('ry') ")])]),s("span",[s("span",[s("v-icon",{staticClass:"pr-2 material-icons"},[t._v(" priority_high ")])],1),s("span",[t._v(" 参数说明:支持字符串、布尔类型、长整数类型、游点型、整型 ")])])])],1),s("v-col",{attrs:{cols:"12"}},[s("mrc_ess_multiText",{attrs:{readonly:t.disabled,isNational:t.judegNational("cron_expression"),"error-messages":t.$errors("list","cron_expression",t.requiredRule),label:"Cron 表达式*"},model:{value:t.list.cron_expression,callback:function(e){t.$set(t.list,"cron_expression",e)},expression:"list.cron_expression"}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-radio-group",{attrs:{row:""},model:{value:t.list.misfire_policy,callback:function(e){t.$set(t.list,"misfire_policy",e)},expression:"list.misfire_policy"}},[s("v-radio",{attrs:{label:"立即执行",value:"1"}}),s("v-radio",{attrs:{label:"执行一次",value:"2"}}),s("v-radio",{attrs:{label:"放弃执行",value:"3"}})],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-checkbox",{attrs:{"true-value":"1","false-value":"0",label:t.list.concurrent?"允许并发执行":"禁止并发执行"},model:{value:t.list.concurrent,callback:function(e){t.$set(t.list,"concurrent",e)},expression:"list.concurrent"}})],1),s("v-col",{attrs:{cols:"12"}},[s("mrc_ess_multiText",{attrs:{label:"备注",isNational:t.judegNational("remark"),readonly:t.disabled},model:{value:t.list.remark,callback:function(e){t.$set(t.list,"remark",e)},expression:"list.remark"}})],1)],1)],1),s("mrc_ess_submitBtn",{on:{cancel:t.cancel,success:t.success}})],1)},a=[],r=(s("96cf"),s("1da1")),i=s("b5ae"),o=s("e687"),u={components:{},props:{disabled:{type:Boolean,default:!1}},data:function(){return{items:[],list:{misfire_policy:"1",concurrent:"1"}}},validations:{list:{job_name:{required:i["required"]},job_group:{required:i["required"]},invoke_target:{required:i["required"]},cron_expression:{required:i["required"]}}},created:function(){},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.national("mrbase_sys_timed_task");case 2:this.$store.state.uuid&&(this.getDetail(),this.$route.meta.title=this.$store.getters.subPage_name);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getDetail:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["deatailTimedTask"])({uuid:this.$store.state.uuid});case 2:e=t.sent,200==e.code&&(this.list=e.data);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),verifyCron:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["verifyCron"])({cron_expression:this.list.cron_expression});case 2:if(e=t.sent,200!=e.code){t.next=5;break}return t.abrupt("return",!0);case 5:return this.$store.commit("newsTips","Cron"+this.$t("message_Expression_error")),t.abrupt("return",!1);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){var t=this;this.$myConfirm({content:"确认取消编辑嘛?"}).then((function(e){t.$router.push({name:"timedTask"})}))["catch"]((function(t){}))},success:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$v.list.$touch(),!this.$v.list.$error){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.verifyCron();case 5:if(e=t.sent,e){t.next=8;break}return t.abrupt("return");case 8:this.$store.state.uuid?Object(o["updateTimedTask"])(this.list).then((function(t){200==t.code?(s.$store.commit("newsTips",s.$t("message_The_operation_was_successful")),s.getDetail()):s.$store.commit("newsTips",s.$t("message_The_modification_failed")+t.msg)})):(this.list.status="1",Object(o["addTimedTask"])(this.list).then((function(t){200==t.code?(s.$store.commit("newsTips",s.$t("message_added_successfully")),s.$router.push({name:"timedTask"})):s.$store.commit("newsTips",t.msg)})));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},computed:{},watch:{}},c=u,l=s("2877"),d=Object(l["a"])(c,n,a,!1,null,"43c51673",null);e["default"]=d.exports},de46:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("mrc_ess_iconGroup",{attrs:{is_disabled:t.readonly,showReturn:!1},on:{handleEdit:t.handleEdit,handleDel:t.handleDel}}),s("v-tabs",{attrs:{grow:"","background-color":"#eeeef0",color:"primary",dark:""},on:{change:t.change},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.items,(function(e){return s("v-tab",{key:e.tab,staticStyle:{color:"black"}},[t._v(" "+t._s(e.tab)+" ")])})),1),s("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("v-tab-item",[s("timedTask",{attrs:{disabled:t.readonly}})],1),s("v-tab-item",[s("journal",{attrs:{disabled:t.readonly}})],1)],1)],1)},a=[],r=s("e687"),i=s("a3d4"),o=s("7175"),u={components:{timedTask:i["default"],journal:o["default"]},props:{},data:function(){return{readonly:!1,tab:null,items:[{tab:"定时任务设定"},{tab:"日志"}],list:{}}},computed:{},created:function(){},watch:{},mounted:function(){this.$route.meta.title=this.$store.getters.subPage_name,this.readonly=this.$store.state.iconstatus,this.tab=this.$store.state.tab},beforeDestroy:function(){this.$store.commit("setTab","")},methods:{change:function(){this.$store.commit("setTab",this.tab)},handleEdit:function(){this.readonly=!this.readonly,this.$store.commit("set_iconstatus",this.readonly)},handleDel:function(){var t=this;this.$myConfirm({content:this.$t("message_Confirm_the_deletion")}).then((function(e){Object(r["deleteTimedTask"])({uuid:t.$store.state.uuid}).then((function(e){"200"===e.code&&(t.$store.commit("newsTips",t.$t("message_The_deletion_was_successful")),t.$router.push({name:"timedTask"}))}))}))}}},c=u,l=s("2877"),d=Object(l["a"])(c,n,a,!1,null,"098cfe9a",null);e["default"]=d.exports},e687:function(t,e,s){"use strict";s.r(e),s.d(e,"verifyCron",(function(){return a})),s.d(e,"getTimedTaskList",(function(){return r})),s.d(e,"deatailTimedTask",(function(){return i})),s.d(e,"addTimedTask",(function(){return o})),s.d(e,"updateTimedTask",(function(){return u})),s.d(e,"deleteTimedTask",(function(){return c})),s.d(e,"updateTimedTaskStatus",(function(){return l})),s.d(e,"getLogList",(function(){return d})),s.d(e,"executeTimedTask",(function(){return m}));s("d3b7");var n=s("efc9"),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,s){n["default"].post("/api/job/checkCronExpressionIsValid/v1",t).then((function(t){e(t)}))["catch"]((function(t){s(t)}))}))},r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,s){n["default"].post("/api/job/getTableQuartzAll/v1",t).then((function(t){e(t)}))["catch"]((function(t){s(t)}))}))},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,s){n["default"].post("/api/job/getTableQuartzInfo/v1",t).then((function(t){e(t)}))["catch"]((function(t){s(t)}))}))},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,s){n["default"].post("/api/job/addTimedTask/v1",t).then((function(t){e(t)}))["catch"]((function(t){s(t)}))}))},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,s){n["default"].post("/api/job/updateJob/v1",t).then((function(t){e(t)}))["catch"]((function(t){s(t)}))}))},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,s){n["default"].post("/api/job/deleteQuartz/v1",t).then((function(t){e(t)}))["catch"]((function(t){s(t)}))}))},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,s){n["default"].post("/api/job/upStatusTask/v1",t).then((function(t){e(t)}))["catch"]((function(t){s(t)}))}))},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,s){n["default"].post("/api/job/getTableQuartzLogs/v1",t).then((function(t){e(t)}))["catch"]((function(t){s(t)}))}))},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,s){n["default"].post("/api/job/runTask/v1",t).then((function(t){e(t)}))["catch"]((function(t){s(t)}))}))}}}]);
//# sourceMappingURL=chunk-46affa8c.d76d1eb5.js.map