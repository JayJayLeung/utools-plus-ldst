(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d4a4f6d","chunk-2a87cd00"],{"794a":function(t,e,a){},"7efe":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("mrc_ess_skLoaders",{attrs:{skLoading:t.skLoading}},[a("div",{staticClass:"add_func_btn"},[t.$store.state.uuid?a("mrc_ess_iconGroup",{directives:[{name:"show",rawName:"v-show",value:!t.disabled,expression:"!disabled"}],staticStyle:{top:"-50px"},attrs:{showEdit:t.hasBtn("edit-button"),show_del:!1},on:{handleReturn:t.handleReturn,handleEdit:t.handleEdit}}):t._e(),a("v-card",[a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.header,items:t.desserts,"hide-default-footer":""},on:{"click:row":function(e){return t.changeItem(e,!0)}},scopedSlots:t._u([{key:"item.button_type",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.btnTypeToName(a.button_type))+" ")]}},{key:"item.status_uuid",fn:function(e){var s=e.item;return[a("div",{staticClass:"status",class:{is_used:0==s.status_uuid}},[t._v(t._s(1==s.status_uuid?t.$t("label_To_enable_the"):t.$t("label_disable")))])]}},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-icon",{on:{click:function(e){return e.stopPropagation(),t.changeItem(s,!1)}}},[t._v("mdi-pencil")]),t.hasBtn("edit-button")?a("v-icon",{on:{click:function(e){return e.stopPropagation(),t.delItem(s)}}},[t._v("mdi-delete")]):t._e(),a("v-icon",{directives:[{name:"show",rawName:"v-show",value:s.uuid,expression:"item.uuid"}],on:{click:function(e){return e.stopPropagation(),t.upItem(s)}}},[t._v("mdi-sort-descending")])]}}])})],1),a("v-card-actions",[a("v-dialog",{attrs:{width:t.dialogWidth,scrollable:"",persistent:!t.onlyShow},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.disabled,expression:"disabled"}],attrs:{text:"",color:"primary"},on:{click:t.open_btn_dialog}},"v-btn",i,!1),s),[a("span",[t._v(t._s(t.$t("label_Add_a_button")))]),a("v-icon",{staticClass:"add_btn"},[t._v("mdi-close")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("add-dialog",{attrs:{dialogWidth:t.dialogWidth,client_type:t.client_type,btnFunc:t.btnFunc,dialogTitle:t.dialogTitle,btnType:t.btnType,version_arr:t.version_arr,version:t.func_version,dialogDefaultData:t.dialogDefaultData,onlyShow:t.onlyShow,update_add:t.update_add},on:{getBtnDetail:t.getBtnDetail,cancel:t.dialogClose}})],1)],1),a("v-card-actions",[a("mrc_ess_submitBtn",{directives:[{name:"show",rawName:"v-show",value:t.disabled,expression:"disabled"}],attrs:{cancelText:t.cancelText,successText:t.successText,loading:t.submitLoading},on:{cancel:t.cancel,success:t.success}})],1)],1)],1)])},i=[],n=(a("99af"),a("a623"),a("4160"),a("c975"),a("a434"),a("ac1f"),a("1276"),a("159b"),a("96cf"),a("1da1")),l=a("aeef"),o=a("9858"),r=a("6924"),u={components:{addDialog:l["default"]},props:{client_type:{type:Array},version:{type:String},version_uuid:{type:String},list:{type:Array,default:function(){return[]}}},data:function(){return{dialogTitle:"",submitLoading:!1,delDesserts:[],skLoading:!0,cancelText:this.$t("label_The_previous_step"),successText:this.$t("label_submit"),dialogWidth:"600px",desserts:[],dialog:!1,btnFunc:[],btnType:[],version_arr:[],dialogDefaultData:{},editedIndex:-1,onlyShow:!1,update_add:!1,disabled:!1,func_version:"",showActions:!1}},created:function(){},mounted:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.skLoading=!0,t.prev=1,this.func_version=this.version,t.next=5,Object(o["getDataByName"])("buttonType");case 5:return e=t.sent,200==e.code?this.btnType=e.data:this.btnType=[],t.next=9,Object(o["getDataByName"])("buttonUse");case 9:a=t.sent,200==a.code?this.btnFunc=a.data:this.btnFunc=[],this.desserts=this.$clone(this.list),this.$store.state.uuid?this.cancelText="取消":(this.showActions=!0,this.disabled=!this.disabled),this.skLoading=!1,t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](1),this.skLoading=!1;case 19:case"end":return t.stop()}}),t,this,[[1,16]])})));function e(){return t.apply(this,arguments)}return e}(),methods:{handleReturn:function(){this.$router.go(-1)},handleEdit:function(){this.disabled=!this.disabled,this.showActions=!0},open_btn_dialog:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.dialog=!0,this.dialogTitle="添加按钮",this.onlyShow=!1,!this.$store.state.uuid){t.next=9;break}return t.next=6,Object(r["get_versions"])({version:this.version,module_uuid:this.version_uuid});case 6:e=t.sent,this.version_arr=e.data.version.split(","),this.update_add=!0;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getBtnDetail:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.editedIndex>-1?Object.assign(this.desserts[this.editedIndex],e):this.desserts.push(e),this.dialogClose();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),dialogClose:function(){this.dialog=!1,this.editedIndex=-1,this.dialog=!1,this.update_add=!1},cancel:function(){this.$store.state.uuid?(this.disabled=!this.disabled,this.showActions=!1):this.$emit("cancel")},success:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.desserts.every((function(t){return""!=t.client_type_uuid})),e){t.next=4;break}return this.$store.commit("newsTips",this.$t("message_Function_client")),t.abrupt("return");case 4:if(this.$store.state.uuid){t.next=8;break}this.$emit("success",this.desserts),t.next=17;break;case 8:return a=this.$clone(this.desserts),a=a.concat(this.delDesserts),a.forEach((function(t){t.button_id&&delete t.button_id})),this.submitLoading=!0,t.next=14,Object(r["update_buttons"])({uuid:this.$store.state.uuid,function_name:this.$route.meta.title,mrbase_sys_function_buttons:a});case 14:s=t.sent,200==s.code&&(this.$store.commit("newsTips",this.$t("message_The_submission_was_successful")),this.header.pop(),this.disabled=!this.disabled,this.$router.go(-1)),this.submitLoading=!1;case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeItem:function(t,e){this.onlyShow=e,t.uuid||(this.update_add=!0),this.editedIndex=this.desserts.indexOf(t),this.dialogDefaultData=this.$clone(t),this.dialogTitle=this.dialogDefaultData.button_name,this.dialog=!0},delItem:function(t){var e=this.desserts.indexOf(t);t.uuid&&(t["~type~"]="del",this.delDesserts.push(t)),this.desserts.splice(e,1)},upItem:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=this.desserts.indexOf(e),t.next=3,Object(r["up_versions"])({uuid:e.uuid});case 3:s=t.sent,200==s.code&&(this.$store.commit("newsTips",this.$t("message_update_successed")),e.version=s.data.version,this.$set(this.desserts,a,e),this.func_version=s.data.version);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},computed:{btnTypeToName:function(t){var e=this;return function(t){var a="";return e.btnType.forEach((function(e){e.dict_value==t&&(a=e.dict_label)})),a}},header:function(){var t=[{text:this.$t("label_type"),align:"start",sortable:!1,value:"button_type"},{text:this.$t("label_The_name_of_the_button"),align:"start",sortable:!1,value:"button_name"},{text:this.$t("label_Client_type"),align:"start",sortable:!1,value:"client_type_uuid"},{text:this.$t("label_The_title"),align:"start",sortable:!1,value:"button_title"},{text:this.$t("label_URL"),align:"start",sortable:!1,value:"url"},{text:this.$t("label_state"),align:"start",sortable:!1,value:"status_uuid"}];return this.showActions&&t.push({text:" ",align:"start",sortable:!1,value:"actions",width:"120px"}),t}},watch:{version:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$store.state.uuid){t.next=7;break}return t.next=3,Object(r["get_versions"])({version:e,module_uuid:this.version_uuid});case 3:a=t.sent,this.version_arr=a.data.version.split(","),t.next=9;break;case 7:this.func_version=e,this.desserts.length>0&&this.desserts.forEach((function(t){t.version=e}));case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),list:{handler:function(t){this.desserts=t},deep:!0},client_type:{handler:function(t,e){this.desserts.forEach((function(e){t.forEach((function(t){t.value_field.indexOf(e.client_type_uuid)<=-1&&(e.client_type_uuid="")}))}))},deep:!0}}},c=u,d=(a("d5ec"),a("2877")),_=Object(d["a"])(c,s,i,!1,null,"c0ec610a",null);e["default"]=_.exports},9705:function(t,e,a){"use strict";var s=a("ec89"),i=a.n(s);i.a},aeef:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{ref:"btnForm"},[a("v-card",{staticClass:"dialog_card"},[a("v-card-title",{staticClass:"card_title",style:{width:t.dialogWidth}},[a("div",[t._v(t._s(t.dialogTitle))]),a("div",{staticClass:"close_dialog",on:{click:t.cancel}},[t._v("X")])]),a("v-card-text",{staticClass:"dialog_content"},[a("v-row",{attrs:{dense:""}},[a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"2"}},[a("v-switch",{attrs:{label:t.detailData.status_uuid?t.$t("label_To_enable_the"):t.$t("label_disable"),color:"primary",readonly:t.onlyShow,"true-value":"1","false-value":"0"},model:{value:t.detailData.status_uuid,callback:function(e){t.$set(t.detailData,"status_uuid",e)},expression:"detailData.status_uuid"}})],1)],1),a("v-row",{attrs:{dense:""}},[a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{items:t.btnType,readonly:t.onlyShow,label:t.$t("label_type")+"*","item-text":"dict_label","item-value":"dict_value",required:"",chips:"",rules:[function(t){return!!t||"类型"}]},model:{value:t.detailData.button_type,callback:function(e){t.$set(t.detailData,"button_type",e)},expression:"detailData.button_type"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{items:t.btnFunc,readonly:t.onlyShow,label:t.$t("label_function")+"*","item-text":"dict_label","item-value":"dict_value",required:"",chips:"",rules:[function(e){return!!e||t.$t("label_function")}]},model:{value:t.detailData.button_category_uuid,callback:function(e){t.$set(t.detailData,"button_category_uuid",e)},expression:"detailData.button_category_uuid"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"12"}},[a("mrc_ess_multiText",{staticStyle:{width:"100%"},attrs:{required:"",label:t.$t("label_The_name_of_the_button")+"*",readonly:t.onlyShow,isNational:t.judegNational("button_name"),"append-icon":"mdi-longitude",rules:t.$text_rules(t.$t("label_The_name_of_the_button"))},model:{value:t.detailData.button_name,callback:function(e){t.$set(t.detailData,"button_name",e)},expression:"detailData.button_name"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"12"}},[a("mrc_ess_multiText",{staticStyle:{width:"100%"},attrs:{required:"",label:t.$t("label_The_title")+"*",isNational:t.judegNational("button_title"),readonly:t.onlyShow,rules:t.$text_rules(t.$t("label_The_title"))},model:{value:t.detailData.button_title,callback:function(e){t.$set(t.detailData,"button_title",e)},expression:"detailData.button_title"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"12"}},[a("mrc_ess_multiText",{staticStyle:{width:"100%"},attrs:{required:"",label:t.$t("label_Button_description")+"*",isNational:t.judegNational("button_description"),readonly:t.onlyShow,rules:t.$text_rules(t.$t("label_Button_description"))},model:{value:t.detailData.button_description,callback:function(e){t.$set(t.detailData,"button_description",e)},expression:"detailData.button_description"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"4"}},[a("v-checkbox",{attrs:{color:"primary",readonly:t.onlyShow,label:t.$t("label_Function_entry")+"*","true-value":1,"false-value":0},model:{value:t.detailData.is_main,callback:function(e){t.$set(t.detailData,"is_main",e)},expression:"detailData.is_main"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"4"}},[a("v-checkbox",{attrs:{color:"primary",readonly:t.onlyShow,label:t.$t("label_send_email")+"*","true-value":1,"false-value":0},model:{value:t.detailData.is_send_email,callback:function(e){t.$set(t.detailData,"is_send_email",e)},expression:"detailData.is_send_email"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:t.$t("label_URL"),readonly:t.onlyShow},model:{value:t.detailData.url,callback:function(e){t.$set(t.detailData,"url",e)},expression:"detailData.url"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{readonly:t.onlyShow,label:t.$t("label_components"),required:""},model:{value:t.detailData.button_component,callback:function(e){t.$set(t.detailData,"button_component",e)},expression:"detailData.button_component"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{items:t.client_type,label:t.$t("label_Client_type")+"*",readonly:t.onlyShow,"item-value":"value_field","item-text":"view_fields",required:"",multiple:"",chips:"",rules:[function(e){return e.length>0||t.$t("label_Client_type")}]},model:{value:t.detailData.client_type_uuid,callback:function(e){t.$set(t.detailData,"client_type_uuid",e)},expression:"detailData.client_type_uuid"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[t.update_add&&!t.detailData.uuid?a("v-select",{attrs:{items:t.version_arr,label:t.$t("label_version")+"*",readonly:t.onlyShow,rules:[function(e){return!!e||t.$t("label_version")}],chips:""},model:{value:t.detailData.version,callback:function(e){t.$set(t.detailData,"version",e)},expression:"detailData.version"}}):t._e(),t.detailData.uuid?a("v-text-field",{attrs:{label:t.$t("label_version")+"*",readonly:""},model:{value:t.detailData.version,callback:function(e){t.$set(t.detailData,"version",e)},expression:"detailData.version"}}):t._e(),t.detailData.uuid||t.update_add?t._e():a("v-text-field",{attrs:{label:t.$t("label_version")+"*",readonly:""},model:{value:t.version,callback:function(e){t.version=e},expression:"version"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:t.$t("label_Button_icon")+"*",readonly:t.onlyShow},model:{value:t.detailData.button_icon,callback:function(e){t.$set(t.detailData,"button_icon",e)},expression:"detailData.button_icon"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:t.$t("label_The_sorting")+"*",readonly:t.onlyShow,rules:t.$text_rules(t.$t("label_The_sorting"),[function(t){return/^[1-9]*$/.test(t)||"请输入数字"}])},on:{blur:t.verifyNum},model:{value:t.detailData.sequence,callback:function(e){t.$set(t.detailData,"sequence",e)},expression:"detailData.sequence"}})],1)],1)],1),t.onlyShow?t._e():a("mrc_ess_submitBtn",{attrs:{successText:t.$t("label_save")},on:{cancel:t.cancel,success:t.success}})],1)],1)},i=[],n=(a("a15b"),a("a9e3"),a("b64b"),a("ac1f"),a("1276"),a("96cf"),a("1da1")),l=(a("9858"),a("6924"),{components:{},props:{dialogTitle:{type:String},dialogWidth:{type:String},client_type:{type:Array},btnFunc:{type:Array},btnType:{type:Array},version_arr:{type:Array},version:{type:String},dialogDefaultData:{type:Object},onlyShow:{type:Boolean},update_add:{type:Boolean}},data:function(){return{detailData:{button_category_uuid:"",client_type_uuid:[],button_type:"",button_name:"",button_description:"",is_main:0,status_uuid:0,button_title:"",url:"",button_icon:"",sequence:1,is_send_email:0,button_component:"",version:""},checkbox:!0,checkbox1:!0,uuid:""}},created:function(){},mounted:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.national("mrbase_sys_function_buttons");case 2:this.dataShow(this.dialogDefaultData);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{dataShow:function(t){if(Object.keys(t).length){var e=this.$clone(t);t.button_type=String(t.button_type),e.client_type_uuid&&(e.client_type_uuid=e.client_type_uuid.split(",")),this.detailData=e}},cancel:function(){this.reset(),this.$emit("cancel")},reset:function(){this.detailData={button_category_uuid:"",client_type_uuid:[],button_type:"",button_name:"",button_description:"",is_main:0,status_uuid:0,button_title:"",url:"",button_icon:"",sequence:1,is_send_email:0,button_component:"",version:""}},success:function(){var t=this.$refs.btnForm.validate();if(t){this.version_arr.length<=0&&(this.detailData.version=this.version);var e=this.$clone(this.detailData);e.client_type_uuid=e.client_type_uuid.join(),this.$emit("getBtnDetail",e),this.reset()}},verifyNum:function(t){/^[1-9]*$/.test(Number(t.target.value))||(this.detailData.sequence=1,t.target.value=1)}},computed:{},watch:{dialogDefaultData:{handler:function(t){this.dataShow(t)},deep:!0}}}),o=l,r=(a("9705"),a("2877")),u=Object(r["a"])(o,s,i,!1,null,"63601f38",null);e["default"]=u.exports},d5ec:function(t,e,a){"use strict";var s=a("794a"),i=a.n(s);i.a},ec89:function(t,e,a){}}]);
//# sourceMappingURL=chunk-4d4a4f6d.5e18a75a.js.map