{"version":3,"sources":["webpack:///./src/views/module_func_manage/add_func/func.vue?c234","webpack:///src/views/module_func_manage/add_func/func.vue","webpack:///./src/views/module_func_manage/add_func/func.vue?f1f4","webpack:///./src/views/module_func_manage/add_func/func.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","skLoading","$store","state","directives","name","rawName","value","expression","staticStyle","hasBtn","on","handleReturn","handleEdit","handleDel","_e","staticClass","detailData","status_uuid","$t","disabled","model","callback","$$v","$set","ref","judegNational","$text_rules","top_module","Boolean","uuid","v","moduleChange","version_arr","data_table","client_type","length","func_type","unit_data","successText","cancel","success","staticRenderFns","components","props","func_data","type","Object","func_disabled","data","function_name","function_shortcode","function_description","table_uuid","function_type_uuid","module_uuid","org_level_uuid","client_type_uuid","version","version_uuid","tempData","created","methods","$router","go","$myConfirm","isSubmit","obj","join","created_utc_datetime","updated_utc_datetime","$emit","forEach","item","value_field","items","push","computed","watch","handler","$nextTick","deep","component"],"mappings":"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","file":"js/chunk-77224258.41ea253e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('mrc_ess_skLoaders',{attrs:{\"skLoading\":_vm.skLoading}},[_c('v-card',[_c('v-card-subtitle',[(_vm.$store.state.uuid)?_c('mrc_ess_iconGroup',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.disabled),expression:\"disabled\"}],staticStyle:{\"top\":\"-50px\"},attrs:{\"showEdit\":_vm.hasBtn('edit-function'),\"show_del\":_vm.hasBtn('delete-function')},on:{\"handleReturn\":_vm.handleReturn,\"handleEdit\":_vm.handleEdit,\"handleDel\":_vm.handleDel}}):_vm._e()],1),_c('v-card-text',[_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{staticClass:\"d-flex\",attrs:{\"cols\":\"12\",\"sm\":\"2\"}},[_c('v-switch',{attrs:{\"label\":_vm.detailData.status_uuid?_vm.$t('label_To_enable_the'): _vm.$t('label_disable'),\"color\":\"primary\",\"readonly\":_vm.disabled},model:{value:(_vm.detailData.status_uuid),callback:function ($$v) {_vm.$set(_vm.detailData, \"status_uuid\", $$v)},expression:\"detailData.status_uuid\"}})],1)],1),_c('v-form',{ref:\"add_func\"},[_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('mrc_ess_multiText',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":_vm.$t('label_The_name_of_the_function') + '*',\"required\":\"\",\"isNational\":_vm.judegNational('function_name'),\"append-icon\":\"mdi-longitude\",\"readonly\":_vm.disabled,\"rules\":_vm.$text_rules(_vm.$t('label_The_name_of_the_function'))},model:{value:(_vm.detailData.function_name),callback:function ($$v) {_vm.$set(_vm.detailData, \"function_name\", $$v)},expression:\"detailData.function_name\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('mrc_ess_multiText',{staticStyle:{\"width\":\"100%\"},attrs:{\"readonly\":_vm.disabled,\"required\":\"\",\"label\":_vm.$t('label_Function_short_code') + '*',\"isNational\":_vm.judegNational('function_shortcode'),\"append-icon\":\"mdi-longitude\",\"rules\":_vm.$text_rules(_vm.$t('label_Function_short_code'))},model:{value:(_vm.detailData.function_shortcode),callback:function ($$v) {_vm.$set(_vm.detailData, \"function_shortcode\", $$v)},expression:\"detailData.function_shortcode\"}})],1),_c('v-col',{staticClass:\"d-flex\",attrs:{\"cols\":\"12\",\"sm\":\"12\"}},[_c('mrc_ess_multiText',{staticStyle:{\"width\":\"100%\"},attrs:{\"readonly\":_vm.disabled,\"required\":\"\",\"label\":_vm.$t('label_Functional_description') + '*',\"isNational\":_vm.judegNational('function_description'),\"rules\":_vm.$text_rules(_vm.$t('label_Functional_description'))},model:{value:(_vm.detailData.function_description),callback:function ($$v) {_vm.$set(_vm.detailData, \"function_description\", $$v)},expression:\"detailData.function_description\"}})],1),_c('v-col',{staticClass:\"d-flex\",attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-select',{attrs:{\"items\":_vm.top_module,\"label\":_vm.$t('label_The_superior_module') + '*',\"isNational\":_vm.judegNational('module_uuid'),\"item-text\":\"view_fields\",\"item-value\":\"value_field\",\"readonly\":Boolean(_vm.$store.state.uuid),\"required\":\"\",\"chips\":\"\",\"rules\":[function (v) { return !!v || _vm.$t('label_The_superior_module'); }]},on:{\"change\":_vm.moduleChange},model:{value:(_vm.detailData.module_uuid),callback:function ($$v) {_vm.$set(_vm.detailData, \"module_uuid\", $$v)},expression:\"detailData.module_uuid\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[(!_vm.$store.state.uuid)?_c('v-select',{attrs:{\"items\":_vm.version_arr,\"label\":_vm.$t('label_version') + '*',\"required\":\"\",\"rules\":[function (v){ return !!v || _vm.$t('label_version'); }],\"readonly\":Boolean(_vm.$store.state.uuid),\"chips\":\"\"},model:{value:(_vm.detailData.version),callback:function ($$v) {_vm.$set(_vm.detailData, \"version\", $$v)},expression:\"detailData.version\"}}):_c('v-text-field',{attrs:{\"disabled\":\"\",\"label\":_vm.$t('label_version') + '*',\"rules\":_vm.$text_rules(_vm.$t('label_version'))},model:{value:(_vm.detailData.version),callback:function ($$v) {_vm.$set(_vm.detailData, \"version\", $$v)},expression:\"detailData.version\"}})],1),_c('v-col',{staticClass:\"d-flex\",attrs:{\"cols\":\"12\",\"sm\":\"12\"}},[_c('v-select',{attrs:{\"readonly\":_vm.disabled,\"items\":_vm.data_table,\"label\":_vm.$t('label_Associated_data_table') + '*',\"item-text\":\"view_fields\",\"item-value\":\"value_field\",\"required\":\"\",\"chips\":\"\",\"rules\":[function (v) { return !!v || _vm.$t('label_Associated_data_table'); }]},model:{value:(_vm.detailData.table_uuid),callback:function ($$v) {_vm.$set(_vm.detailData, \"table_uuid\", $$v)},expression:\"detailData.table_uuid\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-select',{attrs:{\"readonly\":_vm.disabled,\"label\":_vm.$t('label_Client_type') + '*',\"items\":_vm.client_type,\"item-value\":\"value_field\",\"item-text\":\"view_fields\",\"required\":\"\",\"no-data-text\":\"请先选择上级模块\",\"chips\":\"\",\"multiple\":\"\",\"rules\":[function (v) { return v.length>0 || _vm.$t('label.client_type'); }]},model:{value:(_vm.detailData.client_type_uuid),callback:function ($$v) {_vm.$set(_vm.detailData, \"client_type_uuid\", $$v)},expression:\"detailData.client_type_uuid\"}})],1),_c('v-col',{staticClass:\"d-flex\",attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-select',{attrs:{\"readonly\":_vm.disabled,\"items\":_vm.func_type,\"label\":_vm.$t('label_Function_type') + '*',\"item-text\":\"dict_label\",\"item-value\":\"dict_value\",\"required\":\"\",\"chips\":\"\",\"rules\":[function (v) { return !!v || _vm.$t('label_Function_type'); }]},model:{value:(_vm.detailData.function_type_uuid),callback:function ($$v) {_vm.$set(_vm.detailData, \"function_type_uuid\", $$v)},expression:\"detailData.function_type_uuid\"}})],1),_c('v-col',{staticClass:\"d-flex\",attrs:{\"cols\":\"12\",\"sm\":\"12\"}},[_c('v-select',{attrs:{\"readonly\":_vm.disabled,\"items\":_vm.unit_data,\"label\":_vm.$t('label_Only_for_the_following_units'),\"item-value\":\"value_field\",\"item-text\":\"view_fields\",\"multiple\":\"\",\"chips\":\"\"},model:{value:(_vm.detailData.org_level_uuid),callback:function ($$v) {_vm.$set(_vm.detailData, \"org_level_uuid\", $$v)},expression:\"detailData.org_level_uuid\"}})],1)],1)],1)],1),(!_vm.disabled)?_c('mrc_ess_submitBtn',{attrs:{\"cancelText\":_vm.$t('label_cancel'),\"successText\":_vm.successText},on:{\"cancel\":_vm.cancel,\"success\":_vm.success}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <mrc_ess_skLoaders :skLoading='skLoading'>\r\n    <v-card>\r\n      <v-card-subtitle>\r\n        <mrc_ess_iconGroup style=\"top: -50px\"\r\n                           v-show=\"disabled\"\r\n                           v-if=\"$store.state.uuid\"\r\n                           @handleReturn='handleReturn'\r\n                           :showEdit=\"hasBtn('edit-function')\"\r\n                           :show_del=\"hasBtn('delete-function')\"\r\n                           @handleEdit='handleEdit'\r\n                           @handleDel='handleDel'></mrc_ess_iconGroup>\r\n      </v-card-subtitle>\r\n      <v-card-text>\r\n        <v-row dense>\r\n          <v-col class=\"d-flex\"\r\n                 cols=\"12\"\r\n                 sm=\"2\">\r\n            <v-switch v-model=\"detailData.status_uuid\"\r\n                      :label=\"detailData.status_uuid?$t('label_To_enable_the'): $t('label_disable')\"\r\n                      color=\"primary\"\r\n                      :readonly=\"disabled\"></v-switch>\r\n          </v-col>\r\n        </v-row>\r\n\r\n        <v-form ref=\"add_func\">\r\n          <v-row dense>\r\n            <!-- <v-col cols=\"12\"\r\n                   sm=\"6\"\r\n                   class=\"d-flex\">\r\n              <v-text-field :label=\"$t('label_The_name_of_the_function') + '*'\"\r\n                            required\r\n                            v-model=\"detailData.function_name\"\r\n                            append-icon=\"mdi-longitude\"\r\n                            :readonly=\"disabled\"\r\n                            :rules=\"$text_rules('功能名称')\">\r\n              </v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\"\r\n                   sm=\"6\"\r\n                   class=\"d-flex\">\r\n              <v-text-field :readonly=\"disabled\"\r\n                            required\r\n                            :label=\"$t('label_Function_short_code') + '*'\"\r\n                            v-model=\"detailData.function_shortcode\"\r\n                            append-icon=\"mdi-longitude\"\r\n                            :rules=\"$text_rules('功能短编码')\">\r\n              </v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\"\r\n                   sm=\"12\"\r\n                   class=\"d-flex\">\r\n              <v-text-field :readonly=\"disabled\"\r\n                            required\r\n                            :label=\"$t('label_Functional_description') + '*'\"\r\n                            v-model=\"detailData.function_description\"\r\n                            append-icon=\"mdi-longitude\"\r\n                            :rules=\"$text_rules('功能描述')\">\r\n              </v-text-field>\r\n            </v-col> -->\r\n            <v-col cols=\"6\">\r\n              <mrc_ess_multiText :label=\"$t('label_The_name_of_the_function') + '*'\"\r\n                                 style=\"width: 100%\"\r\n                                 required\r\n                                 :isNational=\"judegNational('function_name')\"\r\n                                 v-model=\"detailData.function_name\"\r\n                                 append-icon=\"mdi-longitude\"\r\n                                 :readonly=\"disabled\"\r\n                                 :rules=\"$text_rules($t('label_The_name_of_the_function'))\">\r\n              </mrc_ess_multiText>\r\n            </v-col>\r\n            <v-col cols=\"12\"\r\n                   sm=\"6\">\r\n              <mrc_ess_multiText :readonly=\"disabled\"\r\n                                 style=\"width: 100%\"\r\n                                 required\r\n                                 :label=\"$t('label_Function_short_code') + '*'\"\r\n                                 :isNational=\"judegNational('function_shortcode')\"\r\n                                 v-model=\"detailData.function_shortcode\"\r\n                                 append-icon=\"mdi-longitude\"\r\n                                 :rules=\"$text_rules($t('label_Function_short_code'))\">\r\n              </mrc_ess_multiText>\r\n            </v-col>\r\n            <v-col cols=\"12\"\r\n                   sm=\"12\"\r\n                   class=\"d-flex\">\r\n              <mrc_ess_multiText :readonly=\"disabled\"\r\n                                 style=\"width: 100%\"\r\n                                 required\r\n                                 :label=\"$t('label_Functional_description') + '*'\"\r\n                                 :isNational=\"judegNational('function_description')\"\r\n                                 v-model=\"detailData.function_description\"\r\n                                 :rules=\"$text_rules($t('label_Functional_description'))\">\r\n              </mrc_ess_multiText>\r\n            </v-col>\r\n            <v-col cols=\"12\"\r\n                   sm=\"6\"\r\n                   class=\"d-flex\">\r\n\r\n              <v-select :items=\"top_module\"\r\n                        :label=\"$t('label_The_superior_module') + '*'\"\r\n                        :isNational=\"judegNational('module_uuid')\"\r\n                        v-model=\"detailData.module_uuid\"\r\n                        item-text='view_fields'\r\n                        item-value='value_field'\r\n                        @change=\"moduleChange\"\r\n                        :readonly=\"Boolean($store.state.uuid)\"\r\n                        required\r\n                        chips\r\n                        :rules=\"[v => !!v || $t('label_The_superior_module')]\"></v-select>\r\n            </v-col>\r\n            <v-col cols=\"12\"\r\n                   sm=\"6\">\r\n              <v-select :items=\"version_arr\"\r\n                        :label=\"$t('label_version') + '*'\"\r\n                        required\r\n                        v-if=\"!$store.state.uuid\"\r\n                        :rules=\"[v=>!!v || $t('label_version')]\"\r\n                        :readonly=\"Boolean($store.state.uuid)\"\r\n                        v-model=\"detailData.version\"\r\n                        chips></v-select>\r\n              <v-text-field v-else\r\n                            disabled\r\n                            :label=\"$t('label_version') + '*'\"\r\n                            v-model=\"detailData.version\"\r\n                            :rules=\"$text_rules($t('label_version'))\">\r\n              </v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\"\r\n                   sm=\"12\"\r\n                   class=\"d-flex\">\r\n              <v-select :readonly=\"disabled\"\r\n                        :items=\"data_table\"\r\n                        :label=\"$t('label_Associated_data_table') + '*'\"\r\n                        v-model=\"detailData.table_uuid\"\r\n                        item-text='view_fields'\r\n                        item-value='value_field'\r\n                        required\r\n                        chips\r\n                        :rules=\"[v => !!v || $t('label_Associated_data_table')]\"></v-select>\r\n            </v-col>\r\n            <v-col cols=\"12\"\r\n                   sm=\"6\">\r\n              <v-select :readonly=\"disabled\"\r\n                        :label=\"$t('label_Client_type') + '*'\"\r\n                        v-model=\"detailData.client_type_uuid\"\r\n                        :items=\"client_type\"\r\n                        item-value=\"value_field\"\r\n                        item-text=\"view_fields\"\r\n                        required\r\n                        no-data-text=\"请先选择上级模块\"\r\n                        chips\r\n                        multiple\r\n                        :rules=\"[v => v.length>0 || $t('label.client_type')]\"></v-select>\r\n            </v-col>\r\n            <v-col cols=\"12\"\r\n                   sm=\"6\"\r\n                   class=\"d-flex\">\r\n              <v-select :readonly=\"disabled\"\r\n                        :items=\"func_type\"\r\n                        :label=\"$t('label_Function_type') + '*'\"\r\n                        v-model=\"detailData.function_type_uuid\"\r\n                        item-text='dict_label'\r\n                        item-value='dict_value'\r\n                        required\r\n                        chips\r\n                        :rules=\"[v => !!v || $t('label_Function_type')]\"></v-select>\r\n            </v-col>\r\n\r\n            <v-col cols=\"12\"\r\n                   sm=\"12\"\r\n                   class=\"d-flex\">\r\n              <v-select :readonly=\"disabled\"\r\n                        :items=\"unit_data\"\r\n                        :label=\"$t('label_Only_for_the_following_units')\"\r\n                        v-model=\"detailData.org_level_uuid\"\r\n                        item-value='value_field'\r\n                        item-text='view_fields'\r\n                        multiple\r\n                        chips></v-select>\r\n              <!-- :rules=\"[v => v.length > 0 || '特别只放开给以下单位']\" -->\r\n            </v-col>\r\n          </v-row>\r\n        </v-form>\r\n      </v-card-text>\r\n      <mrc_ess_submitBtn v-if=\"!disabled\"\r\n                         :cancelText=\"$t('label_cancel')\"\r\n                         :successText='successText'\r\n                         @cancel='cancel'\r\n                         @success='success'></mrc_ess_submitBtn>\r\n    </v-card>\r\n  </mrc_ess_skLoaders>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { getBusinessList, get_func_add, get_versions, get_func_del } from '@/service/api/func_module'\r\nimport { getBusinessList as getprompt } from '@/service/api/prompt'\r\nimport { getDataByName } from '@/service/api/data_dictionary'\r\n// import iconGroup from '@/components/iconGroup'\r\nexport default {\r\n  components: {},\r\n  props: {\r\n    func_data: {\r\n      type: Object\r\n    },\r\n    func_disabled: {\r\n      type: Boolean\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      skLoading: true,\r\n      successText: this.$t('label_The_next_step'),\r\n      detailData: {\r\n        function_name: '',\r\n        function_shortcode: '',\r\n        function_description: '',\r\n        table_uuid: '',\r\n        function_type_uuid: '',\r\n        module_uuid: '',\r\n        org_level_uuid: [],// 多选\r\n        status_uuid: true,\r\n        client_type_uuid: [],\r\n        version: '',\r\n        uuid: null\r\n      },\r\n      uuid: null,\r\n      top_module: [],\r\n      data_table: [],\r\n      func_type: [],\r\n      unit_data: [],\r\n      version_arr: [],\r\n      client_type: [],\r\n      version_uuid: '',\r\n      disabled: false,\r\n      tempData: {}\r\n    };\r\n  },\r\n  created () {\r\n  },\r\n  async mounted () {\r\n    this.skLoading = true\r\n    // 上级模块\r\n    try {\r\n      // if (!this.func_disabled && !this.$store.state.iconstatus) {\r\n      //   this.disabled = true\r\n      // }\r\n      await this.national('mrbase_sys_functions')\r\n      const top_module = await getprompt({\r\n        prompt_name: 'function_parent',\r\n        'uuid': this.detailData.uuid\r\n      })\r\n      this.top_module = top_module.data\r\n      // 关联数据表\r\n      const data_table = await getBusinessList('table_name')\r\n      this.data_table = data_table.data\r\n      // func_type 功能类型\r\n      // 查询功能类型\r\n      const func_type = await getDataByName('functionType')\r\n      this.func_type = func_type.data\r\n      // 开放以下单位\r\n      const unit_data = await getBusinessList('open_util')\r\n      this.unit_data = unit_data.data\r\n      // 新增的时候进页面就不传上级模块 获取顶级模块的版本\r\n      // 修改的时候传上级模块 获取版本\r\n      const version_data = await get_versions({ module_uuid: this.detailData.module_uuid })\r\n      this.version_arr = version_data.data.version.split(',')\r\n      this.version_uuid = version_data.data.uuid\r\n      this.skLoading = false\r\n    } catch (error) {\r\n      this.skLoading = false\r\n    }\r\n  },\r\n  methods: {\r\n    // 新增的时候 上级模块改变  要去改版本\r\n    // 修改的时候 上级模块改变 不修改版本\r\n\r\n    // 功能客户端类型根据上级模块来变化\r\n    async moduleChange (val) {\r\n      // 如果是新增就可以修改版本\r\n      if (!this.$store.state.uuid) {\r\n        this.detailData.version = ''\r\n        this.version_arr = []\r\n        const version_data = await get_versions({ module_uuid: val })\r\n        this.version_arr = version_data.data.version.split(',')\r\n        this.version_uuid = version_data.data.uuid\r\n      }\r\n      // 功能客户端类型  高级参照\r\n      const client_type = await getprompt({\r\n        prompt_name: 'function_client_type',\r\n        module_uuid: val\r\n      })\r\n      this.client_type = client_type.data\r\n      // console.log(this.client_type,1111111)\r\n\r\n\r\n    },\r\n    handleReturn () {\r\n      this.$router.go(-1)\r\n    },\r\n    handleEdit () {\r\n      this.disabled = !this.disabled\r\n    },\r\n    // 删除功能\r\n    async handleDel () {\r\n      this.$myConfirm({ content: this.$t('message_Confirm_the_deletion') })\r\n        .then(async () => {\r\n          const del = await get_func_del({ uuid: this.detailData.uuid })\r\n          console.log(del)\r\n          if (del.code == 200) {\r\n            this.$store.commit('newsTips', this.$t('message_The_deletion_was_successful'))\r\n            this.$router.push({\r\n              name: 'module_func_manage'\r\n            })\r\n          }\r\n        }).catch(err => { })\r\n    },\r\n    // 取消\r\n    cancel () {\r\n      this.$myConfirm({ content: this.$t('message_Confirm_the_cancellation_of_the_edit') })\r\n        .then(() => {\r\n          if (this.detailData.uuid) {\r\n            this.disabled = !this.disabled\r\n            this.$emit('func_cancel')\r\n          } else {\r\n            this.$router.go(-1)\r\n          }\r\n        }).catch(() => { })\r\n\r\n      // 取消的时候显示修改前的值\r\n    },\r\n    // 确认\r\n    success () {\r\n      const isSubmit = this.$refs.add_func.validate()\r\n      if (isSubmit) {\r\n        const obj = this.$clone(this.detailData)\r\n        obj.status_uuid = obj.status_uuid ? 1 : 0\r\n        obj.org_level_uuid = obj.org_level_uuid.join()\r\n        obj.client_type_uuid = obj.client_type_uuid.join()\r\n        if (obj.created_utc_datetime) {\r\n          delete obj.created_utc_datetime\r\n          delete obj.updated_utc_datetime\r\n        }\r\n        // 修改的值传出去\r\n        this.$emit('getData', obj)\r\n        // 把选择了的客户端类型传给按钮做下拉\r\n        let client_type = []\r\n        this.client_type.forEach(item => {\r\n          this.detailData.client_type_uuid.forEach(items => {\r\n            if (item.value_field == items) {\r\n              client_type.push(item)\r\n            }\r\n          })\r\n        })\r\n        this.$emit('getBtnClientType', client_type)\r\n        this.$emit('getVersion_uuid', this.version_uuid)\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n\r\n  },\r\n  watch: {\r\n    func_data: {\r\n      handler (val) {\r\n        this.$nextTick(async () => {\r\n          this.disabled = true\r\n          this.successText = this.$t('label_submit')\r\n          const obj = this.$clone(val)\r\n          if (obj.client_type_uuid) {\r\n            obj.client_type_uuid = obj.client_type_uuid.split(',')\r\n          }\r\n          await this.moduleChange(obj.module_uuid)\r\n          this.detailData = obj\r\n          this.tempData = obj\r\n          // 修改数据的时候把客户端类型，给按钮使用\r\n          let client_type = []\r\n          this.client_type.length > 0 && this.client_type.forEach(item => {\r\n            obj.client_type_uuid.forEach(items => {\r\n              if (item.value_field == items) {\r\n                client_type.push(item)\r\n              }\r\n            })\r\n          })\r\n          this.$emit('getBtnClientType', client_type)\r\n        })\r\n      },\r\n      deep: true\r\n    },\r\n    func_disabled () {\r\n      this.disabled = !this.disabled\r\n      this.tempData = this.detailData\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./func.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./func.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./func.vue?vue&type=template&id=24843b5c&scoped=true&\"\nimport script from \"./func.vue?vue&type=script&lang=js&\"\nexport * from \"./func.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"24843b5c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}