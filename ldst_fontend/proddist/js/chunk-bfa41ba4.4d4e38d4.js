(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bfa41ba4","chunk-4e7dddcd","chunk-a7a6e37c","chunk-2d0ab6cc"],{"0bfe":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"containersbox"},[n("div",{staticClass:"content"},[n("v-icon",{staticClass:"material-icons",staticStyle:{color:"#0f46c1"},style:{display:e.showChildren||e.halfSelected?"none":"block"},on:{click:e.toggleChildren}},[e._v("check_box_outline_blank")]),n("v-icon",{staticClass:"material-icons",staticStyle:{color:"#0f46c1"},style:{display:e.showChildren&&!e.halfSelected?"block":"none"},on:{click:e.toggleChildren}},[e._v("check_box")]),n("v-icon",{staticClass:"material-icons",staticStyle:{color:"#0f46c1"},style:{display:e.halfSelected?"block":"none"},on:{click:e.toggleChildren}},[e._v("indeterminate_check_box")]),n("div",[e._v(" "+e._s(e.containerName)+" ")])],1),e._l(e.copylist,(function(t,s){return n("div",{key:s,staticClass:"content margincontent"},[n("v-icon",{staticClass:"material-icons",staticStyle:{color:"#0f46c1"},on:{click:function(t){return t.stopPropagation(),e.changeicon(s)}}},[e._v(e._s(t.checked?"check_box":"check_box_outline_blank"))]),n("div",[e._v(" "+e._s(t.table_name)+" ")])],1)}))],2)},i=[],a=(n("a623"),n("d81d"),n("45fc"),{components:{},props:{containerName:{type:String},list:{type:Array}},data:function(){return{showChildren:!1,copylist:[],halfSelected:!1}},created:function(){},mounted:function(){this.copylist=this.list.map((function(e){return e.checked=!1,e}))},methods:{toggleChildren:function(){var e=this;this.copylist=this.list.map((function(t,n){return t.checked=!e.showChildren,t})),this.showChildren=!this.showChildren},changeicon:function(e){this.copylist=this.list.map((function(t,n){return e==n&&(t.checked=!t.checked),t}));var t=this.copylist.every((function(e){return 1==e.checked})),n=this.copylist.some((function(e){return 0==e.checked}));t&&(this.halfSelected=!1,this.showChildren=!this.showChildren),n&&(this.halfSelected=!0,this.showChildren=!1)}},computed:{},watch:{containerName:function(){this.copylist=this.list.map((function(e){return e.checked=!1,e}))}}}),c=a,r=(n("63d1"),n("2877")),l=Object(r["a"])(c,s,i,!1,null,"57a974a8",null);t["default"]=l.exports},"0c6b":function(e,t,n){},"14e8":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pl-8 pr-8 pt-8"},[n("v-combobox",{attrs:{label:e.$t("label_Email_whitelist_Settings")+"*",multiple:"",items:e.list,"validate-on-blur":!0,"item-text":"client_whitelist_email","item-value":"uuid",chips:"","error-messages":e.isemail,readonly:e.readonly},on:{"update:search-input":e.verifyemail,input:e.emailverify},model:{value:e.states,callback:function(t){e.states=t},expression:"states"}})],1)},i=[],a={props:{list:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:!1}},data:function(){return{states:[],disabled:!1,select:[],datastorage:this.list,isemail:""}},watch:{list:{handler:function(e){this.states=e},deep:!0}},computed:{},mounted:function(){this.$store.state.detailuuid&&(this.states=this.list)},methods:{verifyemail:function(e){if(null!=e){var t=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e);this.isemail=t?"":this.$t("verify_The_mailbox_format_is_wrong")}else this.isemail=""},emailverify:function(e){""!=this.isemail&&this.states.pop()}}},c=a,r=n("2877"),l=Object(r["a"])(c,s,i,!1,null,null,null);t["default"]=l.exports},"244d":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-form",[n("v-stepper",{attrs:{light:!0},model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[n("v-stepper-header",[n("v-stepper-step",{attrs:{complete:e.e1>1,step:"1"}},[e._v(e._s(e.$t("label_Copy_from_template")))]),n("v-divider"),n("v-stepper-step",{attrs:{complete:e.e1>2,step:"2"}},[e._v(e._s(e.$t("label_Customer_data")))]),n("v-divider"),n("v-stepper-step",{attrs:{complete:e.e1>3,step:"3"}},[e._v(e._s(e.$t("label_Functional_authority")))]),n("v-divider"),n("v-stepper-step",{attrs:{step:"4",complete:e.e1>4}},[e._v(e._s(e.$t("label_Email_Whitelist")))]),n("v-divider"),n("v-stepper-step",{attrs:{step:"5"}},[e._v(e._s(e.$t("label_language")))])],1),n("v-stepper-items",[n("v-stepper-content",{attrs:{step:"1"}},[n("v-card",{staticClass:"pl-6 pr-6"},[n("v-form",{ref:"copyform"},[n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("mrc_ess_prompt",{attrs:{label:"Client Source*",obj:e.clientSource},model:{value:e.client,callback:function(t){e.client=t},expression:"client"}})],1),n("v-col",{attrs:{cols:"6"}},[n("mrc_ess_prompt",{attrs:{label:"Company*",obj:e.companyName},on:{getData:e.getclientcontainers},model:{value:e.companyuuid,callback:function(t){e.companyuuid=t},expression:"companyuuid"}})],1)],1)],1),n("div",{staticClass:"contentbox"},e._l(Object.keys(e.clientcontainers),(function(t,s){return n("v-card",{key:s,staticClass:"bg2"},[n("clientcontainers",{ref:"childrenClient_containers",refInFor:!0,attrs:{containerName:t,list:e.clientcontainers[t]}})],1)})),1)],1),n("mrc_ess_submitBtn",{attrs:{cancelText:e.$t("label_cancel"),successText:e.$t("label_The_next_step"),disabled:e.btndisabled},on:{cancel:e.edmit,success:function(t){e.e1=2}}})],1),n("v-stepper-content",{staticClass:"bg1",attrs:{step:"2"}},[n("v-card",[n("adduser",{ref:"zjadduser"})],1),n("mrc_ess_submitBtn",{attrs:{cancelText:e.$t("label_The_previous_step"),successText:e.$t("label_The_next_step"),disabled:e.btndisabled},on:{cancel:function(t){e.e1=1},success:function(t){return e.getuserzl()}}})],1),n("v-stepper-content",{staticClass:"bg1",attrs:{step:"3"}},[n("v-card",[e.e1>=3?n("quanxian",{ref:"zjquanxian",attrs:{uuidslist:e.copyuuidslist}}):e._e()],1),n("mrc_ess_submitBtn",{attrs:{cancelText:e.$t("label_The_previous_step"),successText:e.$t("label_The_next_step")},on:{cancel:function(t){e.e1=2},success:e.getuserqx}})],1),n("v-stepper-content",{staticClass:"bg1",attrs:{step:"4"}},[n("v-card",[n("baimingdan",{ref:"zjbaimingdan"})],1),n("mrc_ess_submitBtn",{attrs:{cancelText:e.$t("label_The_previous_step"),successText:e.$t("label_The_next_step")},on:{cancel:function(t){e.e1=3},success:e.getuseryx}})],1),n("v-stepper-content",{staticClass:"bg1",attrs:{step:"5"}},[n("v-card",[n("yuyan",{ref:"reflanguage"})],1),n("mrc_ess_submitBtn",{attrs:{loading:e.btnloading,cancelText:e.$t("label_The_previous_step")},on:{cancel:function(t){e.e1=4},success:function(t){return e.submit()}}})],1)],1)],1)],1)],1)},i=[],a=(n("99af"),n("4160"),n("277d"),n("d81d"),n("159b"),n("96cf"),n("1da1")),c=n("0bfe"),r=n("2926"),l=n("14e8"),u=n("5c7c"),o=n("8d3e"),d=n("b7e6"),_=n("6924"),h={components:{adduser:r["default"],baimingdan:l["default"],quanxian:u["default"],yuyan:o["default"],clientcontainers:c["default"]},data:function(){return{btnloading:!1,btndisabled:!0,rules:[function(e){return!!e||"不能为空."}],valid:!1,e1:1,client:"",companyuuid:"",clientSource:{prompt_name:"mrbase_sys_clients"},Children:{},copyuuidslist:[],function_permission:[],client_languages:[],select1:"",select2:[],listitems:[],ysdefault:{},otherlanguagelist:[],mrbase_sys_function_permission:[]}},computed:{clientcontainers:function(){var e={};for(var t in this.Children)Array.isArray(this.Children[t])&&(e[t]=this.Children[t]);return e},companyName:function(){return{prompt_name:"org_level_relevance_client",client_uuid:this.client}},listClient_containers:function(){var e=[];this.$refs.childrenClient_containers>0&&this.$refs.childrenClient_containers.map((function(t){e=e.concat(JSON.parse(JSON.stringify(t.copylist)))}));var t=[];return e.length>0&&e.map((function(e){1==e.checked&&(delete e.checked,t.push(e))})),t},xzuserlist:function(){return this.$refs.zjadduser.userdetail.client_address_province_id||delete this.$refs.zjadduser.userdetail.client_address_province_id,this.$refs.zjadduser.userdetail.client_address_city_id||delete this.$refs.zjadduser.userdetail.client_address_city_id,this.$refs.zjadduser.userdetail},mrbase_sys_client_contacts:function(){return this.$refs.zjadduser.desserts},mrbase_sys_client_email_whitelist:function(){var e=[];return this.$refs.zjbaimingdan.states.forEach((function(t){var n={"~table~":"mrbase_sys_client_email_whitelist",whitelist_domain:t};e.push(n)})),e}},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(_["getBusinessList"])("client_language");case 2:t=e.sent,t.data.length>0&&t.data.map((function(e){n.listitems.push(e.view_fields)}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{changee1:function(e){this.e1=e},getclientcontainers:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["copyuserclientdetail"])({client_uuid:this.client,org_level_uuid:this.companyuuid});case 2:t=e.sent,200==t.code&&(this.Children=t.data.client_containers,this.copyuuidslist=t.data.mrbase_sys_function_permission,this.function_permission=t.data.function_permission_tree,this.btndisabled=!1);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getuserzl:function(){this.$refs.zjadduser.formverify()?this.e1=3:this.$myConfirm({content:this.$t("message_The_information_was_not_entered_completely")}).then((function(){}))["catch"]((function(){}))},getuserqx:function(e){!this.$refs.zjquanxian.getchangeref().length>0?this.$myConfirm({content:this.$t("message_permission_list_must_select_at_least_one_item")}):(this.e1=4,this.mrbase_sys_function_permission=this.$refs.zjquanxian.getchangeref())},getuseryx:function(){""!=this.$refs.zjbaimingdan.isemail?this.$myConfirm({content:this.$t("verify_The_mailbox_format_is_wrong")}):this.e1=5},getlanguage:function(e){var t=this;e.length>0&&e.map((function(n,s){1==n.is_default_language?(t.select1=e[s].client_language_code,t.ysdefault=e[s]):(t.select2.push(e[s]),t.otherlanguagelist.push(e[s]))}))},changeis:function(e){},changeno:function(e){},edmit:function(){var e=this;this.$myConfirm({content:this.$t("message_Confirm_the_cancellation_of_the_edit")}).then((function(t){e.$router.push({name:"clientmanage"})}))["catch"]((function(e){}))},submit:function(){var e=this;if(this.$refs.reflanguage.mrbase_sys_client_language.length){var t=this.$refs.zjadduser.light_mode_icon_file,n=this.$refs.zjadduser.dark_mode_icon_file;""==t&&(this.xzuserlist.light_mode_icon={name:"",path:"",size:""}),""==n&&(this.xzuserlist.dark_mode_icon={name:"",path:"",size:""}),this.xzuserlist.mrbase_sys_function_permission=this.mrbase_sys_function_permission,this.xzuserlist.mrbase_sys_client_contacts=this.mrbase_sys_client_contacts||[],this.xzuserlist.mrbase_sys_client_email_whitelist=this.mrbase_sys_client_email_whitelist||[],this.xzuserlist.mrbase_sys_client_language=this.$refs.reflanguage.mrbase_sys_client_language,this.xzuserlist.client_containers=this.listClient_containers||[],this.xzuserlist.copy_client_uuid=this.client,this.xzuserlist.copy_org_level_uuid=this.companyuuid,this.btnloading=!this.btnloading,Object(d["copyadduserclientdetail"])(this.xzuserlist).then(function(){var s=Object(a["a"])(regeneratorRuntime.mark((function s(i){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("200"!==i.code){s.next=15;break}if(null,null,!(t&&t.length>0)){s.next=7;break}return s.next=6,e.$uploadFiles(t,{function_uuid:e.$store.state.menuFunctionUuid,attachment_data_table:"mrbase_sys_clients",attachment_data_field:"light_mode_icon",org_level_uuid:e.$store.state.currentCompany,uuid:i.data.uuid});case 6:s.sent;case 7:if(!(n&&n.length>0)){s.next=11;break}return s.next=10,e.$uploadFiles(n,{function_uuid:e.$store.state.menuFunctionUuid,attachment_data_table:"mrbase_sys_clients",attachment_data_field:"dark_mode_icon",org_level_uuid:e.$store.state.currentCompany,uuid:i.data.uuid});case 10:s.sent;case 11:e.$Message({text:e.$t("message_The_operation_was_successful")}),e.$router.push({name:"clientmanage"}),s.next=17;break;case 15:e.$Message({text:i.msg}),e.btnloading=!e.btnloading;case 17:case"end":return s.stop()}}),s,this)})));return function(e){return s.apply(this,arguments)}}())["catch"]((function(t){e.btnloading=!e.btnloading}))}else this.$myConfirm({content:this.$t("message_default_language_must_be_selected")})}},watch:{}},f=h,m=(n("9d2a"),n("7598"),n("2877")),p=Object(m["a"])(f,s,i,!1,null,"4bbaedfe",null);t["default"]=p.exports},"38c2":function(e,t,n){},"4be8":function(e,t,n){"use strict";var s=n("6d2c"),i=n.n(s);i.a},"5c7c":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"pl-8 pr-8 pt-8"},[[n("mrc_ess_mytree",{ref:"reftree",attrs:{list:e.treeList,disabled:e.disabled,isload:e.isload,uuids:e.uuidslist},on:{getData:e.getData}})]],2)},i=[],a=(n("96cf"),n("1da1")),c=n("5530"),r=n("b7e6"),l={components:{},props:{uuidslist:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},data:function(){return{oldtree:[],function_permission:[],delete_function_buttons:[],uuids:[],isload:!1,treeList:[]}},watch:{},methods:{getchangeref:function(){return this.$refs.reftree.getCheckData()},getData:function(e){this.function_permission=e},typedelmethods:function(e,t,n){for(var s=[],i=0;i<e.length;i++){for(var a=e[i].comparisonvalue,r=!1,l=0;l<t.length;l++)if(t[l].comparisonvalue==a){r=!0;break}r||s.push(Object(c["a"])(Object(c["a"])({},e[i]),{},{"~type~":"del"}))}return s},gettreelist:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["getTreeList"])();case 2:t=e.sent,this.treeList=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.gettreelist();case 2:this.isload=!1,this.isload=!0;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},u=l,o=(n("4be8"),n("2877")),d=Object(o["a"])(u,s,i,!1,null,"78ae20f4",null);t["default"]=d.exports},"63d1":function(e,t,n){"use strict";var s=n("0c6b"),i=n.n(s);i.a},"6d2c":function(e,t,n){},7001:function(e,t,n){},7598:function(e,t,n){"use strict";var s=n("e9b9"),i=n.n(s);i.a},"8d3e":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-text",[n("v-col",{attrs:{cols:" 12"}},[n("v-select",{attrs:{items:e.listitems,chips:"","item-text":"view_fields","item-value":"value_field",label:e.$t("label_The_default_language")+"*",readonly:e.readonly},model:{value:e.select1,callback:function(t){e.select1=t},expression:"select1"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-select",{attrs:{items:e.listitems,chips:"","item-text":"view_fields","item-value":"value_field",multiple:"",label:e.$t("label_Other_languages")+"*",readonly:e.readonly},on:{change:e.change},model:{value:e.select2,callback:function(t){e.select2=t},expression:"select2"}})],1)],1)],1)},i=[],a=(n("99af"),n("a623"),n("d81d"),n("96cf"),n("1da1")),c=n("5530"),r=n("2909"),l=n("6924"),u={props:{list:{type:Array,default:function(){return[]}}},data:function(){return{rules:[function(e){return!!e||"语言不能为空"}],nodorules:[function(e){return String(e).length<=200||"超过输入个数"},function(e){return!/[@#$%^&()<>?/]/.test(e)||"请勿输入非法字符"},function(e){return!/^ +| +$/g.test(e)||"不能输入空格"}],readonly:!1,select1:"",select2:[],listitems:[],ysdefault:{},otherlanguagelist:[]}},watch:{list:{handler:function(e){this.list=e,this.getlanguage(this.list)},deep:!0}},computed:{mrbase_sys_client_language:function(){var e=this;if(!this.select1)return!1;if(!this.select2.every((function(t){return t!=e.select1})))return!1;var t={is_default_language:1,"~table~":"mrbase_sys_client_language",client_language_code:this.select1},n=this.select2.map((function(e){return{is_default_language:0,"~table~":"mrbase_sys_client_language",client_language_code:e}}));return[Object(c["a"])({},t)].concat(Object(r["a"])(n))}},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["getBusinessList"])("client_language");case 2:t=e.sent,this.listitems=t.data,(this.$route.params.uuid||this.$store.state.detailuuid)&&(this.readonly=!0,this.list&&this.getlanguage(this.list));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{asa:function(){console.log(this.mrbase_sys_client_language)},change:function(e){},getlanguage:function(e){var t=this;this.select2=[],e.map((function(e,n){1==e.is_default_language?t.select1=e.client_language_code:t.select2.push(e.client_language_code)}))},changeis:function(e){},changeno:function(e){}}},o=u,d=(n("b0a0"),n("2877")),_=Object(d["a"])(o,s,i,!1,null,"4d71dccc",null);t["default"]=_.exports},"9d2a":function(e,t,n){"use strict";var s=n("7001"),i=n.n(s);i.a},b0a0:function(e,t,n){"use strict";var s=n("38c2"),i=n.n(s);i.a},e9b9:function(e,t,n){}}]);
//# sourceMappingURL=chunk-bfa41ba4.4d4e38d4.js.map