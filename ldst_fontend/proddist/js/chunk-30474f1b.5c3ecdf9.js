(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30474f1b","chunk-2d21a023"],{"08de":function(e,s,r){"use strict";r.r(s);var t=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"forget-password"},[e.webPc?r("div",{staticClass:"webPc"},[r("v-card",{staticClass:"webResetPassword"},[r("div",{staticClass:"forgot_title"},[e._v(e._s(e.title))]),r("mrc_ess_input",{staticStyle:{"margin-top":"80px"},attrs:{placeholder:"new password","background-color":"#fff","append-icon":e.icon,type:e.type,"error-messages":e.$errors("savePwdParams","user_pwd",e.requiredRule.concat({rule:"passwordStrengthRegxRule",msg:e.regxMsg},{rule:"isChina",msg:"不能输入中文"}))},on:{input:function(s){return e.$v.savePwdParams.user_pwd.$touch()},blur:function(s){return e.$v.savePwdParams.user_pwd.$touch()},"click:append":e.showPassword},model:{value:e.savePwdParams.user_pwd,callback:function(s){e.$set(e.savePwdParams,"user_pwd","string"===typeof s?s.trim():s)},expression:"savePwdParams.user_pwd"}}),r("mrc_ess_input",{attrs:{placeholder:"Retype password","background-color":"#fff","append-icon":e.icon,type:e.type,"error-messages":e.$errors("savePwdParams","sameAsPassword",e.requiredRule.concat([{rule:"sameAsPassword",msg:"两次密码输入不一致"}]))},on:{input:function(s){return e.$v.savePwdParams.sameAsPassword.$touch()},blur:function(s){return e.$v.savePwdParams.sameAsPassword.$touch()},"click:append":e.showPassword},model:{value:e.savePwdParams.sameAsPassword,callback:function(s){e.$set(e.savePwdParams,"sameAsPassword","string"===typeof s?s.trim():s)},expression:"savePwdParams.sameAsPassword"}}),r("mrc_ess_submitBtn",{attrs:{cancelText:"Back",backgroundColor:"#fff",successText:"Submit",successBackgroundColor:e.successBackgroundColor,disabled:e.disabled,loading:e.loading},on:{success:e.savePwdHandler,cancel:e.backHandler}})],1)],1):r("div",{staticClass:"phoneH5"},[r("v-card",{staticClass:"resetPassword"},[r("div",{staticClass:"forgot_title"},[e._v(e._s(e.title))]),r("mrc_ess_input",{staticStyle:{"margin-top":"14vw"},attrs:{placeholder:"new password","background-color":"#fff",type:e.type,"append-icon":e.icon,"error-messages":e.$errors("savePwdParams","user_pwd",e.requiredRule.concat({rule:"passwordStrengthRegxRule",msg:e.regxMsg},{rule:"isChina",msg:"不能输入中文"}))},on:{input:function(s){return e.$v.savePwdParams.user_pwd.$touch()},blur:function(s){return e.$v.savePwdParams.user_pwd.$touch()},"click:append":e.showPassword},model:{value:e.savePwdParams.user_pwd,callback:function(s){e.$set(e.savePwdParams,"user_pwd","string"===typeof s?s.trim():s)},expression:"savePwdParams.user_pwd"}}),r("mrc_ess_input",{attrs:{placeholder:"Retype password","background-color":"#fff","append-icon":e.icon,type:e.type,"error-messages":e.$errors("savePwdParams","sameAsPassword",e.requiredRule.concat([{rule:"sameAsPassword",msg:"两次密码输入不一致"}]))},on:{input:function(s){return e.$v.savePwdParams.sameAsPassword.$touch()},blur:function(s){return e.$v.savePwdParams.sameAsPassword.$touch()},"click:append":e.showPassword},model:{value:e.savePwdParams.sameAsPassword,callback:function(s){e.$set(e.savePwdParams,"sameAsPassword","string"===typeof s?s.trim():s)},expression:"savePwdParams.sameAsPassword"}}),r("mrc_ess_submitBtn",{staticClass:"flex-column-reverse phoneSubmitBtn",attrs:{cancelText:"Back",backgroundColor:"#fff",successText:"Submit",loading:e.loading,successBackgroundColor:e.successBackgroundColor,disabled:e.disabled},on:{success:e.savePwdHandler,cancel:e.backHandler}})],1)],1),r("div",{staticClass:"bottom"},[r("span",{staticClass:"ft2"},[e._v(e._s(e.$t("Privary Policy")))]),r("i",[e._v("|")]),r("span",{staticClass:"ft2"},[e._v(e._s(e.$t("Term of Use")))]),r("p",{staticClass:"ft3"},[e._v("Copyight 2020 by MRC International Grounp Limited")])])])},a=[],n=(r("d3b7"),r("4d63"),r("ac1f"),r("25f0"),r("3ca3"),r("ddb0"),r("4795"),r("2b3d"),r("96cf"),r("1da1")),o=r("b5ae"),i=r("ba4b"),c={components:{},props:{},data:function(){return{regxMsg:"",regxRule:"",disabled:!1,successBackgroundColor:"primary",urlParams:{},title:"Forgot Password",icon:"mdi-eye-off",type:"password",sendMail:!1,sendEmailParams:{user_account:""},savePwdParams:{user_account:"",user_pwd:"",sameAsPassword:"",token:""},openDialog:!1,is_showPassword:!1,screenSize:"",webPc:!0,loading:!1}},validations:{sendEmailParams:{user_account:{required:o["required"]}},savePwdParams:{user_pwd:{required:o["required"],isChina:function(e){return this.isChina(e)},passwordStrengthRegxRule:function(e){return new RegExp(this.regxRule).test(e)}},sameAsPassword:{required:o["required"],sameAsPassword:function(e){return e&&e==this.savePwdParams.user_pwd}}}},computed:{},created:function(){},watch:{},mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var s,r,t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.getQueryParams(),!this.urlParams.token){e.next=10;break}return this.successBackgroundColor="#e0e0e0",this.disabled=!0,e.next=6,Object(i["checkToken"])({token:this.urlParams.token,user_account:this.urlParams.user_account});case 6:s=e.sent,200==s.code?(this.getPasswordStrength(),this.savePwdParams.token=this.urlParams.token,this.savePwdParams.user_account=this.urlParams.user_account,this.sendMail=!1,this.title="Reset Password",this.disabled=!1,this.successBackgroundColor="primary"):(this.$store.commit("newsTips",s.msg),setTimeout((function(){t.urlParams.login_url?window.location.href=t.urlParams.login_url:t.$store.commit("newsTips","该链接已失效，请重新发送邮件获取链接")}),2e3),this.sendMail=!0),e.next=13;break;case 10:this.successBackgroundColor="#e0e0e0",this.disabled=!0,setTimeout((function(){t.urlParams.login_url?window.location.href=t.urlParams.login_url:t.$store.commit("newsTips","该链接为无效链接，请重新发送邮件获取链接")}),2e3);case 13:r=this,r.screenSize=document.documentElement.clientWidth,r.screenSize>750?r.webPc=!0:r.webPc=!1,this.resize((function(){r.screenSize=document.documentElement.clientWidth,r.screenSize>750?r.webPc=!0:r.webPc=!1}));case 17:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}(),methods:{getPasswordStrength:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["passwordStrength"])({user_account:this.urlParams.user_account});case 2:s=e.sent,200==s.code&&(this.regxMsg=s.data.ceckmean,this.regxRule=s.data.cecknum);case 4:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}(),getQueryParams:function(){var e={},s=this.$route.params.token;if(s){s="?token="+s;var r=new URLSearchParams(s);e.token=r.get("token"),e.user_account=r.get("user_account"),e.login_url=r.get("login_url"),this.urlParams=e}else this.urlParams={}},showPassword:function(){this.is_showPassword=!this.is_showPassword,this.is_showPassword?(this.icon="mdi-eye",this.type="text"):(this.icon="mdi-eye-off",this.type="password")},backHandler:function(){this.urlParams.login_url&&(window.location.href=this.urlParams.login_url)},savePwdHandler:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var s,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.savePwdParams.$touch(),!this.$v.savePwdParams.$error){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Object(i["savePwd"])({token:this.savePwdParams.token,user_account:this.savePwdParams.user_account,user_pwd:this.savePwdParams.user_pwd});case 5:s=e.sent,200==s.code&&(this.$store.commit("newsTips","修改成功"),setTimeout((function(){r.urlParams.login_url?window.location.href=r.urlParams.login_url:r.$store.commit("newsTips","请返回登录页重新登录")}),500));case 7:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}(),resize:function(e){window.addEventListener("resize",(function(){e()}))}}},u=c,d=(r("c7e8"),r("2877")),l=Object(d["a"])(u,t,a,!1,null,"1ba8d734",null);s["default"]=l.exports},"599e":function(e,s,r){},ba4b:function(e,s,r){"use strict";r.r(s),r.d(s,"savePwd",(function(){return n})),r.d(s,"sendEmail",(function(){return o})),r.d(s,"checkToken",(function(){return i})),r.d(s,"updatePassword",(function(){return c})),r.d(s,"passwordStrength",(function(){return u}));r("d3b7");var t=r("efc9"),a="mrbase_sys_users",n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e["~table~"]=a,new Promise((function(s,r){t["default"].post("/api/personalcenter/save-newpwd/v1",e).then((function(e){s(e)}))["catch"]((function(e){r(e)}))}))},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e["~table~"]=a,new Promise((function(s,r){t["default"].post("/api/personalcenter/send-updatePwdEmail/v1",e).then((function(e){s(e)}))["catch"]((function(e){r(e)}))}))},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e["~table~"]=a,new Promise((function(s,r){t["default"].post("/api/personalcenter/check-token/v1",e).then((function(e){s(e)}))["catch"]((function(e){r(e)}))}))},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e["~table~"]=a,new Promise((function(s,r){t["default"].post("/api/personalcenter/save-updatepwd/v1",e).then((function(e){s(e)}))["catch"]((function(e){r(e)}))}))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(s,r){t["default"].post("/api/personalcenter/return-security/v1",e).then((function(e){s(e)}))["catch"]((function(e){r(e)}))}))}},c7e8:function(e,s,r){"use strict";var t=r("599e"),a=r.n(t);a.a}}]);
//# sourceMappingURL=chunk-30474f1b.5c3ecdf9.js.map