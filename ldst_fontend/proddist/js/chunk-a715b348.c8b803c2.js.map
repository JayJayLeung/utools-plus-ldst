{"version":3,"sources":["webpack:///./src/views/login/index.vue?39c6","webpack:///./src/views/login/index.vue?6bdd","webpack:///src/views/login/index.vue","webpack:///./src/views/login/index.vue?9400","webpack:///./src/views/login/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","scopedSlots","_u","key","fn","ref","on","_g","_b","_v","_s","lang_name","_l","item","value","$event","lang_change","text","model","callback","$$v","login_form","expression","$t","$text_rules","type","indexOf","_k","keyCode","login","user_account","trim","icon","showPassword","user_pwd","remember","forgetPassword","login_loading","staticRenderFns","components","props","data","redirect","is_showPassword","created","methods","url","window","location","href","slice","$router","push","path","query","login_url","$store","commit","isSubmit","$http","post","timestamp","computed","getters","langList","state","currentCompanyLanguage","login_language","lang","toLowerCase","watch","component"],"mappings":"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","file":"js/chunk-a715b348.c8b803c2.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=068d0b94&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=068d0b94&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loginPage\"},[_c('v-card',{staticClass:\"logo_module\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"logo\"},[_c('mrc_ess_svgIcon',{staticStyle:{\"transform\":\"scale(14)\",\"position\":\"relative\",\"left\":\"102px\",\"top\":\"-5px\"},attrs:{\"icon-class\":\"logoV1_ESSEnterprise_full_e_blue\"}})],1),_c('v-menu',{attrs:{\"offset-y\":\"\",\"transition\":\"scale-transition\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({attrs:{\"color\":\"#f2f2f2\",\"rounded\":\"\",\"elevation\":0,\"min-width\":\"128\",\"min-height\":\"32\",\"dark\":\"\"}},'v-btn',attrs,false),on),[_c('mrc_ess_svgIcon',{staticStyle:{\"font-size\":\"23px\"},attrs:{\"icon-class\":\"outline-language-24px\"}}),_c('span',{staticClass:\"text-capitalize\",staticStyle:{\"font-size\":\"15px\",\"color\":\"#393939\"}},[_vm._v(_vm._s(_vm.lang_name))]),_c('v-icon',{staticClass:\"material-icons ml-2\",staticStyle:{\"color\":\"#393939\"}},[_vm._v(\"arrow_drop_down\")])],1)]}}])},[_c('v-list',{staticStyle:{\"overflow-y\":\"auto\",\"max-height\":\"500px\"},attrs:{\"dense\":\"\"}},_vm._l((_vm.langList),function(item){return _c('v-list-item',{key:item.value,on:{\"click\":function($event){return _vm.lang_change(item)}}},[_c('v-list-item-title',[_vm._v(_vm._s(item.text))])],1)}),1)],1)],1),_c('v-form',{ref:\"login_form\",staticClass:\"login_form\",model:{value:(_vm.login_form),callback:function ($$v) {_vm.login_form=$$v},expression:\"login_form\"}},[_c('v-text-field',{attrs:{\"label\":_vm.$t('label_Company_account'),\"rules\":_vm.$text_rules(_vm.$t('verify_Required'))},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.login($event)}},model:{value:(_vm.user_account),callback:function ($$v) {_vm.user_account=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"user_account\"}}),_c('v-text-field',{attrs:{\"label\":_vm.$t('label_password'),\"type\":_vm.type,\"append-icon\":_vm.icon,\"rules\":_vm.$text_rules(_vm.$t('verify_Required'))},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.login($event)},\"click:append\":_vm.showPassword},model:{value:(_vm.user_pwd),callback:function ($$v) {_vm.user_pwd=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"user_pwd\"}})],1),_c('div',{staticClass:\"actions\"},[_c('v-checkbox',{attrs:{\"color\":\"primary\",\"dense\":\"\",\"label\":_vm.$t('label_Remember_that_I')},model:{value:(_vm.remember),callback:function ($$v) {_vm.remember=$$v},expression:\"remember\"}}),_c('span',{staticClass:\"ft\",on:{\"click\":_vm.forgetPassword}},[_vm._v(_vm._s(_vm.$t('label_Retrieve_password')))])],1),_c('v-btn',{staticClass:\"login_btn d-flex justify-center align-center\",attrs:{\"color\":\"primary\",\"loading\":_vm.login_loading,\"rounded\":\"\"},on:{\"click\":_vm.login}},[_vm._v(_vm._s(_vm.$t('label_Log_in_to')))])],1),_c('div',{staticClass:\"bottom\"},[_c('span',{staticClass:\"ft2\"},[_vm._v(_vm._s(_vm.$t('label_The_right_to_privacy')))]),_c('i',[_vm._v(\"|\")]),_c('span',{staticClass:\"ft2\"},[_vm._v(_vm._s(_vm.$t('label_The_terms_of')))]),_c('p',{staticClass:\"ft3\"},[_vm._v(\"Copyight 2019-2020 by xxxxxx All Rights Reserved\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"loginPage\">\r\n    <v-card class=\"logo_module\">\r\n      <!-- <v-card-text> -->\r\n      <div class=\"header\">\r\n        <div class=\"logo\">\r\n          <!-- <span style=\"font-size:19px;font-weight:600\">mrc </span> -->\r\n          <!-- <span> backend portal</span> -->\r\n          <mrc_ess_svgIcon style=\"transform: scale(14);\r\n                                    position: relative;\r\n                                    left: 102px;\r\n                                    top: -5px;\"\r\n                           icon-class='logoV1_ESSEnterprise_full_e_blue'></mrc_ess_svgIcon>\r\n        </div>\r\n        <v-menu offset-y\r\n                transition=\"scale-transition\">\r\n          <template v-slot:activator=\"{ on,attrs }\">\r\n            <!-- <div v-on=\"on\" class=\"\" style=\"background: #f2f2f2\">\r\n                {{lang_name}}\r\n                <v-icon>mdi-menu-down</v-icon>\r\n              </div> -->\r\n            <v-btn color=\"#f2f2f2\"\r\n                   rounded\r\n                   :elevation='0'\r\n                   min-width='128'\r\n                   min-height=\"32\"\r\n                   dark\r\n                   v-bind=\"attrs\"\r\n                   v-on=\"on\">\r\n              <mrc_ess_svgIcon icon-class=\"outline-language-24px\"\r\n                               style=\"font-size: 23px;\" />\r\n              <span style=\"font-size:15px;color:#393939;\"\r\n                    class=\"text-capitalize\">{{lang_name}}</span>\r\n              <v-icon style=\"color:#393939\"\r\n                      class=\"material-icons ml-2\">arrow_drop_down</v-icon>\r\n            </v-btn>\r\n          </template>\r\n          <v-list dense\r\n                  style=\"overflow-y:auto;max-height: 500px\">\r\n            <v-list-item v-for=\"item in langList\"\r\n                         :key='item.value'\r\n                         @click=\"lang_change(item)\">\r\n              <v-list-item-title>{{item.text}}</v-list-item-title>\r\n            </v-list-item>\r\n          </v-list>\r\n        </v-menu>\r\n      </div>\r\n      <!-- 输入框 -->\r\n      <v-form ref='login_form'\r\n              class=\"login_form\"\r\n              v-model=\"login_form\">\r\n        <v-text-field @keyup.enter='login'\r\n                      v-model.trim=\"user_account\"\r\n                      :label=\"$t('label_Company_account')\"\r\n                      :rules=\"$text_rules($t('verify_Required'))\">\r\n        </v-text-field>\r\n        <v-text-field :label=\"$t('label_password')\"\r\n                      v-model.trim=\"user_pwd\"\r\n                      :type=\"type\"\r\n                      @keyup.enter='login'\r\n                      :append-icon=\"icon\"\r\n                      :rules=\"$text_rules($t('verify_Required'))\"\r\n                      @click:append=\"showPassword\">\r\n        </v-text-field>\r\n      </v-form>\r\n\r\n      <div class=\"actions\">\r\n        <v-checkbox color=\"primary\"\r\n                    dense\r\n                    v-model=\"remember\"\r\n                    :label=\"$t('label_Remember_that_I')\"></v-checkbox>\r\n        <span @click=\"forgetPassword\"\r\n              class=\"ft\">{{$t('label_Retrieve_password')}}</span>\r\n      </div>\r\n      <v-btn color=\"primary\"\r\n             :loading=\"login_loading\"\r\n             rounded\r\n             class=\"login_btn d-flex justify-center align-center\"\r\n             @click=\"login\">{{$t('label_Log_in_to')}}</v-btn>\r\n      <!-- </v-card-text> -->\r\n    </v-card>\r\n    <div class=\"bottom\">\r\n      <span class=\"ft2\">{{$t('label_The_right_to_privacy')}}</span>\r\n      <i>|</i>\r\n      <span class=\"ft2\">{{$t('label_The_terms_of')}}</span>\r\n      <p class=\"ft3\">Copyight 2019-2020 by xxxxxx All Rights Reserved</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Cookie from 'js-cookie'\r\nimport { filterRouter } from '../../utils/filterRouter'\r\nimport asyncRouter from '../../router/asyncRouter'\r\n\r\n// import createHmac from './hmac';\r\nexport default {\r\n  components: {},\r\n  props: {},\r\n  data () {\r\n    return {\r\n      redirect: '',\r\n      is_showPassword: false,\r\n      icon: 'mdi-eye-off',\r\n      type: 'password',\r\n      remember: true,\r\n      login_loading: false,\r\n      user_account: '',\r\n      user_pwd: '',\r\n      login_form: true,\r\n    };\r\n  },\r\n  created () { },\r\n  async mounted () {\r\n\r\n    if (this.$route.query.redirect) {\r\n      this.redirect = this.$route.query.redirect\r\n    }\r\n    const user_account = Cookie.get('user_account')\r\n    const user_pwd = Cookie.get('user_pwd')\r\n    if (user_account && user_pwd) {\r\n      this.user_account = user_account\r\n      this.user_pwd = user_pwd\r\n    }\r\n    // 进入登录页面清除token等信息\r\n\r\n    this.$store.dispatch('set_userData', {})\r\n    this.$store.dispatch('set_token', '')\r\n    // this.$store.commit('set_sideMenu', [])\r\n    this.$store.commit('set_topcompanylist', [])\r\n    localStorage.clear()\r\n    this.$store.dispatch('resetState')\r\n\r\n    await this.$store.dispatch('setCurrentCompanyLanguageList')\r\n    await this.$store.dispatch('set_languageList', this.$store.state.lang)\r\n    const langs = Object.keys(this.$store.state.languageList)\r\n    const values = Object.values(this.$store.state.languageList)\r\n    langs.forEach((item, index) => {\r\n      if (item != 'code' || item != 'status' || item != 'msg')\r\n        this.$i18n.mergeLocaleMessage(item.toLowerCase(), values[index])\r\n    })\r\n  },\r\n  methods: {\r\n    forgetPassword () {\r\n      let url = ''\r\n      if (window.location.href.indexOf('?') > 0) {\r\n        url = window.location.href.slice(0, window.location.href.indexOf('?'))\r\n      } else {\r\n        url = window.location.href\r\n      }\r\n\r\n      this.$router.push({\r\n        path: '/forget-password',\r\n        query: {\r\n          login_url: url\r\n        }\r\n      })\r\n    },\r\n    // 语言切换\r\n    lang_change (item) {\r\n      this.$store.commit('set_lang', item)\r\n    },\r\n    showPassword () {\r\n      this.is_showPassword = !this.is_showPassword\r\n      if (this.is_showPassword) {\r\n        this.icon = 'mdi-eye'\r\n        this.type = 'text'\r\n      } else {\r\n        this.icon = 'mdi-eye-off'\r\n        this.type = 'password'\r\n      }\r\n    },\r\n    login () {\r\n      //   var hmac = createHmac('key 123')\r\n\r\n      // var mac = hmac.update('foo', 'utf8').digest('hex')\r\n\r\n      // console.log(mac)\r\n      // return\r\n      const isSubmit = this.$refs.login_form.validate()\r\n      if (!isSubmit) return\r\n      // this.$http.get('/mrc-base-server/menu.json')\r\n      // 如果记住密码就保存在cookie里面 七天过期时间\r\n      // 去除所有字符空格\r\n      const user_account = this.user_account.replace(/\\s*/g, \"\")\r\n      const user_pwd = this.user_pwd.replace(/\\s*/g, \"\")\r\n      if (this.remember) {\r\n        Cookie.set('user_account', user_account, { expires: 7 })\r\n        Cookie.set('user_pwd', user_pwd, { expires: 7 })\r\n      }\r\n      this.login_loading = true\r\n      this.$http.post('/login', {\r\n        user_account: user_account,\r\n        user_pwd: user_pwd,\r\n        timestamp: (new Date()).valueOf()\r\n      })\r\n        .then(async res => {\r\n          this.$store.dispatch('set_userData', res.data.user)\r\n          this.$store.dispatch('set_token', res.data.token)\r\n\r\n          // this.$store.commit('set_lang', { text: '', value: res.data.language })\r\n          this.$store.commit('set_currentCompany', res.data.user.org_level_uuid)\r\n          // 请求当前公司的语言种类\r\n          await this.$store.dispatch('setCurrentCompanyLanguageList')\r\n\r\n          const currentCompanyLanguage = this.$store.state.currentCompanyLanguage\r\n          const is_default = currentCompanyLanguage.filter(item => item.value == this.login_language)\r\n          const currentCompanyDefaultLanguage = currentCompanyLanguage.filter(item => item.is_default == 1)\r\n          // 登录页选择的语言在用户语言种类里面，那就用登录选择的语言，反之，使用用户默认的语言\r\n          is_default.length > 0\r\n            ?\r\n            this.$store.commit('set_lang', { text: '', value: is_default[0].value })\r\n            :\r\n            this.$store.commit('set_lang', { text: currentCompanyDefaultLanguage[0].text, value: currentCompanyDefaultLanguage[0].value })\r\n\r\n          // 所有语言label和message等信息\r\n          await this.$store.dispatch('set_languageList', this.$store.state.lang)\r\n          // 将所有的label国际化注入到 i18n 中\r\n          const langs = Object.keys(this.$store.state.languageList)\r\n          const values = Object.values(this.$store.state.languageList)\r\n          langs.forEach((item, index) => {\r\n            if (item != 'code' || item != 'status' || item != 'msg')\r\n              this.$i18n.mergeLocaleMessage(item.toLowerCase(), values[index])\r\n          })\r\n\r\n          // 登录的时候就获取 头部的公司下拉 单位管理员和员工有这个\r\n          if (this.$store.state.userData.roles != '001' && this.$store.state.userData.roles != '003') {\r\n            await this.$store.dispatch('set_topcompanylist')\r\n          }\r\n\r\n          this.login_loading = false\r\n\r\n          this.$store.commit('set_loginStatus', true)\r\n          this.$store.commit('setCurrentCopmpanyMenu', res.data.menusTree)\r\n          let firstPage = ''\r\n          if (res.data.menusTree.length <= 0) {\r\n            this.$store.commit('newsTips', 'no menu list')\r\n            return\r\n          }\r\n          if (res.data.menusTree[0].url) { //有url\r\n            firstPage = res.data.menusTree[0].url\r\n            this.$store.commit('setMenuFunctionUuid', res.data.menusTree[0].function_uuid)\r\n          }\r\n          else {\r\n            if (res.data.menusTree[0].menusTree[0].url) {\r\n              firstPage = res.data.menusTree[0].menusTree[0].url\r\n              this.$store.commit('setMenuFunctionUuid', res.data.menusTree[0].menusTree[0].function_uuid)\r\n            }\r\n            else {\r\n              firstPage = res.data.menusTree[0].menusTree[0].menusTree[0].url\r\n              this.$store.commit('setMenuFunctionUuid', res.data.menusTree[0].menusTree[0].menusTree[0].function_uuid)\r\n            }\r\n          }\r\n          if (!firstPage) {\r\n            firstPage = '/dictionary'\r\n            // firstPage = '/dict'\r\n          }\r\n          this.$router.push({\r\n            path: firstPage\r\n          })\r\n\r\n\r\n          // this.$store.commit('set_sideMenu', asyncRouter)\r\n          // var currentRouter = filterRouter(asyncRouter)\r\n          // this.$router.addRoutes(currentRouter)\r\n          // // this.$router不是响应式的，所以手动将路由元注入路由对象s\r\n          // this.$router.options.routes = this.$router.options.routes.concat(currentRouter)\r\n\r\n          // if (this.redirect) {\r\n          //   this.$router.push({\r\n          //     name: this.redirect\r\n          //   })\r\n\r\n          // } else {\r\n          //   this.$router.push({\r\n          //     path: '/dict'\r\n          //   })\r\n          // }\r\n\r\n        })\r\n        .catch(err => {\r\n          this.login_loading = false\r\n          console.log(err)\r\n        })\r\n    }\r\n  },\r\n  computed: {\r\n    lang_name () {\r\n      return this.$store.getters.lang_name\r\n    },\r\n    langList () {\r\n      return this.$store.state.currentCompanyLanguage\r\n    },\r\n    login_language () {\r\n      return this.$store.state.lang.toLowerCase()\r\n    }\r\n  },\r\n  watch: {},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.ft {\r\n  font-family: Noto Sans CJK TC;\r\n  font-style: normal;\r\n  font-weight: normal;\r\n  font-size: 14px;\r\n  color: rgba(0, 0, 0, 0.38);\r\n}\r\n.ft2 {\r\n  font-family: Noto Sans CJK TC;\r\n  font-style: normal;\r\n  font-weight: 500;\r\n  font-size: 14px;\r\n  line-height: 125%;\r\n  /* identical to box height, or 17px */\r\n  color: #ffffff;\r\n}\r\n.ft3 {\r\n  font-family: Noto Sans CJK TC;\r\n  font-style: normal;\r\n  font-weight: normal;\r\n  font-size: 12px;\r\n  line-height: 128.91%;\r\n  color: rgba(255, 255, 255, 0.68);\r\n  /* or 15px */\r\n}\r\n/deep/ .v-label {\r\n  font-family: Noto Sans CJK TC;\r\n  font-style: normal;\r\n  font-weight: normal;\r\n  font-size: 14px;\r\n  color: #383838;\r\n}\r\n.loginPage {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  background: url(\"../../assets/img/loginBg.png\") no-repeat;\r\n  text-align: center;\r\n  background-color: #0f46c1;\r\n}\r\n.logo_module {\r\n  width: 560px;\r\n  height: 542px;\r\n  padding: 64px 72px;\r\n  position: absolute;\r\n  top: 50%;\r\n  z-index: 20;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n.header {\r\n  height: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin: 20px 0;\r\n  /* margin-top: 70px; */\r\n}\r\n.login_form {\r\n  width: 368px;\r\n  margin: 0 auto;\r\n  margin-top: 84px;\r\n  font-family: Roboto;\r\n}\r\n.actions {\r\n  height: 20px;\r\n  padding-left: 20px;\r\n  width: 395px;\r\n  margin-top: 5px;\r\n  /* margin: 0 auto; */\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n.login_btn {\r\n  color: #fff;\r\n  width: 252px;\r\n  height: 48px !important;\r\n  margin: 0 auto;\r\n  margin-top: 80px;\r\n}\r\n.bottom {\r\n  color: #fff;\r\n  position: absolute;\r\n  bottom: 1px;\r\n  text-align: center;\r\n  left: 50%;\r\n  z-index: 10;\r\n  font-size: 14px;\r\n  transform: translateX(-50%);\r\n}\r\n.bottom i {\r\n  display: inline-block;\r\n  width: 40px;\r\n}\r\n.bottom p {\r\n  font-size: 14px;\r\n  letter-spacing: 1px;\r\n  margin: 0;\r\n}\r\n/deep/ .v-text-field__slot {\r\n  font-style: normal;\r\n  font-weight: normal;\r\n  font-size: 16px;\r\n  color: rgba(0, 0, 0, 0.38);\r\n}\r\n/deep/ .theme--light.v-input input,\r\n.theme--light.v-input textarea {\r\n  /* color: rgba(0, 0, 0, 0.38); */\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=068d0b94&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=068d0b94&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"068d0b94\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}