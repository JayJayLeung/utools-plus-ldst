(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4915bf38","chunk-2d21b334"],{"36e1":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",[s("v-card-text",[s("v-col",{attrs:{cols:"12"}},[s("mrc_ess_switch",{attrs:{"true-value":1,"false-value":0,"true-text":e.$t("label_To_enable_the"),"false-text":e.$t("label_disable")},model:{value:e.list.Is_used,callback:function(t){e.$set(e.list,"Is_used",t)},expression:"list.Is_used"}}),s("mrc_ess_prompt",{attrs:{label:e.$t("label_The_acting_employee")+"*",rules:!1,errMsg:e.$errors("list","replaced_staff_uuid",e.requiredRule),obj:"staffs"},model:{value:e.list.replaced_staff_uuid,callback:function(t){e.$set(e.list,"replaced_staff_uuid",t)},expression:"list.replaced_staff_uuid"}})],1),s("v-col",{staticClass:"d-flex",attrs:{cols:"12"}},[s("mrc_ess_datePicker",{attrs:{disabled:!1,errMsg:e.$errors("list","effective_start",e.requiredRule.concat([{rule:"beforeDate",msg:"不能超过终止日期"}])),label:"有效日期*"},on:{getTime:e.paramsChange},model:{value:e.list.effective_start,callback:function(t){e.$set(e.list,"effective_start",t)},expression:"list.effective_start"}}),s("span",{staticClass:"pl-10 pr-10",staticStyle:{height:"58px","line-height":"66px","font-size":"21px"}},[e._v(" >")]),s("mrc_ess_datePicker",{attrs:{label:this.$t("label_End_date"),disabled:!1,errMsg:e.$errors("list","effective_end",e.requiredRule.concat([{rule:"afterDate",msg:"不能晚于开始时间"}]))},on:{getTime:e.paramsChange},model:{value:e.list.effective_end,callback:function(t){e.$set(e.list,"effective_end",t)},expression:"list.effective_end"}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:e.$t("label_Agency_reason"),readonly:e.disabled},model:{value:e.list.replace_reason,callback:function(t){e.$set(e.list,"replace_reason",t)},expression:"list.replace_reason"}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-checkbox",{staticClass:"mx-2",attrs:{"true-value":1,"false-value":0,color:"#ff8100",readonly:e.disabled,label:e.$t("label_Feedback")},model:{value:e.list.Is_feedback,callback:function(t){e.$set(e.list,"Is_feedback",t)},expression:"list.Is_feedback"}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.showHeaders,items:e.blanklist,"sort-by":"calories","hide-default-footer":""},scopedSlots:e._u([{key:"item.staffuuid",fn:function(t){var i=t.item;return[s("span",{staticClass:"d-flex"},e._l(i.replace_staff_uuid,(function(t,i){return s("span",{key:i},[e._v(" "+e._s(t)+" ")])})),0)]}},e.disabled?null:{key:"item.actions",fn:function(t){var i=t.item;return[s("v-icon",{on:{click:function(t){return e.editItem(i)}}},[e._v("mdi-pencil")]),s("v-icon",{staticClass:"m1",on:{click:function(t){return e.deleteItem(i)}}},[e._v("mdi-delete")])]}},{key:"footer",fn:function(){return[s("v-divider"),e.disabled?e._e():s("span",{staticClass:"mt-2 pb-2 d-flex ml-5",on:{click:e.editItem}},[s("span",{style:{color:e.$vuetify.theme.defaults.light.primary,lineHeight:"28px",fontSize:"12px"}},[e._v(e._s(e.$t("label_New_business_function")))]),s("v-icon",{staticClass:"material-icons",style:{color:e.$vuetify.theme.defaults.light.primary,fontSize:"24px"}},[e._v("add")])],1)]},proxy:!0}],null,!0)})],1),s("mrc_ess_myDialog",{attrs:{title:e.$t("label_New_business_function")},on:{success:e.save,cancel:e.close},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-card-text",[s("v-col",{attrs:{cols:"12"}},[s("mrc_ess_selectList",{attrs:{selectlist:e.list11,label:e.$t("label_agent")+"*",multiple:""},on:{selectItem:e.selectItem},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.item;return e._l(i,(function(t){return s("span",{key:t.uuid},[e._v(" "+e._s(t.uuid)+" ")])}))}},{key:"listItem",fn:function(t){var i=t.item;return[s("p",[e._v(e._s(i.name)+"---"+e._s(i.uuid))])]}}]),model:{value:e.uuidlist,callback:function(t){e.uuidlist=t},expression:"uuidlist"}})],1),s("v-col",{attrs:{cols:"12"}},[s("mrc_ess_selectList",{attrs:{selectlist:e.list11,label:e.$t("label_Business_functions")+"*"},on:{selectItem:e.selectItem},scopedSlots:e._u([{key:"listItem",fn:function(t){var i=t.item;return[s("p",[e._v(e._s(i.name)+"---"+e._s(i.uuid))])]}}]),model:{value:e.editedItem.replace_function_uuid,callback:function(t){e.$set(e.editedItem,"replace_function_uuid",t)},expression:"editedItem.replace_function_uuid"}})],1),s("v-col",{attrs:{cols:"12"}},[e._v(" "+e._s(e.$t("label_Open_feature_list"))+" ")]),s("v-col",{attrs:{cols:"12"}},[s("mrc_ess_selectList",{attrs:{selectlist:e.list11,label:e.$t("label_Business_button")+"*"},on:{selectItem:e.selectItem},scopedSlots:e._u([{key:"listItem",fn:function(t){var i=t.item;return[s("p",[e._v(e._s(i.name)+"---"+e._s(i.uuid))])]}}]),model:{value:e.editedItem.replace_button_uuid,callback:function(t){e.$set(e.editedItem,"replace_button_uuid",t)},expression:"editedItem.replace_button_uuid"}})],1)],1)],1)],1),e.disabled?e._e():s("mrc_ess_submitBtn",{attrs:{loading:e.btnIsLoading},on:{success:e.success,cancel:e.cancel}})],1)},a=[],n=(s("c975"),s("a15b"),s("d81d"),s("a434"),s("0d03"),s("ac1f"),s("1276"),s("5530")),l=(s("96cf"),s("1da1")),u=s("bf82"),r=s("b5ae"),c={components:{},props:{disabled:{type:Boolean,default:!1}},data:function(){return{uuidlist:[{name:"xaxa",uuid:"xaxaxx"},{name:"rtrt",uuid:"1255"}],uuid:"1255",list11:[{name:"xaxa",uuid:"xaxaxx"},{name:"rtrt",uuid:"1255"},{name:"qwqwweq",uuid:"8855"}],headers:[{text:this.$t("label_Business_functions"),align:"start",sortable:!1,value:"replace_function_uuid"},{text:this.$t("label_button"),align:"start",sortable:!1,value:"replace_button_uuid"},{text:this.$t("label_agent"),align:"start",sortable:!1,value:"staffuuid"}],dialog:!1,list:{},btnIsLoading:!1,viewList:{},blanklist:[],deleteblanklist:[],editedIndex:-1,editedItem:{id:"",uuid:"",replace_staff_uuid:"",replaced_staff_uuid:"",replace_function_uuid:"",replace_button_uuid:"",role_uuid:"",replace_uuid:""},defaultItem:{id:"",uuid:"",replace_staff_uuid:"",replaced_staff_uuid:"",replace_function_uuid:"",replace_button_uuid:"",role_uuid:"",replace_uuid:""}}},computed:{company_uuid:function(){return this.$store.state.currentCompany},turnover_person:function(){return{prompt_name:"turnover_person"}},showHeaders:function(){return this.headers}},created:function(){},watch:{disabled:function(e){e||"actions"!=this.headers[this.headers.length-1].value&&this.headers.push({align:"center",sortable:!1,value:"actions"})}},mounted:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.disabled||this.headers.push({align:"center",sortable:!1,value:"actions"}),!this.$store.state.uuid){e.next=6;break}return e.next=4,this.getDetail();case 4:e.next=6;break;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{selectItem:function(e){this.uuid=e.uuid,this.uuidlist.push(e),console.log(e)},paramsChange:function(){},changeList:function(e){this.viewList=e},getDetail:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["detailBusinessApply"])({uuid:this.$store.state.uuid});case 2:t=e.sent,200==t.code&&(this.list=t.data,this.blanklist=t.mrbase_sys_apply_operation_replace_details.map((function(e){return e.replace_staff_uuid=-1!=String(e.replace_staff_uuid).indexOf(",")?e.replace_staff_uuid.split(","):[e.replace_staff_uuid],e})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),success:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.list.$touch(),!this.$v.list.$error){e.next=3;break}return e.abrupt("return");case 3:t=this.blanklist.map((function(e){return e.replace_staff_uuid=e.replace_staff_uuid.join(),e})),this.$store.state.uuid?Object(u["updateBusinessApply"])(Object(n["a"])(Object(n["a"])({},this.$deletefield(null,this.list)),{},{mrbase_sys_apply_operation_replace_details:t})).then((function(e){200==e.code?(s.$Message({text:s.$t("message_The_operation_was_successful")}),s.getDetail()):s.$Message({text:s.$t("message_The_modification_failed")+e.msg})})):Object(u["addBusinessApply"])(Object(n["a"])(Object(n["a"])({},this.list),{},{mrbase_sys_apply_operation_replace_details:t})).then((function(e){200==e.code?(s.$Message({text:s.$t("message_added_successfully")}),s.$router.push({name:"staffConnect"})):s.$Message({text:e.msg})}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){var e=this;this.$myConfirm({content:this.$t("message_Confirm_the_cancellation_of_the_edit")}).then((function(t){e.$router.push({name:"staffConnect"})}))["catch"]((function(e){}))},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){this.$v.editedItem.$touch(),this.$v.editedItem.$error||(this.editedIndex>-1?Object.assign(this.blanklist[this.editedIndex],this.editedItem):this.blanklist.push(this.editedItem),this.close())},editItem:function(e){e.replace_staff_uuid&&(this.editedIndex=this.blanklist.indexOf(e),this.editedItem=Object.assign({},e)),this.dialog=!0},deleteItem:function(e){var t=this,s=this.blanklist.indexOf(e);this.$myConfirm({content:this.$t("message_Confirm_the_deletion")}).then((function(){var e=t.blanklist.splice(s,1);(e[0].uuid||e[0].staff_uuid)&&t.deleteblanklist.push({uuid:e[0].uuid,"~type~":"del"})}))}},validations:{list:{replaced_staff_uuid:{required:r["required"]},effective_start:{required:r["required"],beforeDate:function(e){if(!this.list.effective_end)return!0;var t=new Date(e).valueOf(),s=new Date(this.list.effective_end).valueOf();return t<s}},effective_end:{required:r["required"],afterDate:function(e){if(!this.list.effective_start)return!0;var t=new Date(e).valueOf(),s=new Date(this.list.effective_start).valueOf();return s<t}}},editedtelItem:{replace_staff_uuid:{},replace_function_uuid:{},replace_button_uuid:{}}}},o=c,d=s("2877"),f=Object(d["a"])(o,i,a,!1,null,"764b0b44",null);t["default"]=f.exports},bf82:function(e,t,s){"use strict";s.r(t),s.d(t,"getBusinessApplyList",(function(){return n})),s.d(t,"addBusinessApply",(function(){return l})),s.d(t,"updateBusinessApply",(function(){return u})),s.d(t,"deleteBusinessApply",(function(){return r})),s.d(t,"detailBusinessApply",(function(){return c}));s("d3b7");var i=s("efc9"),a="mrbase_sys_flow_proxy_approval",n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e["~table~"]=a,new Promise((function(t,s){i["default"].post("/api/operation_replace/list-replace/v1",e).then((function(e){t(e)}))["catch"]((function(e){s(e)}))}))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e["~table~"]=a,new Promise((function(t,s){i["default"].post("/api/operation_replace/add-replace/v1",e).then((function(e){t(e)}))["catch"]((function(e){s(e)}))}))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e["~table~"]=a,new Promise((function(t,s){i["default"].post("/api/operation_replace/update-replace/v1",e).then((function(e){t(e)}))["catch"]((function(e){s(e)}))}))},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e["~table~"]=a,new Promise((function(t,s){i["default"].post("/api/operation_replace/delete-replace/v1",e).then((function(e){t(e)}))["catch"]((function(e){s(e)}))}))},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e["~table~"]=a,new Promise((function(t,s){i["default"].post("/api/operation_replace/find-replace/v1",e).then((function(e){t(e)}))["catch"]((function(e){s(e)}))}))}}}]);
//# sourceMappingURL=chunk-4915bf38.06ea559e.js.map