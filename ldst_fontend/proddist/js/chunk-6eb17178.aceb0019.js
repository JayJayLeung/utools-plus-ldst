(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6eb17178","chunk-f2183c10","chunk-2d21a023"],{"0d0d":function(t,e,s){},"5cfd":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-menu",{attrs:{"offset-y":"",transition:"slide-x-reverse-transition","close-on-content-click":!1,"nudge-bottom":"12"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[s("v-btn",t._g({attrs:{color:"#f2f2f2",rounded:"",small:"",fab:"",elevation:0,dark:""}},n),[s("span",{staticClass:"black--text"},[t._v("MK")])])]}}])},[s("div",{staticClass:"logBox"},[s("div",{staticClass:"logTop",style:{backgroundColor:"#739ce8"}}),s("div",{staticClass:"logFooter"},[s("span",{staticClass:"userhead"},[s("img",{staticStyle:{width:"100%",height:"100%","border-radius":"50%"},attrs:{src:"https://picsum.photos/200"}})]),s("h2",{staticStyle:{"margin-top":"88px"}},[t._v(t._s(t.$store.state.userData.old_pwd))]),s("v-btn",{staticClass:"mt-4 text-capitalize",attrs:{color:"primary",rounded:"",elevation:0,"min-width":"182","min-height":"36",dark:""},on:{click:t.changePassword}},[s("span",[t._v("Change Password")])]),s("v-spacer",{staticStyle:{"margin-top":"67px",height:"1px",width:"95%","background-color":"#e8e8e8"}}),s("div",{staticClass:"d-flex align-center",staticStyle:{height:"52px"}},[s("v-btn",{staticClass:"logout text-capitalize",style:{color:t.$vuetify.theme.defaults.light.primary},attrs:{text:"",rounded:""},on:{click:t.login_out}},[t._v("logout")])],1)],1)])]),s("mrc_ess_myDialog",{attrs:{title:"Reset Password",width:"680",successText:"Submit",cancelText:"Cancel",loading:t.loading},on:{success:t.savePassword,cancel:t.cancel},model:{value:t.changePasswordDialog,callback:function(e){t.changePasswordDialog=e},expression:"changePasswordDialog"}},[s("mrc_ess_input",{staticStyle:{"margin-top":"34px"},attrs:{placeholder:"Original Password*",label:"Original Password*","background-color":"#fff",type:t.type,"append-icon":t.icon,"error-messages":t.$errors("params","old_pwd",t.requiredRule.concat([{rule:"isChina",msg:"不能输入中文"}]))},on:{input:function(e){return t.$v.params.old_pwd.$touch()},blur:function(e){return t.$v.params.old_pwd.$touch()},"click:append":t.showPassword},model:{value:t.params.old_pwd,callback:function(e){t.$set(t.params,"old_pwd","string"===typeof e?e.trim():e)},expression:"params.old_pwd"}}),s("mrc_ess_input",{attrs:{placeholder:"new password*",label:"new password*","background-color":"#fff",type:t.type,"append-icon":t.icon,"error-messages":t.$errors("params","user_pwd",t.requiredRule.concat({rule:"isChina",msg:"不能输入中文"},{rule:"passwordStrengthRegxRule",msg:t.regxMsg}))},on:{input:function(e){return t.$v.params.user_pwd.$touch()},blur:function(e){return t.$v.params.user_pwd.$touch()},"click:append":t.showPassword},model:{value:t.params.user_pwd,callback:function(e){t.$set(t.params,"user_pwd","string"===typeof e?e.trim():e)},expression:"params.user_pwd"}}),s("mrc_ess_input",{attrs:{placeholder:"Retype password*",label:"Retype password*","background-color":"#fff","append-icon":t.icon,type:t.type,"error-messages":t.$errors("params","RetypePwd",t.requiredRule.concat([{rule:"sameAsNewPassword",msg:"两次密码输入不一致"}]))},on:{input:function(e){return t.$v.params.RetypePwd.$touch()},blur:function(e){return t.$v.params.RetypePwd.$touch()},"click:append":t.showPassword},model:{value:t.params.RetypePwd,callback:function(e){t.$set(t.params,"RetypePwd","string"===typeof e?e.trim():e)},expression:"params.RetypePwd"}})],1)],1)},a=[],r=(s("4d63"),s("ac1f"),s("25f0"),s("96cf"),s("1da1")),o=s("b5ae"),i=s("ba4b"),c={components:{},props:{},data:function(){return{loading:!1,changePasswordDialog:!1,params:{old_pwd:"",user_pwd:"",RetypePwd:""},icon:"mdi-eye-off",type:"password",is_showPassword:!1,regxRule:null,regxMsg:""}},validations:{params:{old_pwd:{required:o["required"],isChina:function(t){return this.isChina(t)}},user_pwd:{required:o["required"],isChina:function(t){return this.isChina(t)},passwordStrengthRegxRule:function(t){return new RegExp(this.regxRule).test(t)}},RetypePwd:{required:o["required"],sameAsNewPassword:function(t){return t&&t==this.params.user_pwd}}}},computed:{},created:function(){},watch:{},mounted:function(){},beforeRouteUpdate:function(){},methods:{login_out:function(){this.$emit("login_out")},changePassword:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$v.params.$reset(),t.next=3,this.getPasswordStrength();case 3:t.sent,this.changePasswordDialog=!0;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getPasswordStrength:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["passwordStrength"])({user_account:this.$store.state.userData.user_account});case 2:e=t.sent,200==e.code&&(this.regxMsg=e.data.ceckmean,this.regxRule=e.data.cecknum);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),savePassword:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$v.params.$touch(),!this.$v.params.$error){t.next=3;break}return t.abrupt("return");case 3:return this.loading=!0,t.next=6,Object(i["updatePassword"])({old_pwd:this.params.old_pwd,user_account:this.$store.state.userData.user_account,user_pwd:this.params.user_pwd});case 6:e=t.sent,200==e.code&&(this.$Message({text:this.$t("message_The_modification_was_successful"),color:"rgb(0,0,0,0.78)"}),this.changePasswordDialog=!1,this.$router.push({path:"/login"}),this.$Message({text:this.$t("密码修改成功，需要您重新登录"),color:"rgb(0,0,0,0.78)"})),this.loading=!1;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){},showPassword:function(){this.is_showPassword=!this.is_showPassword,this.is_showPassword?(this.icon="mdi-eye",this.type="text"):(this.icon="mdi-eye-off",this.type="password")}}},u=c,l=(s("b839"),s("2877")),p=Object(l["a"])(u,n,a,!1,null,"5aa2c200",null);e["default"]=p.exports},b839:function(t,e,s){"use strict";var n=s("ea58"),a=s.n(n);a.a},ba4b:function(t,e,s){"use strict";s.r(e),s.d(e,"savePwd",(function(){return r})),s.d(e,"sendEmail",(function(){return o})),s.d(e,"checkToken",(function(){return i})),s.d(e,"updatePassword",(function(){return c})),s.d(e,"passwordStrength",(function(){return u}));s("d3b7");var n=s("efc9"),a="mrbase_sys_users",r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t["~table~"]=a,new Promise((function(e,s){n["default"].post("/api/personalcenter/save-newpwd/v1",t).then((function(t){e(t)}))["catch"]((function(t){s(t)}))}))},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t["~table~"]=a,new Promise((function(e,s){n["default"].post("/api/personalcenter/send-updatePwdEmail/v1",t).then((function(t){e(t)}))["catch"]((function(t){s(t)}))}))},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t["~table~"]=a,new Promise((function(e,s){n["default"].post("/api/personalcenter/check-token/v1",t).then((function(t){e(t)}))["catch"]((function(t){s(t)}))}))},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t["~table~"]=a,new Promise((function(e,s){n["default"].post("/api/personalcenter/save-updatepwd/v1",t).then((function(t){e(t)}))["catch"]((function(t){s(t)}))}))},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,s){n["default"].post("/api/personalcenter/return-security/v1",t).then((function(t){e(t)}))["catch"]((function(t){s(t)}))}))}},ea58:function(t,e,s){},ec2e7:function(t,e,s){"use strict";var n=s("0d0d"),a=s.n(n);a.a},edb1:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"top-aside"},[s("div",{staticClass:"icon",on:{click:t.miniVariant}},[s("mrc_ess_svgIcon",{staticStyle:{"font-size":"30px"},attrs:{"icon-class":"service"}})],1),s("div",{staticClass:"rightFun"},[t.$store.state.topcompanylist.length>=1?s("span",{staticClass:"mr-2"},[s("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[t.showSelectCompany?s("v-btn",t._g(t._b({attrs:{color:"#f2f2f2",rounded:"",elevation:0,"min-width":"150",dark:""}},"v-btn",a,!1),n),[s("span",{staticStyle:{"justify-content":"space-between",width:"100%",display:"flex","align-items":"center"}},[s("span",{staticClass:"text-capitalize",staticStyle:{color:"#393939"}},[t._v(t._s(t.companyName))]),s("v-icon",{staticClass:"material-icons",staticStyle:{color:"#393939"}},[t._v("arrow_drop_down")])],1),t._v("- ")]):t._e()]}}],null,!1,1738216433)},[s("v-list",{attrs:{dense:""}},t._l(t.topcompanylist,(function(e,n){return s("v-list-item",{key:n,on:{click:function(s){return t.savecompany(e)}}},[s("v-list-item-title",[t._v(t._s(e.org_level_name))])],1)})),1)],1)],1):s("span",{staticClass:"mr-2"},[s("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[t.showSelectCompany?s("v-btn",t._g(t._b({attrs:{color:"#f2f2f2",rounded:"",elevation:0,"min-width":"150",dark:""}},"v-btn",a,!1),n),[s("span",{staticStyle:{"justify-content":"space-between",width:"100%",display:"flex","align-items":"center"}},[s("span",{staticClass:"text-capitalize",staticStyle:{color:"#393939"}},[t._v(t._s(t.companyName))]),s("v-icon",{staticClass:"material-icons",staticStyle:{color:"#393939"}},[t._v("arrow_drop_down")])],1),t._v("- ")]):t._e()]}}])})],1),t.$store.state.currentCompanyLanguage.length>=1?s("v-menu",{attrs:{"offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[s("v-btn",t._g(t._b({attrs:{color:"#f2f2f2",rounded:"",elevation:0,"min-width":"125",dark:""}},"v-btn",a,!1),n),[s("mrc_ess_svgIcon",{staticStyle:{"font-size":"23px"},attrs:{"icon-class":"outline-language-24px"}}),s("span",{staticClass:"text-capitalize",staticStyle:{"font-size":"15px",color:"#393939"}},[t._v(t._s(t.lang_name))]),s("v-icon",{staticClass:"material-icons ml-2",staticStyle:{color:"#393939"}},[t._v("arrow_drop_down")])],1)]}}],null,!1,3876827889)},[s("v-list",{staticStyle:{"overflow-y":"auto","max-height":"500px"},attrs:{dense:""}},t._l(t.langList,(function(e){return s("v-list-item",{key:e.value,on:{click:function(s){return t.lang_change(e)}}},[s("v-list-item-title",[t._v(t._s(e.text))])],1)})),1)],1):s("v-menu",{attrs:{"offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[s("v-btn",t._g(t._b({attrs:{color:"#f2f2f2",rounded:"",elevation:0,"min-width":"125",dark:""}},"v-btn",a,!1),n),[s("mrc_ess_svgIcon",{staticStyle:{"font-size":"23px"},attrs:{"icon-class":"outline-language-24px"}}),s("span",{staticStyle:{"font-size":"15px",color:"#393939"}},[t._v(t._s(t.lang_name))])],1)]}}])}),s("mrc_ess_svgIcon",{staticClass:"mx-2",staticStyle:{"font-size":"24px"},attrs:{"icon-class":"round-notifications-24px"}}),s("span",{staticClass:"mr-5"},[s("avatar",{on:{login_out:t.login_out}})],1)],1)])},a=[],r=(s("4de4"),s("96cf"),s("1da1")),o=(s("a78e"),s("0480"),s("5cfd")),i={components:{avatar:o["default"]},props:{},data:function(){return{items:["Foo","Bar","Fizz","Buzz"],company:"",companyName:"",showSelectCompany:!1}},created:function(){},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("001"==this.$store.state.userData.roles||"003"==this.$store.state.userData.roles){t.next=6;break}if(this.showSelectCompany=!0,!(this.$store.state.topcompanylist.length<=0)){t.next=5;break}return t.next=5,this.$store.dispatch("set_topcompanylist");case 5:this.$store.state.loginStatus?(this.companyName=this.$store.state.topcompanylist[0].org_level_name,this.$store.dispatch("set_currentCompany",this.$store.state.topcompanylist[0].uuid||"")):(e=this.$store.state.topcompanylist.filter((function(t){return t.uuid==s.$store.state.currentCompany})),this.companyName=e[0].org_level_name);case 6:this.langList.length<=0&&this.$store.dispatch("setCurrentCompanyLanguageList");case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{lang_change:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$store.commit("set_lang",e);case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),miniVariant:function(){this.$store.commit("set_miniVariant",!this.$store.state.miniVariant)},login_out:function(){this.$router.push({name:"login"})},savecompany:function(t){t.org_level_name!=this.companyName&&(this.companyName=t.org_level_name,this.$store.dispatch("set_currentCompany",t.uuid||""),this.$store.commit("set_currentCompanyClientUuid",t.client_uuid||""),window.location.reload())}},computed:{langList:function(){return this.$store.state.currentCompanyLanguage},lang_name:function(){return this.$store.getters.lang_name},topcompanylist:function(){return this.$store.state.topcompanylist}},watch:{}},c=i,u=(s("ec2e7"),s("2877")),l=Object(u["a"])(c,n,a,!1,null,"40e27ba2",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-6eb17178.aceb0019.js.map