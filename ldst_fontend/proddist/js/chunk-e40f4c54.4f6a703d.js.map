{"version":3,"sources":["webpack:///./src/views/reset-password/index.vue?0a84","webpack:///src/views/reset-password/index.vue","webpack:///./src/views/reset-password/index.vue?3cc1","webpack:///./src/views/reset-password/index.vue","webpack:///./src/views/reset-password/index.vue?104f","webpack:///./src/service/api/forgot-password.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","title","staticStyle","attrs","icon","type","$errors","requiredRule","concat","rule","msg","regxMsg","on","$event","$v","savePwdParams","user_pwd","$touch","showPassword","model","value","callback","$$v","$set","trim","expression","sameAsPassword","successBackgroundColor","disabled","loading","savePwdHandler","backHandler","$t","staticRenderFns","components","props","data","regxRule","urlParams","sendMail","sendEmailParams","user_account","token","openDialog","is_showPassword","screenSize","webPc","validations","required","isChina","val","passwordStrengthRegxRule","RegExp","test","computed","created","watch","methods","getQueryParams","href","params","search","get","login_url","window","location","resize","addEventListener","fn","component","table","savePwd","Promise","resolve","reject","http","post","then","res","err","sendEmail","checkToken","updatePassword","passwordStrength"],"mappings":"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","file":"js/chunk-e40f4c54.4f6a703d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"forget-password\"},[(_vm.webPc)?_c('div',{staticClass:\"webPc\"},[_c('v-card',{staticClass:\"webResetPassword\"},[_c('div',{staticClass:\"forgot_title\"},[_vm._v(_vm._s(_vm.title))]),_c('mrc_ess_input',{staticStyle:{\"margin-top\":\"80px\"},attrs:{\"placeholder\":\"new password\",\"background-color\":\"#fff\",\"append-icon\":_vm.icon,\"type\":_vm.type,\"error-messages\":_vm.$errors('savePwdParams','user_pwd',_vm.requiredRule.concat({rule: 'passwordStrengthRegxRule', msg: _vm.regxMsg},{rule: 'isChina', msg: '不能输入中文'}))},on:{\"input\":function($event){return _vm.$v.savePwdParams.user_pwd.$touch()},\"blur\":function($event){return _vm.$v.savePwdParams.user_pwd.$touch()},\"click:append\":_vm.showPassword},model:{value:(_vm.savePwdParams.user_pwd),callback:function ($$v) {_vm.$set(_vm.savePwdParams, \"user_pwd\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"savePwdParams.user_pwd\"}}),_c('mrc_ess_input',{attrs:{\"placeholder\":\"Retype password\",\"background-color\":\"#fff\",\"append-icon\":_vm.icon,\"type\":_vm.type,\"error-messages\":_vm.$errors('savePwdParams','sameAsPassword',_vm.requiredRule.concat([{rule: 'sameAsPassword',msg: '两次密码输入不一致'}]))},on:{\"input\":function($event){return _vm.$v.savePwdParams.sameAsPassword.$touch()},\"blur\":function($event){return _vm.$v.savePwdParams.sameAsPassword.$touch()},\"click:append\":_vm.showPassword},model:{value:(_vm.savePwdParams.sameAsPassword),callback:function ($$v) {_vm.$set(_vm.savePwdParams, \"sameAsPassword\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"savePwdParams.sameAsPassword\"}}),_c('mrc_ess_submitBtn',{attrs:{\"cancelText\":\"Back\",\"backgroundColor\":\"#fff\",\"successText\":\"Submit\",\"successBackgroundColor\":_vm.successBackgroundColor,\"disabled\":_vm.disabled,\"loading\":_vm.loading},on:{\"success\":_vm.savePwdHandler,\"cancel\":_vm.backHandler}})],1)],1):_c('div',{staticClass:\"phoneH5\"},[_c('v-card',{staticClass:\"resetPassword\"},[_c('div',{staticClass:\"forgot_title\"},[_vm._v(_vm._s(_vm.title))]),_c('mrc_ess_input',{staticStyle:{\"margin-top\":\"14vw\"},attrs:{\"placeholder\":\"new password\",\"background-color\":\"#fff\",\"type\":_vm.type,\"append-icon\":_vm.icon,\"error-messages\":_vm.$errors('savePwdParams','user_pwd',_vm.requiredRule.concat({rule: 'passwordStrengthRegxRule', msg: _vm.regxMsg},{rule: 'isChina', msg: '不能输入中文'}))},on:{\"input\":function($event){return _vm.$v.savePwdParams.user_pwd.$touch()},\"blur\":function($event){return _vm.$v.savePwdParams.user_pwd.$touch()},\"click:append\":_vm.showPassword},model:{value:(_vm.savePwdParams.user_pwd),callback:function ($$v) {_vm.$set(_vm.savePwdParams, \"user_pwd\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"savePwdParams.user_pwd\"}}),_c('mrc_ess_input',{attrs:{\"placeholder\":\"Retype password\",\"background-color\":\"#fff\",\"append-icon\":_vm.icon,\"type\":_vm.type,\"error-messages\":_vm.$errors('savePwdParams','sameAsPassword',_vm.requiredRule.concat([{rule: 'sameAsPassword',msg: '两次密码输入不一致'}]))},on:{\"input\":function($event){return _vm.$v.savePwdParams.sameAsPassword.$touch()},\"blur\":function($event){return _vm.$v.savePwdParams.sameAsPassword.$touch()},\"click:append\":_vm.showPassword},model:{value:(_vm.savePwdParams.sameAsPassword),callback:function ($$v) {_vm.$set(_vm.savePwdParams, \"sameAsPassword\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"savePwdParams.sameAsPassword\"}}),_c('mrc_ess_submitBtn',{staticClass:\"flex-column-reverse phoneSubmitBtn\",attrs:{\"cancelText\":\"Back\",\"backgroundColor\":\"#fff\",\"successText\":\"Submit\",\"loading\":_vm.loading,\"successBackgroundColor\":_vm.successBackgroundColor,\"disabled\":_vm.disabled},on:{\"success\":_vm.savePwdHandler,\"cancel\":_vm.backHandler}})],1)],1),_c('div',{staticClass:\"bottom\"},[_c('span',{staticClass:\"ft2\"},[_vm._v(_vm._s(_vm.$t('Privary Policy')))]),_c('i',[_vm._v(\"|\")]),_c('span',{staticClass:\"ft2\"},[_vm._v(_vm._s(_vm.$t('Term of Use')))]),_c('p',{staticClass:\"ft3\"},[_vm._v(\"Copyight 2020 by MRC International Grounp Limited\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Description: 忘记密码， 这是个响应式的页面\r\n * @Autor: lwq\r\n * @Date: 2020-08-17 17:30:59\r\n * @LastEditors: lwq\r\n * @LastEditTime: 2020-09-01 21:17:59\r\n * @FilePath: \\mrc-base-server-view\\src\\views\\reset-password\\index.vue\r\n-->\r\n<template>\r\n  <div class=\"forget-password\">\r\n    <!-- webPc 的页面 -->\r\n    <div class=\"webPc\"\r\n         v-if=\"webPc\">\r\n\r\n      <!-- 重置密码 -->\r\n      <v-card class=\"webResetPassword\">\r\n        <div class=\"forgot_title\">{{title}}</div>\r\n        <mrc_ess_input placeholder=\"new password\"\r\n                       background-color='#fff'\r\n                       style=\"margin-top: 80px\"\r\n                       @input=\"$v.savePwdParams.user_pwd.$touch()\"\r\n                       @blur=\"$v.savePwdParams.user_pwd.$touch()\"\r\n                       v-model.trim=\"savePwdParams.user_pwd\"\r\n                       :append-icon=\"icon\"\r\n                       :type='type'\r\n                       @click:append=\"showPassword\"\r\n                       :error-messages=\"$errors('savePwdParams','user_pwd',requiredRule.concat({rule: 'passwordStrengthRegxRule', msg: regxMsg},{rule: 'isChina', msg: '不能输入中文'}))\"></mrc_ess_input>\r\n        <mrc_ess_input placeholder=\"Retype password\"\r\n                       background-color='#fff'\r\n                       @input=\"$v.savePwdParams.sameAsPassword.$touch()\"\r\n                       @blur=\"$v.savePwdParams.sameAsPassword.$touch()\"\r\n                       :append-icon=\"icon\"\r\n                       :type='type'\r\n                       @click:append=\"showPassword\"\r\n                       v-model.trim=\"savePwdParams.sameAsPassword\"\r\n                       :error-messages=\"$errors('savePwdParams','sameAsPassword',requiredRule.concat([{rule: 'sameAsPassword',msg: '两次密码输入不一致'}]))\"></mrc_ess_input>\r\n\r\n        <mrc_ess_submitBtn cancelText='Back'\r\n                           backgroundColor='#fff'\r\n                           successText='Submit'\r\n                           :successBackgroundColor='successBackgroundColor'\r\n                           :disabled='disabled'\r\n                           :loading='loading'\r\n                           @success='savePwdHandler'\r\n                           @cancel='backHandler'></mrc_ess_submitBtn>\r\n      </v-card>\r\n\r\n    </div>\r\n\r\n    <!-- 这是手机的输入框 -->\r\n    <div class=\"phoneH5\"\r\n         v-else>\r\n\r\n      <!-- 重置密码 -->\r\n      <v-card class=\"resetPassword\">\r\n        <div class=\"forgot_title\">{{title}}</div>\r\n        <mrc_ess_input placeholder=\"new password\"\r\n                       background-color='#fff'\r\n                       style=\"margin-top: 14vw\"\r\n                       @input=\"$v.savePwdParams.user_pwd.$touch()\"\r\n                       @blur=\"$v.savePwdParams.user_pwd.$touch()\"\r\n                       v-model.trim=\"savePwdParams.user_pwd\"\r\n                       :type='type'\r\n                       :append-icon=\"icon\"\r\n                       @click:append=\"showPassword\"\r\n                       :error-messages=\"$errors('savePwdParams','user_pwd',requiredRule.concat({rule: 'passwordStrengthRegxRule', msg: regxMsg},{rule: 'isChina', msg: '不能输入中文'}))\"></mrc_ess_input>\r\n        <mrc_ess_input placeholder=\"Retype password\"\r\n                       background-color='#fff'\r\n                       @input=\"$v.savePwdParams.sameAsPassword.$touch()\"\r\n                       @blur=\"$v.savePwdParams.sameAsPassword.$touch()\"\r\n                       :append-icon=\"icon\"\r\n                       :type='type'\r\n                       @click:append=\"showPassword\"\r\n                       v-model.trim=\"savePwdParams.sameAsPassword\"\r\n                       :error-messages=\"$errors('savePwdParams','sameAsPassword',requiredRule.concat([{rule: 'sameAsPassword',msg: '两次密码输入不一致'}]))\"></mrc_ess_input>\r\n\r\n        <mrc_ess_submitBtn cancelText='Back'\r\n                           backgroundColor='#fff'\r\n                           successText='Submit'\r\n                           :loading='loading'\r\n                           :successBackgroundColor='successBackgroundColor'\r\n                           :disabled='disabled'\r\n                           @success='savePwdHandler'\r\n                           class=\"flex-column-reverse phoneSubmitBtn\"\r\n                           @cancel='backHandler'></mrc_ess_submitBtn>\r\n      </v-card>\r\n    </div>\r\n    <!-- 这是页面底部的版本信息 -->\r\n    <div class=\"bottom\">\r\n      <span class=\"ft2\">{{$t('Privary Policy')}}</span>\r\n      <i>|</i>\r\n      <span class=\"ft2\">{{$t('Term of Use')}}</span>\r\n      <p class=\"ft3\">Copyight 2020 by MRC International Grounp Limited</p>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { required, minLength } from 'vuelidate/lib/validators'\r\nimport { savePwd, sendEmail, checkToken, passwordStrength } from '@/service/api/forgot-password'\r\nexport default {\r\n  components: {},\r\n  props: {},\r\n  data () {\r\n    return {\r\n      regxMsg: '',\r\n      regxRule: '',\r\n      disabled: false,\r\n      successBackgroundColor: 'primary',\r\n      urlParams: {},\r\n      title: 'Forgot Password',\r\n      icon: 'mdi-eye-off',\r\n      type: 'password',\r\n      sendMail: false,\r\n\r\n      sendEmailParams: {\r\n        user_account: ''\r\n      },\r\n      savePwdParams: {\r\n        user_account: '',\r\n        user_pwd: '',\r\n        sameAsPassword: '',\r\n        token: ''\r\n      },\r\n      openDialog: false,\r\n      is_showPassword: false,\r\n      screenSize: '',\r\n      // 是web的尺寸 true  手机的尺寸 false\r\n      webPc: true,\r\n      loading: false\r\n    };\r\n  },\r\n  validations: {\r\n    sendEmailParams: {\r\n      user_account: {\r\n        required\r\n      }\r\n    },\r\n    savePwdParams: {\r\n      user_pwd: {\r\n        required,\r\n        isChina (val) {\r\n          return this.isChina(val)\r\n        },\r\n        passwordStrengthRegxRule (val) {\r\n          return new RegExp(this.regxRule).test(val)\r\n        }\r\n\r\n      },\r\n      sameAsPassword: {\r\n        required,\r\n        sameAsPassword (val) {\r\n          return val && val == this.savePwdParams.user_pwd\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  created () {\r\n\r\n  },\r\n  watch: {},\r\n  async mounted () {\r\n    // 判断是发送邮件还是重置密码\r\n    this.getQueryParams()\r\n\r\n    if (this.urlParams.token) {\r\n      this.successBackgroundColor = '#e0e0e0'\r\n      this.disabled = true\r\n      const res = await checkToken({ token: this.urlParams.token, user_account: this.urlParams.user_account })\r\n      if (res.code == 200) {\r\n        this.getPasswordStrength()\r\n        this.savePwdParams.token = this.urlParams.token\r\n        this.savePwdParams.user_account = this.urlParams.user_account\r\n        this.sendMail = false\r\n        this.title = 'Reset Password'\r\n        this.disabled = false\r\n        this.successBackgroundColor = 'primary'\r\n      } else {\r\n        this.$store.commit('newsTips', res.msg)\r\n        setTimeout(() => {\r\n          if (this.urlParams.login_url) {\r\n            window.location.href = this.urlParams.login_url\r\n          } else {\r\n            this.$store.commit('newsTips', '该链接已失效，请重新发送邮件获取链接')\r\n          }\r\n        }, 1000)\r\n        this.sendMail = true\r\n      }\r\n\r\n    } else {\r\n      this.successBackgroundColor = '#e0e0e0'\r\n      this.disabled = true\r\n      setTimeout(() => {\r\n        if (this.urlParams.login_url) {\r\n          window.location.href = this.urlParams.login_url\r\n        } else {\r\n          this.$store.commit('newsTips', '该链接为无效链接，请重新发送邮件获取链接')\r\n        }\r\n      }, 1000)\r\n    }\r\n    const that = this\r\n    that.screenSize = document.documentElement.clientWidth\r\n    if (that.screenSize > 750) {\r\n      that.webPc = true\r\n    } else {\r\n      that.webPc = false\r\n    }\r\n    this.resize(function () {\r\n      that.screenSize = document.documentElement.clientWidth\r\n      if (that.screenSize > 750) {\r\n        that.webPc = true\r\n      } else {\r\n        that.webPc = false\r\n      }\r\n    })\r\n\r\n  },\r\n\r\n  methods: {\r\n    // 获取密码强度验证\r\n    async getPasswordStrength () {\r\n      const res = await passwordStrength({ user_account: this.urlParams.user_account })\r\n      if (res.code == 200) {\r\n        this.regxMsg = res.data.ceckmean\r\n        this.regxRule = res.data.cecknum\r\n      }\r\n    },\r\n    // 获取url参数\r\n    getQueryParams () {\r\n      let params = {}\r\n      let href = this.$route.params.token\r\n      if (href) {\r\n\r\n        href = '?token=' + href\r\n\r\n        const search = new URLSearchParams(href)\r\n        params.token = search.get('token')\r\n        params.user_account = search.get('user_account')\r\n        params.login_url = search.get('login_url')\r\n        this.urlParams = params\r\n      } else {\r\n        this.urlParams = {}\r\n      }\r\n\r\n    },\r\n    showPassword () {\r\n      this.is_showPassword = !this.is_showPassword\r\n      if (this.is_showPassword) {\r\n        this.icon = 'mdi-eye'\r\n        this.type = 'text'\r\n      } else {\r\n        this.icon = 'mdi-eye-off'\r\n        this.type = 'password'\r\n      }\r\n    },\r\n    // back\r\n    backHandler () {\r\n      if (this.urlParams.login_url) {\r\n        window.location.href = this.urlParams.login_url\r\n      } else {\r\n\r\n      }\r\n\r\n    },\r\n    // 修改密码\r\n    async savePwdHandler () {\r\n      this.$v.savePwdParams.$touch()\r\n      if (this.$v.savePwdParams.$error) return\r\n\r\n      const res = await savePwd(\r\n        {\r\n          token: this.savePwdParams.token,\r\n          user_account: this.savePwdParams.user_account,\r\n          user_pwd: this.savePwdParams.user_pwd,\r\n        }\r\n      )\r\n      if (res.code == 200) {\r\n        this.$store.commit('newsTips', '修改成功')\r\n        setTimeout(() => {\r\n          if (this.urlParams.login_url) {\r\n            window.location.href = this.urlParams.login_url\r\n          } else {\r\n            this.$store.commit('newsTips', '请返回登录页重新登录')\r\n          }\r\n        }, 500)\r\n      }\r\n    },\r\n\r\n\r\n    resize (fn) {\r\n      window.addEventListener('resize', function () {\r\n        fn()\r\n      })\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.forget-password {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  background: url(\"../../assets/img/loginBg.png\") no-repeat;\r\n  text-align: center;\r\n  background-color: #0f46c1;\r\n}\r\n.webResetPassword,\r\n.webSendMail {\r\n  width: 560px;\r\n  height: 420px;\r\n  border-radius: 4px;\r\n  background: #ffffff;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  padding: 0 72px;\r\n}\r\n\r\n.webSendMail {\r\n  height: 352px;\r\n}\r\n\r\n.webPc .forgot_title {\r\n  margin-top: 64px;\r\n  text-align: left;\r\n  font-size: 28px;\r\n}\r\n\r\n.forget-password /deep/ .btnGroup {\r\n  justify-content: flex-end;\r\n  height: 48px;\r\n}\r\n.forget-password /deep/ .successBtn {\r\n  width: 170px;\r\n  height: 48px;\r\n  max-height: 48px !important;\r\n  margin-left: 14px;\r\n}\r\n.forget-password /deep/ .cencelBtn {\r\n  font-weight: medium;\r\n  margin-right: 0;\r\n}\r\n\r\n.phoneH5 .sendMail,\r\n.phoneH5 .resetPassword {\r\n  height: 420px;\r\n  border-radius: 4px;\r\n  background: #ffffff;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  padding: 0 10vw;\r\n  width: 90vw;\r\n}\r\n.phoneH5 .sendMail,\r\n.phoneH5 .resetPassword {\r\n  min-width: 300px;\r\n}\r\n.phoneH5 .resetPassword {\r\n  height: 500px;\r\n}\r\n.phoneH5 .forgot_title {\r\n  margin-top: 64px;\r\n  text-align: left;\r\n  font-size: 20px;\r\n}\r\n.phoneH5 .phoneSubmitBtn /deep/ .successBtn {\r\n  margin: 20px 0;\r\n}\r\n\r\n.bottom {\r\n  color: #fff;\r\n  position: absolute;\r\n  bottom: 1px;\r\n  text-align: center;\r\n  left: 50%;\r\n  z-index: 10;\r\n  font-size: 14px;\r\n  transform: translateX(-50%);\r\n  min-width: 250px;\r\n}\r\n.bottom .ft2 {\r\n  color: #ffffff;\r\n  font-family: Noto Sans CJK TC;\r\n  font-weight: medium;\r\n  font-size: 14px;\r\n  line-height: 1.25;\r\n  letter-spacing: 1.25px;\r\n  text-align: left;\r\n}\r\n.bottom i {\r\n  display: inline-block;\r\n  width: 37px;\r\n  font-style: normal;\r\n}\r\n.bottom p {\r\n  color: #ffffff;\r\n  font-family: Noto Sans CJK TC;\r\n  font-weight: regular;\r\n  font-size: 12px;\r\n  line-height: 1.29;\r\n  letter-spacing: 0px;\r\n  text-align: center;\r\n  min-width: 303px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7abd1508&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=7abd1508&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7abd1508\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=7abd1508&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=7abd1508&scoped=true&lang=css&\"","/*\r\n * @Description: \r\n * @Autor: lwq\r\n * @Date: 2020-08-19 10:03:52\r\n * @LastEditors: lwq\r\n * @LastEditTime: 2020-08-24 18:31:54\r\n * @FilePath: \\mrc-base-server-view\\src\\service\\api\\forgot-password.js\r\n */\r\nimport http from '../httpConfig'\r\nconst table = 'mrbase_sys_users'\r\n// 保存新密码\r\nexport const savePwd = (params = {}) => {\r\n  params['~table~'] = table\r\n  return new Promise((resolve, reject) => {\r\n    http.post('/api/personalcenter/save-newpwd/v1', params)\r\n      .then(res => {\r\n        resolve(res)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n\r\nexport const sendEmail = (params = {}) => {\r\n  params['~table~'] = table\r\n  return new Promise((resolve, reject) => {\r\n    http.post('/api/personalcenter/send-updatePwdEmail/v1', params)\r\n      .then(res => {\r\n        resolve(res)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n\r\n// 验证token过期\r\nexport const checkToken = (params = {}) => {\r\n  params['~table~'] = table\r\n  return new Promise((resolve, reject) => {\r\n    http.post('/api/personalcenter/check-token/v1', params)\r\n      .then(res => {\r\n        resolve(res)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n\r\n// 修改密码\r\n\r\nexport const updatePassword = (params = {}) => {\r\n  params['~table~'] = table\r\n  return new Promise((resolve, reject) => {\r\n    http.post('/api/personalcenter/save-updatepwd/v1', params)\r\n      .then(res => {\r\n        resolve(res)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n\r\n// 获取密码强度的正则 \r\nexport const passwordStrength = (params = {}) => {\r\n  return new Promise((resolve, reject) => {\r\n    http.post('/api/personalcenter/return-security/v1', params)\r\n      .then(res => {\r\n        resolve(res)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n  })\r\n}"],"sourceRoot":""}